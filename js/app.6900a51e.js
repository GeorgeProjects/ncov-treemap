(function(e){function t(t){for(var n,s,o=t[0],l=t[1],c=t[2],u=0,h=[];u<o.length;u++)s=o[u],i[s]&&h.push(i[s][0]),i[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(h.length)h.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},i={app:0},r=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0006":function(e,t,a){},"0074":function(e,t,a){},"029a":function(e,t,a){"use strict";var n=a("9023"),i=a.n(n);i.a},"03d0":function(e,t,a){"use strict";var n=a("ca3e"),i=a.n(n);i.a},"04de":function(e,t,a){"use strict";var n=a("ca23"),i=a.n(n);i.a},"06e9":function(e,t,a){"use strict";var n=a("2c97"),i=a.n(n);i.a},"0b41":function(e,t,a){"use strict";var n=a("6535"),i=a.n(n);i.a},"0cb7":function(e,t,a){"use strict";var n=a("9c02"),i=a.n(n);i.a},"0cd1":function(e,t,a){"use strict";var n=a("bc3b"),i=a.n(n);i.a},"0e49":function(e,t,a){},"103b":function(e,t,a){},"120b":function(e,t,a){"use strict";var n=a("f456"),i=a.n(n);i.a},1261:function(e,t,a){"use strict";var n=a("3818"),i=a.n(n);i.a},1484:function(e,t,a){"use strict";var n=a("9b9b"),i=a.n(n);i.a},1845:function(e,t,a){"use strict";var n=a("2953"),i=a.n(n);i.a},"18b0":function(e,t,a){"use strict";var n=a("edaf"),i=a.n(n);i.a},"1d5a":function(e,t,a){},"1fc1":function(e,t,a){},"23a7":function(e,t,a){},2464:function(e,t,a){},"24b6":function(e,t,a){},2766:function(e,t,a){},2953:function(e,t,a){},"2c97":function(e,t,a){},3129:function(e,t,a){},3511:function(e,t,a){},3769:function(e,t,a){"use strict";var n=a("c32b"),i=a.n(n);i.a},3818:function(e,t,a){},"3aec":function(e,t,a){"use strict";var n=a("43f9"),i=a.n(n);i.a},"40ed":function(e,t,a){"use strict";var n=a("5f7f"),i=a.n(n);i.a},"43f9":function(e,t,a){},"457f":function(e,t,a){"use strict";var n=a("0e49"),i=a.n(n);i.a},4593:function(e,t,a){},"45b2":function(e,t,a){},"48e4":function(e,t,a){},5010:function(e,t,a){},"52ef":function(e,t,a){},"552f":function(e,t,a){"use strict";var n=a("e5e9"),i=a.n(n);i.a},"55a2":function(e,t,a){},"55bb":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var n=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-menu",{key:e.componentKey,staticClass:"el-menu-demo",attrs:{mode:"horizontal","background-color":"#676767","text-color":"#fff","default-active":e.activeIndex,"active-text-color":"#ffd04b"}},[a("el-menu-item",{staticClass:"labelIcon",attrs:{id:"title",index:"title"}},[e._v("\n        "+e._s(e.appName)+"\n      ")]),a("el-tooltip",{key:"export",staticClass:"labelIcon",attrs:{content:"export",effect:"light"}},[a("el-menu-item",{attrs:{index:"export"},on:{click:function(t){e.exportDialogVisible=!0}}},[a("i",{staticClass:"icon iconfont icon-export"})])],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingView,expression:"loadingView"}],staticClass:"content-container"},[e.loadingData?e._e():a("div",{staticClass:"content"},[a("div",{staticClass:"right-panel"},[a("div",{staticClass:"bottom-panel"},[a("div",{attrs:{id:"tree-canvas-view-body"}},[a("div",{attrs:{id:"original-data-view"}},[a("OriginalDataView",{on:{openDataView:e.openDataView,closeDataView:e.closeDataView}})],1),a("div",{attrs:{id:"treecanvas-content-view"}},[a("TreeCanvas",{attrs:{treeCanvasKey:e.treeCanvasKey}})],1)])])])])]),a("el-dialog",{attrs:{title:"Dataset",id:"dataset-dialog",visible:e.dataDialogVisible},on:{"update:visible":function(t){e.dataDialogVisible=t}}},[a("DataDialog",{attrs:{initTreeDataName:e.initTreeDataName,dataDialogKey:e.dataDialogKey},on:{updateSelectedTreeDateName:e.updateSelectedTreeDateName,closeDataDialog:e.closeDataDialog}})],1),a("el-dialog",{attrs:{title:"Tree Template",id:"treedsl-dialog",visible:e.treedslDialogVisible},on:{"update:visible":function(t){e.treedslDialogVisible=t}}},[a("TreedslDialog",{attrs:{treedslDialogUpdate:e.treedslDialogUpdate}})],1),a("el-dialog",{attrs:{title:"Export",id:"export-dialog","destroy-on-close":!0,visible:e.exportDialogVisible},on:{"update:visible":function(t){e.exportDialogVisible=t}}},[a("ExportDialog")],1),a("el-dialog",{attrs:{title:"Login",id:"login-dialog","destroy-on-close":!0,visible:e.loginDialogVisible},on:{"update:visible":function(t){e.loginDialogVisible=t}}},[a("LoginDialog",{attrs:{openSignUpDialog:e.openSignUpDialog,closeLoginDialog:e.closeLoginDialog}})],1),a("el-dialog",{attrs:{title:"Signup New User",id:"signup-dialog","destroy-on-close":!0,visible:e.signupDialogVisible},on:{"update:visible":function(t){e.signupDialogVisible=t}}},[a("SignUpDialog",{attrs:{closeSignupDialog:e.closeSignupDialog}})],1),a("el-dialog",{attrs:{title:"Profile",id:"userinfo-dialog","destroy-on-close":!0,visible:e.userInfoDialogVisible},on:{"update:visible":function(t){e.userInfoDialogVisible=t}}},[a("UserInfoDialog",{attrs:{closeUserInfoDialog:e.closeUserInfoDialog,userInfoDialogKey:e.userInfoDialogKey}})],1)],1)},r=[],s=(a("96cf"),a("3b8d")),o=(a("3b2b"),a("a481"),a("57e7"),a("cebc")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",attrs:{id:e.treeCanvasContainerId}},[a("svg",{attrs:{id:e.treeCanvasSvgIdCopy}}),a("svg",{staticClass:"tree-canvas",attrs:{id:e.treeCanvasSvgId}},[a("g",{attrs:{id:e.treeCanvasId}})]),a("div",{attrs:{id:"NodeLabel"}})])},c=[],d=a("768b"),u=(a("7f7f"),a("d25f"),a("c5f6"),a("2f62"));function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0};this.x=e.x,this.y=e.y}h.prototype={init:function(){},updateData:function(){},generatePath:function(e){var t=d3.line().x((function(e){return e.x})).y((function(e){return e.y})),a=t(e);return a}};a("55dd");function p(e,t,a,n,i,r){this.polarAxis=e,this.polarInnerRadius=t,this.polarStartAngle=2*a,this.polarCenterAngle=n,this.polarCenterPara=i,this.polarDirection=r}function f(e,t,a,n,i){var r=[];for(var s in a)r.push(s);r=r.sort((function(e,t){var a=e.replace("index-",""),n=t.replace("index-","");return a-n}));for(var o={},l=0;l<n.length;l++){var c=n[l].data.index;o[c]=n[l]}var d=r[0],u={},h=i.width,p=i.height,f=0,m=0,y=0,v=0,b=0,D=0,S=0,T=0;var x=t[e[d]];u[a[d].id]={fatherID:null,x:f,isLeaf:1,y:y,Rootx:0,Rooty:0,RootWidth:0,RootHeight:0,Width:h,Height:p,depth:0,id:a[d].id,SubtreesX:0,SubtreesY:0,SubtreesWidth:0,SubtreesHeight:0,others:{},value:o[a[d].id].value},g(u[a[d].id],o[a[d].id],x);for(var A=0;A<r.length;A++){var _=r[A],L=u[a[_].id],C=0;0!==a[_].width&&(C=L.Width/a[_].width);var O=0;0!==a[_].height&&(O=L.Height/a[_].height),L.Rootx=a[_].root.x*C+b,L.Rooty=a[_].root.y*O+S,L.RootWidth=a[_].root.width*C-b-D,L.RootHeight=a[_].root.height*O-S-T,L.SubtreesX=a[_].subtrees.x*C+b,L.SubtreesY=a[_].subtrees.y*O+S,L.SubtreesWidth=a[_].subtrees.width*C-b-D,L.SubtreesHeight=a[_].subtrees.height*O-S-T,L.depth,u[a[_].id]=L;for(var R=0;R<a[_].subtreeLayout.length;R++){L.isLeaf=0;var E=a[_].subtreeLayout[R].id;u[E]={fatherID:a[_].id,x:L.x+a[_].subtreeLayout[R].x*C+f,y:L.y+a[_].subtreeLayout[R].y*O+y,Rootx:0,Rooty:0,RootWidth:0,RootHeight:0,isLeaf:1,Width:a[_].subtreeLayout[R].width*C-f-m,Height:a[_].subtreeLayout[R].height*O-y-v,depth:L.depth+1,id:E,SubtreesX:0,SubtreesY:0,SubtreesWidth:0,SubtreesHeight:0,others:{},value:o[E].value},g(u[E],o[E],t[e[E]])}}for(var j in u)u[j].translate="translate(0 , 0)";return u}function g(e,t,a){var n=[];"Tooltip"in a.Element&&(n=a.Element.Tooltip);for(var i=0;i<n.length;i++)e[n[i]]=t.data[n[i]]}p.prototype={updateData:function(e){this.SubTreeData=e,this.initOrigin(),this.initScale()},initScale:function(){var e=this.SubTreeData,t=e.TreeWidth>e.TreeHeight?e.TreeHeight/2:e.TreeWidth/2,a="clockwise"===this.polarDirection?d3.scaleLinear().range([Math.PI*(this.polarCenterAngle+this.polarStartAngle),Math.PI*(-this.polarCenterAngle+this.polarStartAngle)]):d3.scaleLinear().range([Math.PI*(-this.polarCenterAngle+this.polarStartAngle),Math.PI*(this.polarCenterAngle+this.polarStartAngle)]),n=d3.scaleLinear().range([t*this.polarInnerRadius,t]);"y-axis"===this.polarAxis?(a.domain([this.x,this.x+e.TreeWidth]),"top"===this.polarCenterPara?n.domain([this.y,Math.abs(this.y+e.TreeHeight)]):"bottom"===this.polarCenterPara&&n.domain([this.y,Math.abs(this.y-e.TreeHeight)])):"x-axis"===this.polarAxis&&(a.domain([this.y,this.y+e.TreeHeight]),"left"===this.polarCenterPara?n.domain([this.x,Math.abs(this.x+e.TreeWidth)]):"right"===this.polarCenterPara&&n.domain([this.x,Math.abs(this.x-e.TreeWidth)])),this.angleScale=a,this.rScale=n},initOrigin:function(){var e=this._getPolarCenter();this.x=e.x,this.y=e.y},setOrigin:function(e){this.x=e.x,this.y=e.y},generatePath:function(e,t,a){var n=[],i=this.angleScale,r=this.rScale;if("undefined"!==typeof i&&"undefined"!==typeof r||console.log("scale is undefined"),"y-axis"===this.polarAxis)for(var s=0;s<e.length;s++){var o=e[s],l=i(o.x),c=r(o.y),d={angle:l,radius:c};n.push(d)}else if("x-axis"===this.polarAxis)for(var u=0;u<e.length;u++){var h=e[u],p=i(h.y),f=r(h.x),g={angle:p,radius:f};n.push(g)}n=n.sort((function(e,t){return e.radius-t.radius}));var m=n[0].radius,y=n[n.length-1].radius;n=n.sort((function(e,t){return e.angle-t.angle}));var v=n[0].angle,b=n[n.length-1].angle,D=d3.arc().innerRadius((function(e){return m})).outerRadius((function(e){return y})).startAngle((function(e){return v})).endAngle((function(e){return b})).padAngle(.01).padRadius(0);return D()},calPosition:function(e){var t,a=this.angleScale,n=this.rScale;if("y-axis"===this.polarAxis){var i=a(e.x),r=n(e.y);t={angle:i,radius:r}}else if("x-axis"===this.polarAxis){var s=a(e.y),o=n(e.x);t={angle:s,radius:o}}var l=t.angle-Math.PI/2,c=Math.cos(l)*t.radius,d=Math.sin(l)*t.radius,u={x:c,y:d};return u},_getPolarCenter:function(){var e=this.SubTreeData,t=this.polarCenterPara;return"top"===t?{x:e.x+e.TreeWidth/2,y:e.y}:"bottom"===t?{x:e.x+e.TreeWidth/2,y:e.y+e.TreeHeight}:"left"===t?{x:e.x,y:e.y+e.TreeHeight/2}:"right"===t?{x:e.x+e.TreeWidth,y:e.y+e.TreeHeight/2}:void 0}};a("ac6a"),a("f3e2");function m(e){"children"in e?e.children.forEach((function(e){m(e)})):e.children=[]}function y(e){return"Element"in e||(e.Element={}),"CoordinateSystem"in e||(e.CoordinateSystem={}),"Layout"in e||(e.Layout={}),v(e.Element),D(e.Element),b(e.Element),S(e.CoordinateSystem),T(e.Layout),e}function v(e){var t=5,a=["fill","static"],n="#6baed6",i=["#2171b5","#deebf7"],r=["option1","option2"];"Node"in e||(e.Node="hidden"),"SizeOption"in e||(e.SizeOption=a[0]),"RootWidth"in e||(e.RootWidth="adaptive"),"RootHeight"in e||(e.RootHeight="adaptive"),"StaticSize"in e||(e.StaticSize=t),"Color"in e||(e.Color="static"),"StaticColor"in e||(e.StaticColor=n),"ColorRange"in e||(e.ColorRange=i),"ColorSchema"in e||(e.ColorSchema=r[0])}function b(e){var t=0,a=0,n=0;"Label"in e||(e.Label="hidden"),"LabelAnchor"in e||(e.LabelAnchor="middle"),"TextDx"in e||(e.TextDx=t),"LabelDy"in e||(e.TextDy=a),"TextRotation"in e||(e.TextRotation=n)}function D(e){var t=2,a=1,n=10,i=["top","bottom"];"Link"in e||(e.Link="hidden"),"Thickness"in e||(e.Thickness="static"),"StaticThickness"in e||(e.StaticThickness=t),"MinThickness"in e||(e.MinThickness=a),"MaxThickness"in e||(e.MaxThickness=n),"ArcDirection"in e||(e.ArcDirection=i[0])}function S(e){var t=["clockwise","anticlockwise"],a=["y-axis","x-axis"],n="top",i="cartesian",r=1,s=0,o=0;"Category"in e||(e.Category=i),"Direction"in e||(e.Direction=t[0]),"CentralAngle"in e||(e.CentralAngle=r),"StartAngle"in e||(e.StartAngle=s),"InnerRadius"in e||(e.InnerRadius=o),"PolarAxis"in e||(e.PolarAxis=a[0]),"PolarCenter"in e||(e.PolarCenter=n)}function T(e){var t="AxisIndependent",a="bottom-up";"Category"in e||(e.Category=t),"Mode"in e||(e.Mode=a),"X"in e||(e.X={}),"Y"in e||(e.Y={}),x(e),A(e)}function x(e){function t(e,t){var a="Undefined",n=0,i="",r=[0,0],s=["",""],o="left";"Y"===t&&(o="top");var l="middle";"Relation"in e||(e["Relation"]=a),"Alignment"in e||(e["Alignment"]=l),"Position"in e||(e["Position"]=o),"Margin"in e||(e["Margin"]=n),"Padding"in e||(e["Padding"]=r),"Margin_"in e||(e["Margin_"]=i),"Padding_"in e||(e["Padding_"]=s)}"Root"in e["X"]||(e["X"]["Root"]={}),t(e["X"]["Root"],"X"),L(e["X"]["Root"]),_(e["X"]["Root"]),"Root"in e["Y"]||(e["Y"]["Root"]={}),t(e["Y"]["Root"],"Y"),L(e["Y"]["Root"]),_(e["Y"]["Root"])}function A(e){function t(e){var t="Undefined",a="middle",n=0,i="",r="null",s="asc";"Relation"in e||(e["Relation"]=t),"Alignment"in e||(e["Alignment"]=a),"Margin"in e||(e["Margin"]=n),"Margin_"in e||(e["Margin_"]=i),"SortingCriteria"in e||(e["SortingCriteria"]=r),"SortingOrder"in e||(e["SortingOrder"]=s)}"Subtree"in e["X"]||(e["X"]["Subtree"]={}),t(e["X"]["Subtree"]),L(e["X"]["Subtree"]),"Subtree"in e["Y"]||(e["Y"]["Subtree"]={}),t(e["Y"]["Subtree"]),L(e["Y"]["Subtree"])}function _(e){"Padding"in e&&(isNaN(e.Padding[0])&&(e.Padding_=[e.Padding[0].slice(-1),""],e.Padding[0]=+e.Padding[0].slice(0,-1)),isNaN(e.Padding[1])&&(e.Padding_[1]=e.Padding[1].slice(-1),e.Padding[1]=+e.Padding[1].slice(0,-1)))}function L(e){"Margin"in e&&isNaN(e.Margin)&&(e.Margin_=e.Margin.slice(-1),e.Margin=+e.Margin.slice(0,-1))}var C=function(e){for(var t in e){var a=e[t],n=JSON.parse(JSON.stringify(a));if("Element"in n||(n.Element={}),"RootWidth"in n.Element||(n.Element.RootWidth="adaptive"),"RootHeight"in n.Element||(n.Element.RootHeight="adaptive"),"SubtreeWidth"in n.Layout||(n.Layout.SubtreeWidth="adaptive"),"SubtreeHeight"in n.Layout||(n.Layout.SubtreeHeight="adaptive"),"X"in n.Layout||(n.Layout.X={},n.Layout.Y={}),"Subtree"in n.Layout.X){var i=n.Layout.X.Subtree;"Relation"in i&&"Undefined"!==i.Relation||(i.Relation="align"),"Margin_"in i&&(isNaN(i.Margin)||(i.Margin+=i.Margin_)),i=n.Layout.Y.Subtree,"Relation"in i&&"Undefined"!==i.Relation||(i.Relation="align"),"Margin_"in i&&(isNaN(i.Margin)||(i.Margin+=i.Margin_))}else n.Layout.X.Subtree={Relation:"align"},n.Layout.Y.Subtree={Relation:"align"};if("Root"in n.Layout.X){var r=n.Layout.X.Root;"Relation"in r&&"Undefined"!==r.Relation||(r.Relation="include"),"Padding_"in r&&(isNaN(r.Padding[0])||(r.Padding[0]+=r.Padding_[0]),isNaN(r.Padding[1])||(r.Padding[1]+=r.Padding_[1])),"Margin_"in r&&(isNaN(r.Margin)||(r.Margin+=r.Margin_)),r=n.Layout.Y.Root,"Relation"in r&&"Undefined"!==r.Relation||(r.Relation="include"),"Padding_"in r&&(isNaN(r.Padding[0])||(r.Padding[0]+=r.Padding_[0]),isNaN(r.Padding[1])||(r.Padding[1]+=r.Padding_[1])),"Margin_"in r&&(isNaN(r.Margin)||(r.Margin+=r.Margin_))}else n.Layout.X.Root={Relation:"include"},n.Layout.Y.Root={Relation:"include"};"MarginType"in n.Layout.X.Subtree||(n.Layout.X.Subtree.MarginType="space-around"),"MarginType"in n.Layout.Y.Subtree||(n.Layout.Y.Subtree.MarginType="space-around"),e[t]=n}};function O(e){var t=e.index,a={},n=0;e.children.forEach((function(e){var t=O(e);Object.assign(a,t);var i=t[e.index];n=n<i?i:n}));var i=n+1;return a[t]=i,a}function R(e,t){e.height=t[e.index],e.children.forEach((function(e){R(e,t)}))}function E(e){var t=e.index,a={},n=0;e.children.forEach((function(e){var t=E(e);Object.assign(a,t);var i=t[e.index];n=i+n}));var i=0===n?1:n;return a[t]=i,a}function j(e,t){e.width=t[e.index],e.children.forEach((function(e){j(e,t)}))}function P(e,t){var a={};return a[t.index]=e,t.children.forEach((function(t){var n=P(e+1,t);Object.assign(a,n)})),a}function w(e,t,a){e.depth=t[e.index],e.rdepth=a+1-t[e.index],e.children.forEach((function(e){w(e,t,a)}))}function N(e,t,a){var n={},i=e.index,r=i in a?a[i]:a.default,s=t[r];return"AxisIndependent"===s.Layout.Category&&(n[i]={data:e,dsl:s}),e.children.forEach((function(e){Object.assign(n,N(e,t,a))})),n}function U(e,t){var a=["adaptive","height","width","depth","rdepth"],n=0;n=a.indexOf(t.Element.RootWidth);var i=0===n?1:e[t.Element.RootWidth],r=-1===n;n=a.indexOf(t.Element.RootHeight);var s=0===n?1:e[t.Element.RootHeight],o=-1===n;return{width:i,height:s,widthWithValue:r,heightWithValue:o,id:e.index,root:{x:0,y:0,width:i,height:s},subtreeLayout:[],subtrees:{x:0,y:0,width:0,height:0}}}a("6c7b");var k=a("75fc"),I=function(e,t,a,n,i,r){var s=[],o=t.children.length;if("include"===a.Root.Relation){if(s=Array(4*o+16).fill(0),s[4+e]=1,s[0+e]=-1,n.A.push(s),n.B.push(0),s=Array(4*o+16).fill(0),s[4*o+10+e]=1,"Padding"in a.Root){var l=0;isNaN(a.Root.Padding[0])?(l=+a.Root.Padding[0].slice(0,-1),"h"===a.Root.Padding[0].slice(-1)?s[5]=-l:s[4]=-l):(l=+a.Root.Padding[0],s[0+e]=-l)}else s[0+e]=0;if(n.A.push(s),n.B.push(0),s=Array(4*o+16).fill(0),s[4*o+14+e]=1,"Padding"in a.Root){var c=0;isNaN(a.Root.Padding[1])?(c=+a.Root.Padding[1].slice(0,-1),"h"===a.Root.Padding[1].slice(-1)?s[5]=-c:s[4]=-c):(c=+a.Root.Padding[1],s[0+e]=-c)}else s[0+e]=0;n.A.push(s),n.B.push(0),s=Array(4*o+16).fill(0),s[0+e]=1,s[8+e]=-1,s[4*o+10+e]=-1,s[4*o+14+e]=-1,n.A.push(s),n.B.push(0),s=Array(4*o+16).fill(0),s[2+e]=1,n.A.push(s),n.B.push(0),s=Array(4*o+16).fill(0),s[2+e]=1,s[4*o+10+e]=1,s[6+e]=-1,n.A.push(s),n.B.push(0)}else{var d="adaptive"===i?1:t[i];s=Array(4*o+16).fill(0),s[4+e]=1,n.A.push(s),n.B.push(d)}if("within"===a.Root.Relation){var u=.5;"Alignment"in a.Root&&("left"!==a.Root.Alignment&&"top"!==a.Root.Alignment||(u=0),"right"!==a.Root.Alignment&&"bottom"!==a.Root.Alignment||(u=1)),s=Array(4*o+16).fill(0),s[2+e]=1,s[4+e]=u,s[0+e]=-u,n.A.push(s),n.B.push(0),s=Array(4*o+16).fill(0),s[6+e]=1,s[8+e]=u,s[0+e]=-u,n.A.push(s),n.B.push(0),"flatten"===a.Subtree.Relation&&(s=Array(4*o+16).fill(0),s[8+e]=1,s[0+e]=-1,n.A.push(s),n.B.push(0),s=Array(4*o+16).fill(0),s[6+e]=1,n.A.push(s),n.B.push(0))}if("juxtapose"===a.Root.Relation){if(s=Array(4*o+16).fill(0),s[4*o+10+e]=1,"Margin"in a.Root){var h=0;isNaN(a.Root.Margin)?(h=+a.Root.Margin.slice(0,-1),"h"===a.Root.Margin.slice(-1)?s[5]=-h:s[4]=-h):(h=+a.Root.Margin,s[0+e]=-h)}else s[0+e]=0;n.A.push(s),n.B.push(0),s=Array(4*o+16).fill(0),s[4+e]=1,s[4*o+10+e]=1,s[8+e]=1,s[0+e]=-1,n.A.push(s),n.B.push(0),"Position"in a.Root?"left"===a.Root.Position||"top"===a.Root.Position?(s=Array(4*o+16).fill(0),s[2+e]=1,n.A.push(s),n.B.push(0),s=Array(4*o+16).fill(0),s[6+e]=1,s[8+e]=1,s[0+e]=-1,n.A.push(s),n.B.push(0)):(s=Array(4*o+16).fill(0),s[6+e]=1,n.A.push(s),n.B.push(0),s=Array(4*o+16).fill(0),s[2+e]=1,s[4+e]=1,s[0+e]=-1,n.A.push(s),n.B.push(0)):(s=Array(4*o+16).fill(0),s[2+e]=1,n.A.push(s),n.B.push(0),s=Array(4*o+16).fill(0),s[6+e]=1,s[8+e]=1,s[0+e]=-1,n.A.push(s),n.B.push(0))}if("align"===a.Subtree.Relation){var p=.5;"Alignment"in a.Subtree&&("left"!==a.Subtree.Alignment&&"top"!==a.Subtree.Alignment||(p=0),"right"!==a.Subtree.Alignment&&"bottom"!==a.Subtree.Alignment||(p=1)),t.children.forEach((function(t,a){s=Array(4*o+16).fill(0),s[10+4*a+0+e]=1,s[10+4*a+2+e]=p,s[6+e]=-1,s[8+e]=-p,n.A.push(s),n.B.push(0)}))}else{var f=!0,g=Object(k["a"])(t.children);"SortingOrder"in a.Subtree&&(f="desc"!==a.Subtree.SortingOrder),"SortingCriteria"in a.Subtree&&"null"!==a.Subtree.SortingCriteria&&g.sort((function(e,t){return(e[a.Subtree.SortingCriteria]<t[a.Subtree.SortingCriteria]^f)-.5})),t.children.forEach((function(e,t){e.preOrder=t})),g.forEach((function(t,a){"order"in t?t.order[e]=a:t.order=0===e?[a,0]:[0,a]}));var m=0,y=0;if("Margin"in a.Subtree&&(isNaN(a.Subtree.Margin)?(y=a.Subtree.Margin.slice(0,-1),"w"===a.Subtree.Margin.slice(-1)&&(s=Array(4*o+16).fill(0),s[4*o+12+e]=1,s[4]=-y,n.A.push(s),n.B.push(0),m=1),"h"===a.Subtree.Margin.slice(-1)&&(s=Array(4*o+16).fill(0),s[4*o+12+e]=1,s[5]=-y,n.A.push(s),n.B.push(0),m=1)):y=+a.Subtree.Margin),0===m){if(o>1){s=Array(4*o+16).fill(0);for(var v=0;v<o;v++)s[10+4*v+2+e]=1;s[8+e]=-1+y,n.A.push(s),n.B.push(0)}s=Array(4*o+16).fill(0),s[4*o+12+e]=1,"space-around"===a.Subtree.MarginType?s[8+e]=-y/o:s[8+e]=1===o?0:-y/(o-1),n.A.push(s),n.B.push(0)}if(t.children.forEach((function(t,i){if(0===t.order[e])"space-around"===a.Subtree.MarginType?(s=Array(4*o+16).fill(0),s[10+4*i+e]=1,s[6+e]=-1,s[4*o+12+e]=-.5,n.A.push(s),n.B.push(0)):(s=Array(4*o+16).fill(0),s[10+4*i+e]=1,s[6+e]=-1,n.A.push(s),n.B.push(0));else{s=Array(4*o+16).fill(0),s[10+4*i+0+e]=1;var r=g[t.order[e]-1].preOrder;s[10+4*r+0+e]=-1,s[10+4*r+2+e]=-1,s[4*o+12+e]=-1,n.A.push(s),n.B.push(0)}})),"space-around"===a.Subtree.MarginType){var b=g[o-1].preOrder;s=Array(4*o+16).fill(0),s[10+4*b+0+e]=1,s[10+4*b+2+e]=1,s[4*o+12+e]=.5,s[6+e]=-1,s[8+e]=-1,n.A.push(s),n.B.push(0)}else{var D=g[o-1].preOrder;s=Array(4*o+16).fill(0),s[10+4*D+0+e]=1,s[10+4*D+2+e]=1,s[6+e]=-1,s[8+e]=-1,n.A.push(s),n.B.push(0)}}},M=function(e,t,a){var n=["adaptive","height","width","depth","rdepth"],i=!0,r={A:[],B:[]},s=e.children.length,o=0,l=t.Layout.X;I(o,e,l,r,t.Element.RootWidth,"x"),o=1,l=t.Layout.Y,I(o,e,l,r,t.Element.RootHeight,"y");var c=1,d=1,u=[];if(r.isCompatible={},r.widthWithValue=!1,r.heightWithValue=!1,"top-down"===t.Layout.Mode){var h=1;e.children.forEach((function(e,a){u=Array(4*s+16).fill(0),u[10+4*a+2]=1,r.A.push(u),i=n.indexOf(t.Layout.SubtreeWidth),i<0&&(r.widthWithValue=!0),h="adaptive"===t.Layout.SubtreeWidth?1:e[t.Layout.SubtreeWidth],c=c>h?c:h,r.B.push(h),u=Array(4*s+16).fill(0),u[10+4*a+3]=1,r.A.push(u),h=1,i=n.indexOf(t.Layout.SubtreeHeight),i<0&&(r.heightWithValue=!0),h="adaptive"===t.Layout.SubtreeHeight?1:e[t.Layout.SubtreeHeight],d=d>h?d:h,r.B.push(h)}))}else{var p=!1,f=!1,g=!1,m=!1,y={},v={};if(e.children.forEach((function(e,t){e.index in a?(a[e.index].widthWithValue?(p=!0,y[t]=!0):(g=!0,y[t]=!1),a[e.index].heightWithValue?(f=!0,v[t]=!0):(m=!0,v[t]=!1)):(g=!0,m=!0,y[t]=!1,v[t]=!1)})),p)if(g){var b=0,D=0;e.children.forEach((function(e,t){if(!y[t]){u=Array(4*s+16).fill(0),u[10+4*t+2]=1,r.A.push(u);var n=e.index in a?a[e.index].width:1;b+=n,D+=1,c=c>n?c:n,r.B.push(n)}}));var S=b/D;c=c>S?c:S,e.children.forEach((function(e,t){y[t]&&(r.isCompatible[e.index]=!0,u=Array(4*s+16).fill(0),u[10+4*t+2]=1,r.A.push(u),r.B.push(S))}))}else r.widthWithValue=!0,e.children.forEach((function(e,t){u=Array(4*s+16).fill(0),u[10+4*t+2]=1,r.A.push(u);var n=e.index in a?a[e.index].width:1;c=c>n?c:n,r.B.push(n)}));else e.children.forEach((function(e,t){u=Array(4*s+16).fill(0),u[10+4*t+2]=1,r.A.push(u);var n=e.index in a?a[e.index].width:1;c=c>n?c:n,r.B.push(n)}));if(f)if(m){var T=0,x=0;e.children.forEach((function(e,t){if(!v[t]){u=Array(4*s+16).fill(0),u[10+4*t+3]=1,r.A.push(u);var n=e.index in a?a[e.index].height:1;T+=n,x+=1,d=d>n?d:n,r.B.push(n)}}));var A=T/x;d=d>A?d:A,e.children.forEach((function(e,t){v[t]&&(r.isCompatible[e.index]=!0,u=Array(4*s+16).fill(0),u[10+4*t+3]=1,r.A.push(u),r.B.push(A))}))}else r.heightWithValue=!0,e.children.forEach((function(e,t){u=Array(4*s+16).fill(0),u[10+4*t+3]=1,r.A.push(u);var n=e.index in a?a[e.index].height:1;d=d>n?d:n,r.B.push(n)}));else e.children.forEach((function(e,t){u=Array(4*s+16).fill(0),u[10+4*t+3]=1,r.A.push(u);var n=e.index in a?a[e.index].height:1;d=d>n?d:n,r.B.push(n)}))}if("within"===t.Layout.X.Root.Relation&&"align"===t.Layout.X.Subtree.Relation){var _="adaptive"===t.Element.RootWidth?1:e[t.Element.RootWidth];_=_>c?_:c,u=Array(4*s+16).fill(0),u[0]=1,r.A.push(u),r.B.push(_)}if("within"===t.Layout.Y.Root.Relation&&"align"===t.Layout.Y.Subtree.Relation){var L="adaptive"===t.Element.RootHeight?1:e[t.Element.RootHeight];L=L>d?L:d,u=Array(4*s+16).fill(0),u[1]=1,r.A.push(u),r.B.push(L)}return"align"===t.Layout.X.Subtree.Relation&&(u=Array(4*s+16).fill(0),u[8]=1,r.A.push(u),r.B.push(c)),"align"===t.Layout.Y.Subtree.Relation&&(u=Array(4*s+16).fill(0),u[9]=1,r.A.push(u),r.B.push(d)),r};function W(e,t,a){var n=e.length,i=e[0].length,r=new a.Matrix;r.init(n,i);var s=r.data();e.forEach((function(e,t){e.forEach((function(e,a){s[t+a*n]=e}))}));var o=new a.Matrix;o.init(n,1);var l=o.data();t.forEach((function(e,t){l[t]=e}));var c=new a.Matrix,d=new a.Matrix;a.Matrix.SolveLinearSystem(d,c,r,o);for(var u=d.data(),h=[],p=0;p<u.length;p++)h.push(u[p]);return r.destroy(),o.destroy(),d.destroy(),c.destroy(),h}var V=function(e,t,a,n,i){for(var r=e.length,s=(r-16)/4,o=[],l=0;l<s;l++){var c=t.children[l].index;o.push({x:e[10+4*l+0],y:e[10+4*l+1],width:e[10+4*l+2],height:e[10+4*l+3],id:c,isCompatible:c in i})}var d=t.index,u={width:e[0],height:e[1],widthWithValue:a,heightWithValue:n,root:{x:e[2],y:e[3],width:e[4],height:e[5]},id:d,subtreeLayout:o,subtrees:{x:e[6],y:e[7],width:e[8],height:e[9]}};return u},H=function(e,t,a){var n=e.data,i=e.dsl,r=M(n,i,t),s=W(r.A,r.B,a),o=V(s,n,r.widthWithValue,r.heightWithValue,r.isCompatible);return o};function Y(e,t,a,n){var i=t[e];0===i.data.children.length?a[e]=U(i.data,i.dsl):"bottom-up"===i.dsl.Layout.Mode?(i.data.children.forEach((function(e){Y(e.index,t,a,n)})),a[e]=H(i,a,n)):(a[e]=H(i,a,n),i.data.children.forEach((function(e){Y(e.index,t,a,n)})))}var X=function(e,t,a,n){console.log("treeData",e,"treeDsls",t,"treeDic",a),m(e),C(t),R(e,O(e)),j(e,E(e)),w(e,P(1,e),e.height);var i=N(e,t,a),r={};return 0!==i.length&&Y(e.index,i,r,n),r};function F(e){return z.apply(this,arguments)}function z(){return z=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if((new Date).getTime(),a=t.hierarchicalData,n=t.treeDSLContentObj,i=t.treeIndexWithDSL,"undefined"===typeof a||"undefined"===typeof n||"undefined"===typeof i){e.next=7;break}return r=X(a,n,i,lscgSolver),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}a("6b54"),a("87b3");function B(e,t){this.x=e.x,this.y=e.y,this.radius=t}function G(e,t,a){this.cx=e.x,this.cy=e.y,this.radiusX=Math.round(t),this.radiusY=Math.round(a)}function J(e,t,a,n,i,r){this.width=a,this.height=n,this.x=e,this.y=t,this.id=i,this.path=r}function K(e,t,a,n,i){this.tx=e,this.ty=t,this.tw=a,this.th=n,this.direction=i}B.prototype={init:function(){},updateData:function(){},generatePath:function(){var e=d3.arc().innerRadius(0).outerRadius(this.radius).startAngle(-Math.PI).endAngle(Math.PI);return e()}},G.prototype={init:function(){},updateData:function(){},generatePath:function(){var e=this.cx,t=this.cy,a=this.radiusX,n=this.radiusY;return"M"+(e-a)+","+t+"a"+a+","+n+" 0 1,0 "+2*a+",0a"+a+","+n+" 0 1,0 "+-2*a+",0"}},J.prototype={init:function(){},updateData:function(){}},K.prototype={getNodePosArray:function(){var e=this.tx,t=this.ty,a=this.tw,n=this.th,i=this.direction,r=[{x:e+a/2,y:t},{x:e,y:t+n},{x:e+a,y:t+n},{x:e+a/2,y:t}];return"bottom"===i?r=[{x:e,y:t},{x:e+a/2,y:t+n},{x:e+a,y:t},{x:e,y:t}]:"left"===i?r=[{x:e+a,y:t},{x:e,y:t+n/2},{x:e+a,y:t+n},{x:e+a,y:t}]:"right"===i&&(r=[{x:e,y:t},{x:e+a,y:t+n/2},{x:e,y:t+n},{x:e,y:t}]),r}};var Q=a("e649");function q(e,t,a){-1!==e.indexOf("NaN")&&console.log("error! The path has errors in translatePath function.");for(var n=Q(e),i="",r=0;r<n.length;r++)if(i+=n[r].code,"M"==n[r].code)i+=n[r].x+t+","+(n[r].y+a);else if("L"==n[r].code)i+=n[r].x+t+","+(n[r].y+a);else if("A"==n[r].code){var s=n[r].largeArc?1:0,o=n[r].sweep?1:0;i+=n[r].rx+","+n[r].ry+","+n[r].xAxisRotation+","+s+","+o+","+(n[r].x+t)+","+(n[r].y+a)}return i}function Z(e,t,a,n,i){var r=t.Node,s=t.SizeOption,o={x:a.x+a.Rootx+a.RootWidth/2,y:a.y+a.Rooty+a.RootHeight/2},l={x:n.x+n.TreeWidth/2,y:n.y+n.TreeHeight/2},c=0,d=a.RootWidth>a.RootHeight?a.RootHeight/2:a.RootWidth/2;if("static"===s&&(d=t.StaticSize),"cartesian"===e.Category){if("rectangle"===r){var u=[{x:a.x+a.Rootx,y:a.y+a.Rooty},{x:a.x+a.Rootx,y:a.y+a.Rooty+a.RootHeight},{x:a.x+a.Rootx+a.RootWidth,y:a.y+a.Rooty+a.RootHeight},{x:a.x+a.Rootx+a.RootWidth,y:a.y+a.Rooty},{x:a.x+a.Rootx,y:a.y+a.Rooty}],f=new h,g=f.generatePath(u);return-1!==g.indexOf("NaN")&&console.log("elementPath",g),g}if("triangle"===r){var m=a.x+a.Rootx,y=a.y+a.Rooty,v=a.RootWidth,b=a.RootHeight,D="top";"undefined"!==typeof t.Direction&&(D=t.Direction);var S=new K(m,y,v,b,D),T=S.getNodePosArray(),x=new h,A=x.generatePath(T);return A}if("circle"===r){var _=new B(o,d);return q(_.generatePath(),o["x"],o["y"])}if("ellipse"===r){var L=a.RootWidth/2,C=a.RootHeight/2,O=new G(o,L,C),R=O.generatePath();return R}if("hidden"===r){var E=new B(o,c),j=q(E.generatePath(),o["x"],o["y"]);return j}}else if("polar"===e.Category){var P="y-axis";"undefined"!==typeof e.PolarAxis&&(P=e.PolarAxis);var w="top";"x-axis"===P&&(w="left"),"undefined"!==typeof e.PolarCenter&&(w=e.PolarCenter);var N=0;"undefined"!==typeof e.InnerRadius&&(N=e.InnerRadius);var U=0;"undefined"!==typeof e.StartAngle&&(U=e.StartAngle);var k=1;"undefined"!==typeof e.CentralAngle&&(k=e.CentralAngle);var I="clockwise";"undefined"!==typeof e.Direction&&(I=e.Direction);var M=new p(P,N,U,k,w,I);if("rectangle"===r){var W=[{x:a.x+a.Rootx,y:a.y+a.Rooty},{x:a.x+a.Rootx,y:a.y+a.Rooty+a.RootHeight},{x:a.x+a.Rootx+a.RootWidth,y:a.y+a.Rooty+a.RootHeight},{x:a.x+a.Rootx+a.RootWidth,y:a.y+a.Rooty},{x:a.x+a.Rootx,y:a.y+a.Rooty}];M.updateData(n);var V=q(M.generatePath(W,n),l["x"],l["y"]);return V}if("circle"===r){"index-0"===a.id?M.updateData(i):M.updateData(n);var $=M.calPosition(o);$["x"]=$["x"]+l["x"],$["y"]=$["y"]+l["y"];var H=new B(o,d),Y=q(H.generatePath(),$["x"],$["y"]);return Y}if("triangle"===r){"index-0"===a.id?M.updateData(i):M.updateData(n);var X=M.calPosition(o);X["x"]=X["x"]+l["x"],X["y"]=X["y"]+l["y"];var F=X["x"]-a.RootWidth/2,z=X["y"]-a.RootHeight/2,J=a.RootWidth,Q=a.RootHeight,Z="top";"undefined"!==typeof t.Direction&&(Z=t.Direction);var ee=new K(F,z,J,Q,Z),te=ee.getNodePosArray(),ae=new h,ne=ae.generatePath(te);return ne}if("ellipse"===r){"index-0"===a.id?M.updateData(i):M.updateData(n);var ie=M.calPosition(o);ie["x"]=ie["x"]+l["x"],ie["y"]=ie["y"]+l["y"];var re=a.RootWidth/2,se=a.RootHeight/2,oe=new G(ie,re,se),le=oe.generatePath();return le}if("hidden"===r){M.updateData(i);var ce=M.calPosition(o),de=new B(o,c);ce["x"]=ce["x"]+l["x"],ce["y"]=ce["y"]+l["y"];var ue=q(de.generatePath(),ce["x"],ce["y"]);return ue}}}function ee(e,t,a,n,i,r){var s=t.Node,o={x:n.x+n.TreeWidth/2,y:n.y+n.TreeHeight/2};if("cartesian"===e.Category)return r;if("polar"===e.Category){var l="y-axis";"undefined"!==typeof e.PolarAxis&&(l=e.PolarAxis);var c="top";"x-axis"===l&&(c="left"),"undefined"!==typeof e.PolarCenter&&(c=e.PolarCenter);var d=0;"undefined"!==typeof e.InnerRadius&&(d=e.InnerRadius);var u=0;"undefined"!==typeof e.StartAngle&&(u=e.StartAngle);var h=1;"undefined"!==typeof e.CentralAngle&&(h=e.CentralAngle);var f="clockwise";"undefined"!==typeof e.Direction&&(f=e.Direction);var g=new p(l,d,u,h,c,f);g.updateData(n);var m=g.calPosition(r),y=Math.pow(Math.pow(m.x,2)+Math.pow(m.y,2),.5);if("rectangle"===s){g.updateData(n);var v=g.calPosition(r);return v["x"]=v["x"]+o["x"],v["y"]=v["y"]+o["y"],v["r"]=y,v}if("circle"===s||"triangle"===s||"ellipse"===s||"hidden"===s){"index-0"===a.id?g.updateData(i):g.updateData(n);var b=g.calPosition(r);return b["x"]=b["x"]+o["x"],b["y"]=b["y"]+o["y"],b["r"]=y,b}}}function te(e,t,a){var n=null,i=d3.line(),r={x:t.x+t.TreeWidth/2,y:t.y+t.TreeHeight/2};if("cartesian"===e.Category){var s=a.start,o=a.end,l=[];return l.push([s.x,s.y]),l.push([o.x,o.y]),n=i(l),n}if("polar"===e.Category){var c="y-axis";"undefined"!==typeof e.PolarAxis&&(c=e.PolarAxis);var d="top";"x-axis"===c&&(d="left"),"undefined"!==typeof e.PolarCenter&&(d=e.PolarCenter);var u=0;"undefined"!==typeof e.InnerRadius&&(u=e.InnerRadius);var h=0;"undefined"!==typeof e.StartAngle&&(h=e.StartAngle);var f=1;"undefined"!==typeof e.CentralAngle&&(f=e.CentralAngle);var g="clockwise";"undefined"!==typeof e.Direction&&(g=e.Direction);var m=new p(c,u,h,f,d,g);m.updateData(t);m.x,m.y;var y=a.start,v=a.end,b=y.x,D=y.y,S=v.x,T=v.y;y=m.calPosition(y);var x=y.x,A=y.y;v=m.calPosition(v);var _=v.x,L=v.y;if("y-axis"===c){if(b===S){var C=[];return x>_?(C.push([_,L]),C.push([x,A])):(C.push([x,A]),C.push([_,L])),n=q(i(C),r["x"],r["y"]),n}}else if("x-axis"===c&&D===T){var O=[];return x>_?(O.push([_,L]),O.push([x,A])):(O.push([x,A]),O.push([_,L])),n=q(i(O),r["x"],r["y"]),n}var R=0,E=0,j=Math.pow(Math.pow(x-R,2)+Math.pow(A-E,2),.5),P=(Math.pow(Math.pow(_-R,2)+Math.pow(L-E,2),.5),d3.arc().innerRadius(j).outerRadius(j),Math.round(E-A)/j);P=P>1?1:P,P=P<-1?-1:P;var w=Math.asin(P);x<=R||(w=Math.PI-w),isNaN(w)&&console.log("initAngleSin",P);var N=Math.round(E-L)/j;N=N>1?1:N,N=N<-1?-1:N;var U=Math.asin(N);if(_<=R||(U=Math.PI-U),j>.001){var k=!0;"clockwise"===e.Direction&&(k=!1);var I=d3.path();return I.arc(R,E,j,w,U,k),-1!==I.toString().indexOf("NaN")&&console.log("polarOriginX",R,"polarOriginY",E,"radius",j,"initAngle",w,"endAngle",U),n=q(I.toString(),r["x"],r["y"]),n}}}function ae(e,t,a,n,i){var r=[];for(var s in e)r.push(s);r=r.sort((function(e,t){var a=e.replace("index-",""),n=t.replace("index-","");return a-n}));var o=r[0],l=[],c=[];for(var d in e)if(l.push(e[d]),null!=e[d].fatherID){var u={beginid:e[d].fatherID,endid:e[d].id};c.push(u)}var h={};if("undefined"!==typeof i)for(var p=0;p<i.length;p++){var f=i[p],g=f.data.index;h[g]=f.data}for(var m=_(l),y=L(l),v=O(m),b=0;b<l.length;b++){var D=l[b],S=m[b],T=y[b];R(D,S,v,T)}for(var x=0;x<c.length;x++){var A=c[x];A.pathAttr=E(A)}return C(l),[l,c];function _(e){for(var t=[],a=0;a<e.length;a++){var n=e[a],i=n.x+n.Rootx+n.RootWidth/2,r=n.y+n.Rooty+n.RootHeight/2;t.push({x:i,y:r})}return t}function L(e){for(var n=[],i=0;i<e.length;i++){var r=e[i],s=r.id,o=t[a[s]],l=0,c=0;"TextDx"in o.Element&&(l=o.Element.TextDx),"TextDy"in o.Element&&(c=o.Element.TextDy);var d={};"cartesian"===o.CoordinateSystem.Category?d=r.RootWidth>=r.RootHeight?f(r,c):p(r,l):"polar"===o.CoordinateSystem.Category&&("x-axis"===o.CoordinateSystem.PolarAxis?d=r.RootWidth>=1.5*r.RootHeight?f(r,c):p(r,l):"y-axis"===o.CoordinateSystem.PolarAxis&&(d=r.RootHeight>=1.5*r.RootWidth?p(r,l):f(r,c)));var u={x:d.areaLabelPathStartPosX,y:d.areaLabelPathStartPosY},h={x:d.areaLabelPathEndPosX,y:d.areaLabelPathEndPosY};n.push({start:u,end:h})}return n;function p(e,t){var a={};return a.areaLabelPathStartPosX=e.x+e.Rootx+e.RootWidth/2+t*e.RootWidth,a.areaLabelPathEndPosX=e.x+e.Rootx+e.RootWidth/2+t*e.RootWidth,a.areaLabelPathStartPosY=e.y+e.Rooty,a.areaLabelPathEndPosY=e.y+e.Rooty+e.RootHeight,a}function f(e,t){var a={};return a.areaLabelPathStartPosX=e.x+e.Rootx,a.areaLabelPathEndPosX=e.x+e.Rootx+e.RootWidth,a.areaLabelPathStartPosY=e.y+e.Rooty+e.RootHeight/2+t*e.RootHeight,a.areaLabelPathEndPosY=e.y+e.Rooty+e.RootHeight/2+t*e.RootHeight,a}}function C(e){for(var i=12,r=12,s=2,o=0,l=n.width>n.height?n.height/2:n.width/2,c=0;c<e.length;c++){var d=e[c],u=d.id,p=t[a[u]],f=p.Element.Label,g=0;"TextDx"in p.Element&&(g=p.Element.TextDx);var m=0;"TextDy"in p.Element&&(m=p.Element.TextDy),d.labelPos={};d.RootHeight<d.RootWidth?d.RootWidth:d.RootHeight;var y=0;d.RootHeight>d.RootWidth?"polar"===p.CoordinateSystem.Category&&"x-axis"===p.CoordinateSystem.PolarAxis?(y=d.RootWidth/1.2,r=i/1.2):(y=d.RootWidth,r=i):"polar"===p.CoordinateSystem.Category&&"y-axis"===p.CoordinateSystem.PolarAxis?(y=d.RootHeight/1.2,r=i/1.2):(y=d.RootHeight,r=i),d.RootWidth>=d.RootHeight?d.labelPathPos=50+50*g:d.labelPathPos=50+50*m,"pos"in d&&(d.labelPos.x=d.pos.x+y*g,d.labelPos.y=d.pos.y+y*m);var v="";"undefined"!==typeof f&&"hidden"!==f&&null!=f&&"null"!==f&&"undefined"!==typeof h[u]&&f in h[u]&&(v=h[u][f]),d.labelValue=v;var b=y/2>r?r:y/2;if(b=b>s?b:o,"polar"===p.CoordinateSystem.Category&&"pos"in d){var D=d.pos.r,S=D/l;S<.2&&(b=o)}d.fontSize=Math.round(b)+"px",d.rotation=0,"TextRotation"in p.Element&&(d.rotation=180*p.Element.TextRotation),d.textAnchor="middle","TextAnchor"in p.Element&&(d.textAnchor=p.Element.TextAnchor),d.tooltip=[],"Tooltip"in p.Element&&(d.tooltip=p.Element.Tooltip),"x"in d.labelPos||(d.labelPos.x=0),"y"in d.labelPos||(d.labelPos.y=0),"rotation"in d||(d.rotation=0)}}function O(e){for(var t={xmin:1e6,ymin:1e6,xmax:0,ymax:0},a=0;a<e.length;a++){var n=e[a],i=n.x,r=n.y;t.xmin>i&&(t.xmin=i),t.xmax<i&&(t.xmax=i),t.ymin>r&&(t.ymin=r),t.ymax<r&&(t.ymax=r)}var s={x:t.xmin,y:t.ymin,TreeWidth:t.xmax-t.xmin,TreeHeight:t.ymax-t.ymin};return s}function R(i,r,s,l){var c=t[a[i.id]].CoordinateSystem.Category,d=n.width/e[o].Width,u=n.height/e[o].Height,p=0,f=0;null!=i.fatherID&&(p=e[o].x,f=e[o].y),"undefined"!==typeof h[i.id]&&(i.data=h[i.id]);var g="";"undefined"!==typeof h[i.id]&&(g=h[i.id].name),i.name=g;var m=0;"undefined"!==typeof h[i.id]&&(m=h[i.id].value),i.value=m;var y=t[a[i.id]].Element,v={id:i.id,x:(e[i.id].x+p)*d,y:(e[i.id].y+f)*u,Rootx:e[i.id].Rootx*d,Rooty:e[i.id].Rooty*u,RootWidth:e[i.id].RootWidth*d,RootHeight:e[i.id].RootHeight*u,isLeaf:e[i.id].isLeaf,Width:e[i.id].Width*d,Height:e[i.id].Height*u,depth:e[i.id].depth};(isNaN(v.x)||isNaN(v.RootWidth))&&console.log("areaData[areaDataObj.id].Rootx",e[i.id].Rootx);var b={};b["TreeWidth"]=n.width,b["TreeHeight"]=self.treeHeight;var D=c,S=i.id,T=t[a[S]].CoordinateSystem;while(1){if("polar"===D&&(b["TreeWidth"]=e[S].Width,b["TreeHeight"]=e[S].Height,b["x"]=e[S].x,b["y"]=e[S].y,T=t[a[S]].CoordinateSystem),S=e[S].fatherID,null===S)break;D=t[a[S]].CoordinateSystem.Category}s["x"]=b["x"],s["TreeWidth"]=b["TreeWidth"];var x=Z(T,y,v,b,s);"undefined"!==typeof x&&(i.element=x);var A=ee(T,y,v,b,s,r);"undefined"!==typeof A&&(i.pos=A);var _=te(T,b,l);"undefined"!==typeof _&&null!=_&&(i.labelPath=_)}function E(n){var i=n.beginid,r=n.endid,s=a[i],o=t[s].Element,l=o.Link;if("hidden"===l||"undefined"===typeof l){var c=a[r],d=t[c].Element;l=d.Link}if("hidden"!==l){var u,h=e[i].pos.x,p=e[i].pos.y,f=e[r].pos.x,g=e[r].pos.y;switch(l){case"straight":var m=[];m.push([h,p]),m.push([f,g]);var y=d3.line();u=y(m);break;case"curveStepX":var v=[];v.push([h,p]),v.push([f,g]);var b=d3.line().curve(d3.curveStep);u=b(v);break;case"orthogonal":var D=[];D.push([h,p]),D.push([h,(p+g)/2]),D.push([f,(p+g)/2]),D.push([f,g]);var S=d3.line();u=S(D);break;case"curveStepAfter":var T=[];T.push([h,p]),T.push([f,g]);var x=d3.line().curve(d3.curveStepAfter);u=x(T);break;case"curveStepBefore":var A=[];A.push([h,p]),A.push([f,g]);var _=d3.line().curve(d3.curveStepBefore);u=_(A);break;case"curve":var L={source:[h,p],target:[f,g]},C=d3.linkVertical();u=C(L);break;case"linkHorizontal":var O={source:[h,p],target:[f,g]},R=d3.linkHorizontal();u=R(O);break;case"arccurve":var E=Math.pow(Math.pow(h-f,2)+Math.pow(p-g,2),.5),j=E/2,P=(h+f)/2,w=(p+g)/2,N=(d3.arc().innerRadius(j).outerRadius(j),Math.round(w-p)/j);N=N>1?1:N,N=N<-1?-1:N;var U=Math.asin(N);if(h<=P||(U=Math.PI-U),j>.001){var k=0+U,I=Math.PI+U,M=!0;if("undefined"!==typeof o.ArcDirection){var W=o.ArcDirection;"bottom"===W&&(M=!1)}var V=d3.path();V.arc(P,w,j,k,I,M),u=V.toString()}break}return"curveStepAfter"!==l&&"curveStepBefore"!==l&&"orthogonal"!==l||console.log("LineData",u),u}}}var ne=a("53be"),ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"data-view-container"},[a("div",{attrs:{id:"original-data-view-title"}},[a("span",{staticClass:"value"},[e._v(e._s(e.selectedDataset))])]),a("div",{attrs:{id:"original-data-view-content"}},[a("div",{attrs:{id:"inner-data-view-content"}},[a("vue-json-pretty",{attrs:{selectableType:"single",data:e.originalTreeData,deep:e.treeDepth,showDoubleQuotes:!1,highlightMouseoverNode:!0,highlightSelectedNode:!0,selectOnClickNode:!0},model:{value:e.selectedArray,callback:function(t){e.selectedArray=t},expression:"selectedArray"}})],1)]),a("div",{attrs:{id:"data-view-toggle"}},[a("el-tooltip",{staticClass:"labelIcon",attrs:{content:e.selectedDataset,effect:"light"}},[a("el-button",{attrs:{plain:""},on:{click:e.toggleDataView}},[a("i",{staticClass:"icon iconfont",class:e.previewPanelOpen?"icon-zuo":"icon-data"})])],1)],1)])},re=[],se=a("d538"),oe=a.n(se),le={name:"OriginalDataView",components:{VueJsonPretty:oe.a},props:{},data:function(){return{previewPanelOpen:!1,originalTreeData:{},treeDepth:3,selectedArray:[],OPEN_PREVIEW_PANEL_DURATION:1e3}},created:function(){},mounted:function(){this.initTreeData(),this.initToggleButtonPos()},updated:function(){},watch:{selectedDataset:function(){this.originalTreeData=sysDatasetObj.getTreeDataset()}},computed:Object(o["a"])({},Object(u["d"])(["selectedDataset"])),methods:Object(o["a"])({},Object(u["b"])([]),{initTreeData:function(){this.originalTreeData=sysDatasetObj.getTreeDataset()},initToggleButtonPos:function(){var e=$("#data-view-toggle").width();$("#data-view-toggle").height();$("#data-view-toggle").css({right:-e+"px"})},toggleDataView:function(){this.previewPanelOpen?(this.closeDataPanel(),this.$emit("closeDataView")):(this.openDataPanel(),this.$emit("openDataView"))},openDataPanel:function(){if(!this.previewPanelOpen){var e=this.OPEN_PREVIEW_PANEL_DURATION,t=$("#original-data-view").width();$("#original-data-view").animate({left:"+="+t},e,(function(){})),this.previewPanelOpen=!0}},closeDataPanel:function(){if(this.previewPanelOpen){var e=this.OPEN_PREVIEW_PANEL_DURATION,t=$("#original-data-view").width();$("#original-data-view").animate({left:"-="+t},e,(function(){})),this.previewPanelOpen=!1}}})},ce=le,de=(a("a70f"),a("8a8c"),a("2877")),ue=Object(de["a"])(ce,ie,re,!1,null,"278f3c9f",null),he=ue.exports,pe=(a("6d67"),a("7618"));function fe(e,t,a,n){for(var i=["#2171b5","#deebf7"],r=["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],s=d3.scaleLinear().range(i),o=d3.scaleOrdinal().range(r),l=0;l<e.length;l++){var c=e[l],d=c.id,u=t[a[d]];e[l].node_color=p(c,u,n),e[l].stroke_width=h(c)}return e;function h(e){var t=1.5,a=e.RootWidth,n=e.RootHeight,i=a>n?n:a,r=i/15;return r=r>t?t:r,r+"px"}function p(e,t,a){var n=t.Element.Color;"undefined"===typeof n&&(n="depth");var i=t.Element.ColorSchema,r=t.Element.ColorRange,l=t.Element.StaticColor;"undefined"===typeof l&&(l="#6baed6");var c=v(a),d=e.id,u=c[d].data,h=a[0].data;if("static"===n)return l;var p=Object(pe["a"])(h[n]);if("number"===p){var f=d3.extent(a,(function(e,t){return+e.data[n]}));s.domain(f),"undefined"!==typeof r&&s.range(r);var g=u[n];return s(g)}if("string"===p){"option 1"===i||"option 2"===i&&o.range(d3.schemeSet3);var m=a.map((function(e){return e.data[n]}));o.domain(m);var y=u[n];return o(y)}function v(e){for(var t={},a=0;a<e.length;a++){var n=e[a],i=n.data.index;t[i]=n}return t}}}function ge(e,t,a,n,i,r,s){for(var o=d3.extent(i,(function(e){return e.data.value})),l=Object(d["a"])(o,2),c=(l[0],l[1],d3.scaleLinear()),u=0;u<e.length;u++){var h=e[u],p=h.beginid,f=h.endid,g=t[p],m=t[f],y=a[n[p]],v=a[n[f]];h.link_width=b(g,m,y,v,r,s,i)}return e;function b(e,t,a,n,i,r,s){var o=a.Element.Link,l=n.Element.Link,d=a,u=e;"hidden"===o&&"hidden"!==l&&(d=n,u=t);var h=d.Element.Thickness,p=D(s),f=u.id,g=p[f].data;if("static"===h){if("undefined"===typeof d.Element.StaticThickness){var m=1;return m/2}return d.Element.StaticThickness/2}var y=d.Element.MaxThickness,v=d.Element.MinThickness,b=[y,v],S=d3.extent(s,(function(e,t){return+e.data[h]}));c.domain(S).range(b);var T=g[h];return c(T)/2}function D(e){for(var t={},a=0;a<e.length;a++){var n=e[a],i=n.data.index;t[i]=n}return t}}function me(e){var t=JSON.parse(JSON.stringify(e));for(var a in t)"Element"in t[a]||(t[a].Element={}),"Node"in t[a].Element||(t[a].Element.Node="rectangle"),"Link"in t[a].Element||(t[a].Element.Link="hidden"),"CoordinateSystem"in t[a]||(t[a].CoordinateSystem={},t[a].CoordinateSystem.Category="cartesian");return t}var ye={name:"TreeCanvas",props:{treeCanvasKey:{type:Number}},data:function(){return{nodeArray:[],hierarchicalData:{},layoutParas:{},treeCanvasSvgId:"tree-dsl-svg-canvas",treeCanvasSvgIdCopy:"tree-dsl-svg-canvas-copy",treeCanvasContainerId:"tree-dsl-canvas-container",treeCanvasId:"tree-dsl-canvas",treeCanvasRectId:"canvas-region-outer-rect",DURATION:1e3,selectedItem:null,posLenCollectionObj:{},regionOuterRectPos:{},singleTreeG:"tree-g",POSITION_DURATION:900,colorAttr:"depth",treeViewPosLenObj:{},currentRootID:"index-0",treeGId:"index-0-g",previewPanelOpen:!1,hybridNodeObjectNum:10,OPEN_PREVIEW_PANEL_DURATION:500,horizontalArray:[0,.5,1],verticalArray:[0,.5,1],treeViewWidth:0,treeViewHeight:0,viewWidth:0,viewHeight:0,layouts:{},areaDataArray:[],linkDataArray:[]}},components:{OriginalDataView:he},created:function(){},mounted:function(){var e=this;e.adjustTreeCanvas(),e.addZoomFunc()},watch:{treeCanvasKey:function(){this.adjustTreeCanvas(),this.updateTreeVisResults()},assignRecursiveMode:function(){this.highlightFocusedTreeObjIdArray(this.previewTreeObj)},assignNodeQuery:function(){this.highlightFocusedTreeObjIdArray(this.previewTreeObj)},changedDSLNameState:function(){var e=sysDatasetObj.getLayoutParas(),t=e.treeDSLContentObj;"undefined"!==typeof t&&null!=this.treeUnitDSLName&&"undefined"!==typeof t[this.treeUnitDSLName]&&this.updateTreeVisResults()},treeCanvasLayoutState:function(){this.updateTreeVisResults()},currentTreeDSLArray:function(){0===this.currentTreeDSLArray.length&&(d3.select(this.$el).selectAll(".link").remove(),d3.select(this.$el).selectAll(".lineartree-node").remove(),d3.select(this.$el).selectAll(".node-label").remove())}},computed:Object(o["a"])({},Object(u["d"])(["treeDSLArray","assignRecursiveMode","assignNodeQuery","focusedTreeObjArray","changedDSLNameState","treeUnitDSLName","treeCanvasLayoutState","previewTreeObj","currentTreeDSLArray"])),methods:Object(o["a"])({updateTreeVisResults:function(){var e=this,t=sysDatasetObj.getLayoutParas(),a=sysDatasetObj.getNodeArray(),n=s(a,t.treeIndexWithDSL);if(n)F(t).then((function(t){e.layouts=t,e.renderTreeVisResults(t)}));else{var i=sysDatasetObj.getLayoutParas();i.treeIndexWithDSL={};var r=sysDatasetObj.getCurrentTreeDSLArray(this.focusedTreeObjArray);e.UPDATE_CURRENT_TREE_DSL_ARRAY(r),d3.select("#"+this.treeGId).selectAll("*").remove()}function s(e,t){for(var a=[],n=0;n<e.length;n++)a.push(e[n].data.index);var i=[];for(var r in t)i.push(r);return a.length===i.length&&0!==a.length&&0!==i.length}},renderTreeVisResults:function(e){var t=sysDatasetObj.getNodeArray();this.nodeArray=t,this.layoutParas=sysDatasetObj.getLayoutParas(),this.hierarchicalData=this.layoutParas.hierarchicalData;var a=this.layoutParas.treeDSLContentObj;this.dslContentObject=a;var n=this.layoutParas.treeIndexWithDSL;this.treeIndexWithDSL=n;var i=this.treeViewPosLenObj;this.currentRootID;"undefined"!==typeof n&&"undefined"!==typeof a&&null!=e&&"undefined"!==typeof e&&(this.AreaData=f(n,a,e,t,i),this.appendTreeVisBoundingBox(),this.renderTree(),this.adjustTreePos())},negativeExisted:function(e){for(var t in e){var a=e[t].RootHeight,n=e[t].RootWidth;if(n<0||a<0)return!0}return!1},addZoomFunc:function(){var e=this,t=+$("#"+e.treeCanvasSvgId).width(),a=+$("#"+e.treeCanvasSvgId).height(),n=d3.zoom().scaleExtent([.1,40]).translateExtent([[-100,-100],[t+90,a+100]]).on("zoom",i);function i(){d3.select("#"+e.treeCanvasRectId);d3.select("#"+e.treeCanvasId).attr("transform",d3.event.transform)}d3.select("#"+e.treeCanvasSvgId).call(n)},adjustTreePos:function(){var e=this.treeGId,t=this.treeViewPosLenObj;d3.select("#"+e).transition().duration(this.POSITION_DURATION).attr("transform","translate("+t.x+","+t.y+")")},adjustTreeCanvas:function(){var e=this,t=.668;this.viewWidth=$("#"+this.treeCanvasSvgId).width(),this.viewHeight=$("#"+this.treeCanvasSvgId).height();var a=.88*this.viewWidth,n=.88*this.viewHeight;a*t>=n?a=n/t:n=a*t,this.treeWidth=a,this.treeHeight=n,this.viewPaddingTop=(this.viewHeight-this.treeHeight)/2,this.viewPaddingLeft=(this.viewWidth-this.treeWidth)/2;var i={x:this.viewPaddingLeft,y:this.viewPaddingTop,width:this.treeWidth,height:this.treeHeight};d3.select("#"+this.treeCanvasId).select("#"+this.treeCanvasRectId).empty()?d3.select("#"+this.treeCanvasId).append("rect").attr("class","canvas-region-outer").attr("id",this.treeCanvasRectId).attr("x",i.x).attr("y",i.y).attr("width",i.width).attr("height",i.height).on("click",(function(){e.removeControlHighlight()})):d3.select("#"+this.treeCanvasId).select("#"+this.treeCanvasRectId).attr("x",i.x).attr("y",i.y).attr("width",i.width).attr("height",i.height),this.treeViewPaddingTop=0*this.treeHeight,this.treeViewPaddingBottom=0*this.treeHeight,this.treeViewPaddingLeft=0*this.treeWidth,this.treeViewPaddingRight=0*this.treeWidth,this.treeViewWidth=this.treeWidth-this.treeViewPaddingLeft-this.treeViewPaddingRight,this.treeViewHeight=this.treeHeight-this.treeViewPaddingTop-this.treeViewPaddingBottom;var r={x:this.treeViewPaddingLeft+this.viewPaddingLeft,y:this.treeViewPaddingTop+this.viewPaddingTop,width:this.treeViewWidth,height:this.treeViewHeight};this.treeViewPosLenObj=r,e.appendTreeVisBoundingBox(),d3.select("#"+this.treeCanvasId).select("#"+this.treeGId).remove(),d3.select("#"+this.treeCanvasId).append("g").attr("id",this.treeGId).attr("class",this.singleTreeG).attr("transform","translate("+r.x+","+r.y+")")},appendTreeVisBoundingBox:function(){var e=this,t=this.treeGId,a=this.treeViewPosLenObj,n=0*a.width,i=0*a.height,r=t.replace("-g","")+"-bg";d3.select("#"+this.treeCanvasId).select("#"+r).empty()?(d3.select("#"+this.treeCanvasId).append("rect").attr("id",r).attr("class","tree-vis-region-outer").attr("x",a.x-n).attr("y",a.y-i).attr("width",a.width+2*n).attr("height",a.height+2*i).on("click",(function(){e.removePreviewObjectSelection(),e.addControlHighlight();var t=sysDatasetObj.getCurrentTreeDSLArray(e.focusedTreeObjArray);e.UPDATE_CURRENT_TREE_DSL_ARRAY(t)})),e.appendResizeCircle(t)):(d3.select("#"+this.treeCanvasId).select("#"+r).attr("x",a.x-n).attr("y",a.y-i).attr("width",a.width+2*n).attr("height",a.height+2*i),e.repositionResizeCircle(t))},removeControlHighlight:function(){d3.select("#"+this.treeCanvasId).selectAll(".resize-circle-g").classed("highlight",!1),d3.select("#"+this.treeCanvasId).selectAll(".tree-vis-region-outer").classed("highlight",!1)},addControlHighlight:function(){var e=this;d3.select("#"+e.treeCanvasId).select(".resize-circle-g").classed("highlight",!0),d3.select("#"+e.treeCanvasId).select(".tree-vis-region-outer").classed("highlight",!0)},renderGuideline:function(e){var t=e.x,a=e.y,n=e.width,i=e.height;d3.select("#"+this.treeCanvasId).selectAll(".horizontal-mark-line").remove(),d3.select("#"+this.treeCanvasId).selectAll(".horizontal-mark-line").data(this.horizontalArray).enter().append("line").attr("class","horizontal-mark-line mark-line").attr("x1",(function(e,a){return t+e*n})).attr("y1",(function(e,t){return-1e4})).attr("x2",(function(e,a){return t+e*n})).attr("y2",(function(e,t){return 1e4})),d3.select("#"+this.treeCanvasId).selectAll(".vertical-mark-line").remove(),d3.select("#"+this.treeCanvasId).selectAll(".vertical-mark-line").data(this.verticalArray).enter().append("line").attr("class","vertical-mark-line mark-line").attr("x1",(function(e,t){return-1e4})).attr("y1",(function(e,t){return a+e*i})).attr("x2",(function(e,t){return 1e4})).attr("y2",(function(e,t){return a+e*i}))},renderTreeLink:function(e){var t=this,a=t.treeGId,n=d3.select("#"+a).selectAll(".link").data(e.filter((function(e){return"undefined"!==typeof e.pathAttr&&-1===e.pathAttr.indexOf("NaN")})));n.enter().append("path").attr("id",(function(e,t){return"link"+e.beginid+"to"+e.endid})).attr("class",(function(e,t){return"link link-parent-"+e.beginid+" link-child-"+e.endid})).attr("d",(function(e,t){return e.pathAttr})).attr("stroke-width",(function(e,t){return e.link_width})).attr("fill","none");var i=[],r=[],s=[];n.each((function(e,a){var n=d3.select(this).attr("d");null!=n&&"undefined"!==typeof n&&i.push(n);var o=e.pathAttr;null!=o&&"undefined"!==typeof o&&r.push(o),s.push(d3.select(this).node()),d3.select(this).transition().duration(t.DURATION).attr("stroke-width",(function(e,t){return e.link_width})).attr("fill","none")})),n.exit().remove();var o=function(){n.each((function(e,t){d3.select(this).attr("d",e.pathAttr).attr("stroke-width",(function(e,t){return e.link_width}))}))};i.length>0&&r.length>0?i.length===r.length&&null!=i[0]&&null!=r[0]&&"undefined"!==typeof i[0]&&"undefined"!==typeof r[0]&&Object(ne["tweenPaths"])({duration:t.DURATION,complete:o,from:i,to:r,next:function(e,t){return s[t].setAttribute("d",e)}}):o()},appendTreeNode:function(e){var t=this,a=(t.nodeArray,t.treeGId),n=(this.layouts,d3.select(this.$el).select("#"+a).selectAll(".lineartree-node-g").data(e,(function(e,t){return e.id})));n.enter().append("g").attr("class","lineartree-node-g").attr("id",(function(e,t){return"nodeg"+e.id})).append("path").attr("class","lineartree-node").attr("id",(function(e,t){return"rootnode"+e.id})).attr("d",(function(e,t){return e.element})).on("mousemove",this.mousemove).on("mouseover",this.mouseover).on("mouseout",this.mouseout).on("click",(function(e,a){var n=JSON.parse(JSON.stringify(e.data));n.fatherID=e.fatherID,t.onclick(n)})).attr("fill",(function(e){return e.node_color})).style("stroke-width",(function(e){return e.stroke_width})).style("opacity",1),d3.select(this.$el).select("#"+a).selectAll(".lineartree-node-g").each((function(e,t){d3.select(this).select(".node-label").empty()&&0!==e.fontSize&&""!==e.labelValue&&(d3.select(this).append("defs").append("path").attr("class","label-curve").attr("id",(function(e){return"curve-"+e.id})).attr("d",(function(e){return e.labelPath})),d3.select(this).append("text").attr("class","node-label").attr("id",(function(e){return"node-label-"+e.id})).append("textPath").attr("xlink:href",(function(e,t){return"#curve-"+e.id})).text((function(e,t){return e.labelValue})).style("text-anchor",(function(e){return e.textAnchor})).attr("transform",(function(e){return"translate(0,0)rotate("+e.rotation+")"})).style("font-size",(function(e){return e.fontSize})).attr("alignment-baseline","middle").attr("startOffset",(function(e,t){return e.labelPathPos+"%"})))}))},renderTreeNode:function(e){var t=this,a=(t.nodeArray,t.treeGId),n=(this.layouts,d3.select(this.$el).select("#"+a).selectAll(".lineartree-node-g").data(e,(function(e,t){return e.id})));n.enter().append("g").attr("class","lineartree-node-g").attr("id",(function(e,t){return"nodeg"+e.id})).append("path").attr("class","lineartree-node").attr("id",(function(e,t){return"rootnode"+e.id})).attr("d",(function(e,t){return e.element})).on("mousemove",this.mousemove).on("mouseover",this.mouseover).on("mouseout",this.mouseout).on("click",(function(e,a){var n=JSON.parse(JSON.stringify(e.data));n.fatherID=e.fatherID,t.onclick(n)})).attr("fill",(function(e){return e.node_color})).style("stroke-width",(function(e){return e.stroke_width})).style("opacity",1),n.each((function(e,t){d3.select(this).select(".node-label").empty()&&0!==e.fontSize&&""!==e.labelValue&&(d3.select(this).append("defs").append("path").attr("class","label-curve").attr("id",(function(e){return"curve-"+e.id})).attr("d",(function(e){return e.labelPath})),d3.select(this).append("text").attr("class","node-label").attr("id",(function(e){return"node-label-"+e.id})).append("textPath").attr("xlink:href",(function(e,t){return"#curve-"+e.id})).text((function(e,t){return e.labelValue})).style("text-anchor",(function(e){return e.textAnchor})).attr("transform",(function(e){return"translate(0,0)rotate("+e.rotation+")"})).style("font-size",(function(e){return e.fontSize})).attr("alignment-baseline","middle").attr("startOffset",(function(e,t){return e.labelPathPos+"%"})))}));var i=[],r=[],s=[];n.each((function(e,a){var n=e.element,o=d3.select(this).select(".lineartree-node").attr("d");s.push(d3.select(this).select(".lineartree-node").node()),i.push(o),r.push(n),d3.select(this).select(".lineartree-node").transition().duration(t.DURATION).attr("fill",(function(e){return e.node_color})).style("stroke-width",(function(e){return e.stroke_width})).style("opacity",1),d3.select(this).transition().duration(t.DURATION).select(".label-curve").attr("d",(function(e){return e.labelPath})),d3.select(this).select(".node-label").select("textPath").transition().duration(t.DURATION).attr("xlink:href",(function(e,t){return"#curve-"+e.id})).style("text-anchor",(function(e){return e.textAnchor})).style("font-size",(function(e){return e.fontSize})).text((function(e,t){return e.labelValue})).attr("transform",(function(e){return"translate(0,0)rotate("+e.rotation+")"})).attr("alignment-baseline","middle").attr("startOffset",(function(e,t){return e.labelPathPos+"%"}))}));var o=function(){n.each((function(e,t){var a=e.element;d3.select(this).select(".lineartree-node").attr("d",a)})),setTimeout((function(){d3.select("#"+a).selectAll(".lineartree-node-g").remove(),t.appendTreeNode(e),"undefined"!==typeof t.previewTreeObj&&null!=t.previewTreeObj&&t.highlightFocusedTreeObjIdArray(t.previewTreeObj)}),200)};i.length>0&&r.length>0?i.length===r.length&&null!=i[0]&&null!=r[0]&&"undefined"!==typeof i[0]&&"undefined"!==typeof r[0]&&Object(ne["tweenPaths"])({duration:t.DURATION,complete:o,from:i,to:r,next:function(e,t){return s[t].setAttribute("d",e)}}):o(),n.exit().remove()},mousemove:function(e){this.treeViewPosLenObj;d3.select("#NodeLabel").style("visibility","visible"),d3.select("#NodeLabel").style("opacity",.9);var t=e.tooltip,a=$("#tree-dsl-canvas-container").offset();function n(e,t){for(var a="<h4>",n=0;n<t.length;n++)a=n===t.length-1?a+t[n]+": "+e[t[n]]:a+t[n]+": "+e[t[n]]+"<br/>";return a+="</h4>",a}t.length>0?(d3.select("#NodeLabel").html(n(e,t)).style("left",d3.event.pageX-a.left+"px").style("top",d3.event.pageY-a.top+"px"),d3.select("#NodeLabel").style("visibility","visible")):d3.select("#NodeLabel").style("visibility","hidden")},mouseover:function(e){},mouseout:function(e){d3.select("#NodeLabel").style("visibility","hidden")},getSelectedTreeUnitRootIdArray:function(e){this.AreaData,this.layouts,this.viewSelectionMode;for(var t=this.assignNodeQuery,a=[],n=this.previewTreeObj[t],i=0;i<this.areaDataArray.length;i++)"fatherID"===t?this.areaDataArray[i][t]===n&&a.push(this.areaDataArray[i]["data"].index):this.areaDataArray[i]["data"][t]===n&&a.push(this.areaDataArray[i]["data"].index);return a},highlightFocusedTreeObjIdArray:function(e){var t=e.index;"A"!==e.name&&(d3.select("#"+this.treeCanvasId).selectAll(".select-root-node").classed("select-root-node",!1),d3.select("#"+this.treeCanvasId).select("#rootnode"+t).classed("select-root-node",!0));var a=this.getSelectedTreeUnitRootIdArray(t),n=this.getFocusedTreeObjIdArray(a);this.UPDATE_FOCUS_TREE_OBJ_ARRAY(n),d3.select("#"+this.treeCanvasId).selectAll(".lineartree-node").classed("clickhighlight",!1).classed("clickunhighlight",!1),d3.select("#"+this.treeCanvasId).selectAll(".lineartree-node").classed("clickunhighlight",!0);for(var i=0;i<n.length;i++)d3.select("#"+this.treeCanvasId).selectAll("#rootnode"+n[i]).classed("clickhighlight",!0).classed("clickunhighlight",!1)},getFocusedTreeObjIdArray:function(e){for(var t=this.assignRecursiveMode,a=this.layouts,n=(this.AreaData,[]),i=0;i<e.length;i++){var r=e[i],s=[];"true"===t?s=l(r):"false"===t&&(s=[r]);for(var o=0;o<s.length;o++)-1===n.indexOf(s[o])&&n.push(s[o])}return n;function l(e){var t=[],n=[e];while(void 0!==e){for(var i=0;i<a[e].subtreeLayout.length;i++){var r=a[e].subtreeLayout[i].id;t.push(r),n.push(r)}e=t.shift()}return n}},unhighlightSelectedNodeArray:function(){d3.select("#"+this.treeCanvasId).selectAll(".lineartree-node").classed("clickunhighlight",!1).classed("clickhighlight",!1).classed("select-root-node",!1)},onclick:function(e){var t=this,a=e.index;t.addControlHighlight(),d3.select("#"+t.treeCanvasId).select("#rootnode"+a).classed("select-root-node")?t.removePreviewObjectSelection():(t.UPDATE_SELECTED_PREVIEW_NODE_ID(a),t.UPDATE_PREVIEW_TREE_OBJ(e),t.highlightFocusedTreeObjIdArray(e));var n=sysDatasetObj.getCurrentTreeDSLArray(this.focusedTreeObjArray);t.UPDATE_CURRENT_TREE_DSL_ARRAY(n)},removePreviewObjectSelection:function(){var e=this;e.UPDATE_SELECTED_PREVIEW_NODE_ID(null),e.unhighlightSelectedNodeArray();var t=sysDatasetObj.getAllTreeObjIdArray();e.UPDATE_FOCUS_TREE_OBJ_ARRAY(t);var a=e.areaDataArray,n=JSON.parse(JSON.stringify(a[0].data));e.UPDATE_PREVIEW_TREE_OBJ(n)},renderTree:function(){var e=this,t=this.treeIndexWithDSL,a=this.dslContentObject,n=this.treeViewPosLenObj,i=(this.layouts,this.AreaData),r=this.nodeArray,s=(this.currentRootID,me(a)),o=ae(i,s,t,n,r),l=Object(d["a"])(o,2),c=l[0],u=l[1];c=fe(c,s,t,r),u=ge(u,i,s,t,r,this.treeViewWidth,this.treeViewHeight),this.areaDataArray=c,this.linkDataArray=u,e.renderTreeLink(u),e.renderTreeNode(c)},extractDSLContentObject:function(){for(var e=this.treeDSLArray,t={},a=0;a<e.length;a++){var n=e[a],i=n.editorId,r=n.content;t[i]=r}return t},getSvgCoordinates:function(e,t,a){var n=document.getElementById(this.treeCanvasSvgId),i=n.createSVGPoint();i.x=t,i.y=a;var r=i.matrixTransform(e.getScreenCTM().inverse());return r},repositionResizeCircle:function(e){var t=this,a=d3.select("#"+t.treeCanvasId),n=a.select(".resize-circle-g"),i=a.select(".tree-vis-region-outer"),r=+i.attr("x"),s=+i.attr("y"),o=+i.attr("width"),l=+i.attr("height");n.select(".topleft").attr("cx",r).attr("cy",s),n.select(".bottomright").attr("cx",r+o).attr("cy",s+l)},appendResizeCircle:function(e){var t=this,a=d3.select("#"+t.treeCanvasId),n=d3.select("#"+t.treeCanvasId).select(".tree-vis-region-outer"),i=+n.attr("x"),r=+n.attr("y"),s=+n.attr("width"),o=+n.attr("height"),l=a.append("g").attr("class","resize-circle-g");function c(){var a=t.treeViewPosLenObj,n=d3.select(this),i="start"===d3.event.type;if(i||n.classed("hovering")?d3.select("#"+t.treeCanvasId).select(".tree-vis-region-outer").classed("resizing",!0):d3.select("#"+t.treeCanvasId).select(".tree-vis-region-outer.resizing").classed("resizing",!1),i){var r=d3.select("#"+t.treeCanvasId).select(".tree-vis-region-outer"),s=+r.attr("x"),o=+r.attr("y"),l=+r.attr("width"),c=+r.attr("height");t.regionOuterRectPos={x:s,y:o,width:l,height:c}}if(!i){var d=d3.select("#"+t.treeCanvasId).select(".tree-vis-region-outer"),u=+d.attr("x"),h=+d.attr("y"),p=+d.attr("width"),f=+d.attr("height"),g=u-t.regionOuterRectPos.x,m=h-t.regionOuterRectPos.y,y=p-t.regionOuterRectPos.width,v=f-t.regionOuterRectPos.height;a.x=a.x+g,a.y=a.y+m,a.width=a.width+y,a.height=a.height+v;e.replace("-g","");t.updateTreeVisResults()}}l.append("circle").attr("class","topleft").attr("cx",i).attr("cy",r).call(d3.drag().container(d3.select("#"+t.treeCanvasId).node()).subject((function(){return{x:d3.event.x,y:d3.event.y}})).on("start end",c).on("drag",m)),l.append("circle").attr("class","bottomright").attr("cx",i+s).attr("cy",r+o).call(d3.drag().container(d3.select("#"+t.treeCanvasId).node()).subject((function(){return{x:d3.event.x,y:d3.event.y}})).on("start end",c).on("drag",m));var d=t.treeWidth+t.viewPaddingLeft,u=t.viewPaddingLeft,h=t.treeHeight+t.viewPaddingTop,p=t.viewPaddingTop,f=0,g=0;function m(e){var n=t.getSvgCoordinates(a.node(),d3.event.sourceEvent.clientX,d3.event.sourceEvent.clientY),i=Math.max(Math.min(n.x,d),u),r=Math.max(Math.min(n.y,h),p),s=d3.select("#"+t.treeCanvasId).select(".tree-vis-region-outer"),o=+s.attr("x"),l=+s.attr("y"),c=+s.attr("width"),m=+s.attr("height");if(d3.select(this).classed("topleft")){var y=Math.max(c+o-i,f);o+=c-y,c=y;var v=Math.max(m+l-r,g);l+=m-v,m=v,d3.select(this).attr("cx",o).attr("cy",l)}else c=i-o,m=r-l,d3.select(this).attr("cx",o+c).attr("cy",l+m);s.attr("x",o).attr("y",l).attr("width",c).attr("height",m)}}},Object(u["c"])(["UPDATE_TREE_DSL_ARRAY_KEY","UPDATE_FOCUS_TREE_OBJ_ARRAY","UPDATE_PREVIEW_TREE_OBJ","UPDATE_SELECTED_PREVIEW_NODE_ID","UPDATE_CURRENT_TREE_DSL_ARRAY"]))},ve=ye,be=(a("a165"),a("cd36"),a("735c"),a("af11"),Object(de["a"])(ve,l,c,!1,null,"76bf5cb0",null)),De=be.exports,Se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",attrs:{id:"tree-canvas-title"}},[a("span",{staticClass:"text"},[e._v(e._s(e.title))]),a("span",{staticClass:"operation"},[a("span",{staticClass:"mode-selection"},[a("el-tooltip",{attrs:{content:"clear",placement:"top"}},[a("span",{staticClass:"icon iconfont icon-qingchu",on:{click:e.clearCanvas}})]),a("el-divider",{attrs:{direction:"vertical"}}),a("el-tooltip",{attrs:{content:"assemble",placement:"top"}},[a("span",{staticClass:"icon iconfont icon-assemble",class:{selected:e.openAssembleDialog},on:{click:e.openAssembleDialogHandler}})]),a("el-divider",{attrs:{direction:"vertical"}}),a("el-tooltip",{attrs:{content:"selection",placement:"top"}},[a("span",{staticClass:"icon iconfont icon-selection",class:{selected:e.openSelectionDialog},on:{click:e.openSelectionDialogHandler}})]),e.openSelectionDialog?a("div",{staticClass:"selection-controller",style:e.selectionStyleObject},[a("div",{staticClass:"spacing"}),a("el-row",[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"selection-label",attrs:{offset:1,span:7}},[e._v("Selection")]),a("el-col",{attrs:{span:15}},[a("el-select",{attrs:{placeholder:"please select"},on:{change:e.changeNodeQuery},model:{value:e.local_AssignNodeQuery,callback:function(t){e.local_AssignNodeQuery=t},expression:"local_AssignNodeQuery"}},e._l(e.nodeQueryAttrObjArray,(function(e){return a("el-option",{key:e.attrName,attrs:{label:e.attrName,value:e.attrName}})})),1)],1)],1),a("div",{staticClass:"small-spacing"}),a("el-row",[a("el-col",{attrs:{span:1}}),a("el-col",{attrs:{offset:1,span:22}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"Please select",type:"textarea",rows:1,disabled:"",size:"mini"},model:{value:e.selectionNode,callback:function(t){e.selectionNode=t},expression:"selectionNode"}})],1)],1),a("div",{staticClass:"spacing"}),a("el-row",[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"selection-label",attrs:{offset:1,span:7}},[e._v("Recursive")]),a("el-col",{attrs:{span:15}},[a("el-radio-group",{attrs:{id:"recursive-mode",size:"mini"},on:{change:e.changeRecursiveMode},model:{value:e.local_AssignRecursiveMode,callback:function(t){e.local_AssignRecursiveMode=t},expression:"local_AssignRecursiveMode"}},[a("el-radio-button",{attrs:{label:"true"}}),a("el-radio-button",{attrs:{label:"false"}})],1)],1)],1),a("div",{staticClass:"spacing"}),a("el-row",[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"selection-label",attrs:{offset:1,span:7}},[e._v("Template")]),a("el-col",{attrs:{span:15}},[a("el-select",{attrs:{placeholder:"please select"},on:{change:e.changeAssignDSLName},model:{value:e.local_AssignDSLName,callback:function(t){e.local_AssignDSLName=t},expression:"local_AssignDSLName"}},e._l(e.selectedDSLArray,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1):e._e(),e.openAssembleDialog?a("div",{staticClass:"assemble-controller",style:e.assembleStyleObject},[a("div",{staticClass:"spacing"}),a("el-row",[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"selection-label",attrs:{offset:1,span:10}},[e._v("Mode")]),a("el-col",{attrs:{span:12}},[a("el-radio-group",{attrs:{id:"assemble-mode",size:"mini"},on:{change:e.changeAssembleMode},model:{value:e.local_AssembleMode,callback:function(t){e.local_AssembleMode=t},expression:"local_AssembleMode"}},[a("el-radio-button",{attrs:{label:"bottom-up"}}),a("el-radio-button",{attrs:{label:"top-down"}})],1)],1)],1),a("div",{staticClass:"spacing"}),a("el-row",[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"selection-label",attrs:{offset:1,span:10}},[e._v("SubtreeWidth")]),a("el-col",{attrs:{span:12}},[a("el-select",{attrs:{placeholder:"select",disabled:"bottom-up"===e.local_AssembleMode},on:{change:e.changeSubtreeWidth},model:{value:e.local_AssembleSubtreeWidth,callback:function(t){e.local_AssembleSubtreeWidth=t},expression:"local_AssembleSubtreeWidth"}},e._l(e.subtreeWidthHeightAttrObjArray,(function(e){return a("el-option",{key:e.attrName,attrs:{label:e.attrName,value:e.attrName}})})),1)],1)],1),a("div",{staticClass:"spacing"}),a("el-row",[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"selection-label",attrs:{offset:1,span:10}},[e._v("SubtreeHeight")]),a("el-col",{attrs:{span:12}},[a("el-select",{attrs:{placeholder:"select",disabled:"bottom-up"===e.local_AssembleMode},on:{change:e.changeSubtreeHeight},model:{value:e.local_AssembleSubtreeHeight,callback:function(t){e.local_AssembleSubtreeHeight=t},expression:"local_AssembleSubtreeHeight"}},e._l(e.subtreeWidthHeightAttrObjArray,(function(e){return a("el-option",{key:e.attrName,attrs:{label:e.attrName,value:e.attrName}})})),1)],1)],1)],1):e._e()],1)])])},Te=[];function xe(e){return Ae.apply(this,arguments)}function Ae(){return Ae=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d3.json("hierarchicalData/"+t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)}))),Ae.apply(this,arguments)}var _e={name:"TreeCanvasViewTitle",props:{title:{type:String}},data:function(){return{operation:["joint","partition_vertical","partition_horizontal"],subtreeWidthHeightAttrObjArray:[],nodeQueryAttrObjArray:[{attrName:"depth",attrType:"number"},{attrName:"height",attrType:"number"},{attrName:"index",attrType:"string"}],partitionDataCollection:{},selectionStyleObject:{width:"200px",height:"150px"},assembleStyleObject:{width:"280px",height:"110px"},boldTextStyleObj:{fontWeight:"normal",fontSize:"0.8rem"},radioButtonContainerStyle:{margin:"10px"},select:"",selectCriteria:"id",openSelectionDialog:!1,openAssembleDialog:!1,selectionNode:"",local_AssignDSLName:"",local_AssignRecursiveMode:"true",local_AssignNodeQuery:"index",local_AssembleMode:"top-down",local_AssembleSubtreeWidth:"adaptive",local_AssembleSubtreeHeight:"adaptive",DURATION:1e3}},created:function(){},beforeMount:function(){},mounted:function(){var e=this;this.subtreeWidthHeightAttrObjArray=JSON.parse(JSON.stringify(this.attrObjArray)),this.subtreeWidthHeightAttrObjArray.push({attrName:"adaptive",attrType:"number"}),this.initAssembleDialog(),setTimeout((function(){var t=$(".top-panel").height()+$(".el-menu-demo").height()+$("#tree-canvas-title").height();e.selectionStyleObject.top=t+"px",e.selectionStyleObject.right="0px",e.assembleStyleObject.top=t+"px",e.assembleStyleObject.right="0px"}),500)},watch:{hierarchicalData:function(){this.partitionDataCollection[this.hierarchicalData.index]=this.hierarchicalData},previewTreeObj:function(){this.local_AssignNodeQuery="index",this.UPDATE_ASSIGN_NODE_QUERY(this.local_AssignNodeQuery),this.local_AssignRecursiveMode="true",this.UPDATE_ASSIGN_RECURSIVE_MODE(this.local_AssignRecursiveMode),this.selectionNode="= "+this.previewTreeObj[this.local_AssignNodeQuery];for(var e=this.currentTreeDSLArray,t="",a=0;a<e.length;a++)t=""===t?e[a]:t+"-"+e[a];this.local_AssignDSLName=t,d3.select(".select-root-node").empty()?this.openSelectionDialog=!1:(this.openSelectionDialog=!0,this.openAssembleDialog=!1),this.initAssembleDialog()},dslListSelectedDSLName:function(){this.initAssembleDialog()}},computed:Object(o["a"])({},Object(u["d"])(["viewSelectionMode","previewTreeObj","focusedTreeObjArray","currentTreeDSLArray","hierarchicalData","partitionValue","layoutParas","partitionDataObjDic","attrObjArray","selectedDSLArray","assignNodeQuery","assignRecursiveMode","assignDSLName","assembleMode","assembleSubtreeWidth","assembleSubtreeHeight","treeUnitDSLArray","treeUnitDSLName","dslListSelectedDSLName"])),methods:Object(o["a"])({changeNodeQuery:function(){"undefined"!==typeof this.previewTreeObj&&null!=this.previewTreeObj&&(this.selectionNode="= "+this.previewTreeObj[this.local_AssignNodeQuery],this.UPDATE_ASSIGN_NODE_QUERY(this.local_AssignNodeQuery),this.updateSelectedTreeDSL(this.local_AssignDSLName),console.log("this.local_AssignDSLName",this.local_AssignDSLName))},changeAssignDSLName:function(){"undefined"!==typeof this.previewTreeObj&&null!=this.previewTreeObj&&(console.log("this.local_AssignDSLName",this.local_AssignDSLName),this.updateSelectedTreeDSL(this.local_AssignDSLName))},changeRecursiveMode:function(){"undefined"!==typeof this.previewTreeObj&&null!=this.previewTreeObj&&(this.UPDATE_ASSIGN_RECURSIVE_MODE(this.local_AssignRecursiveMode),this.updateSelectedTreeDSL(this.local_AssignDSLName))},changeAssembleMode:function(){this.updateAllDSLObj()},changeSubtreeHeight:function(){this.updateAllDSLObj()},changeSubtreeWidth:function(){this.updateAllDSLObj()},openSelectionDialogHandler:function(){this.openSelectionDialog=!this.openSelectionDialog,this.openSelectionDialog&&(this.openAssembleDialog=!1)},clearCanvas:function(){var e=this,t=sysDatasetObj.getLayoutParas();t.treeDSLContentObj={},t.treeIndexWithDSL={},e.UPDATE_TREE_CANVAS_LAYOUT_STATE()},initAssembleDialog:function(){if("undefined"!==typeof this.previewTreeObj&&null!=this.previewTreeObj){var e=this.previewTreeObj.index,t=sysDatasetObj.getLayoutParas(),a=t.treeDSLContentObj,n=t.treeIndexWithDSL;if("undefined"!==typeof n&&"undefined"!==typeof a){var i=a[n[e]];"undefined"!==typeof i&&(this.local_AssembleMode=i.Layout.Mode,this.local_AssembleSubtreeWidth="adaptive",this.local_AssembleSubtreeHeight="adaptive")}}},updateAllDSLObj:function(){for(var e=0;e<this.treeUnitDSLArray.length;e++){var t=this.treeUnitDSLArray[e];t.name===this.treeUnitDSLName&&(t.dslObj.Layout.Mode=this.local_AssembleMode,t.dslObj.Layout.SubtreeWidth=this.local_AssembleSubtreeWidth,t.dslObj.Layout.SubtreeHeight=this.local_AssembleSubtreeHeight,console.log("treeUnitDSLObj.dslObj",t.dslObj),this.UPDATE_TREE_UNIT_LAYOUT_STATE(),sysDatasetObj.updateTreeDSLContentObject(this.treeUnitDSLName,t.dslObj),this.UPDATE_TREE_CANVAS_LAYOUT_STATE(),sysDatasetObj.updateSelectedDSLObject(this.treeUnitDSLName,t.dslObj),this.UPDATE_TREE_PREVIEW_LAYOUT_STATE())}},openAssembleDialogHandler:function(){this.openAssembleDialog=!this.openAssembleDialog;var e=this.previewTreeObj;if("undefined"!==typeof e&&null!=e){var t=e.index,a=sysDatasetObj.getLayoutParas(),n=a.treeIndexWithDSL,i=a.treeDSLContentObj;if("undefined"!==typeof n&&"undefined"!==typeof n[t]){var r=i[n[t]],s=r.Layout.Mode;this.local_AssembleMode=s,"top-down"===s&&(this.local_AssembleSubtreeWidth=r.Layout.SubtreeWidth,this.local_AssembleSubtreeHeight=r.Layout.SubtreeHeight)}this.openAssembleDialog&&(this.openSelectionDialog=!1)}},handleViewSelectionModeCommand:function(e){this.UPDATE_VIEW_SELECTION_MODE(e)},test:function(){},iconClass:function(e){var t="icon-"+e;return t},updateSelectedTreeDSL:function(e){var t=this;if(0!==e.length){sysDatasetObj.updateLayoutParas(this.focusedTreeObjArray,e);var a=sysDatasetObj.getCurrentTreeDSLArray(this.focusedTreeObjArray);this.UPDATE_CURRENT_TREE_DSL_ARRAY(a);var n=sysDatasetObj.updateTreeUnitDSLArray(this.currentTreeDSLArray,this.treeUnitDSLArray);this.UPDATE_TREEUNIT_DSL_ARRAY(n),setTimeout((function(){t.UPDATE_TREEUNIT_DSL_NAME(e)}),100),setTimeout((function(){t.UPDATE_TREE_CANVAS_LAYOUT_STATE()}),300)}}},Object(u["c"])(["UPDATE_TREEUNIT_DSL_NAME","UPDATE_TREEUNIT_DSL_ARRAY","UPDATE_CURRENT_TREE_DSL_ARRAY","UPDATE_VIEW_SELECTION_MODE","UPDATE_PARTITION_VALUE","UPDATE_ASSEMBLE_SUBTREE_HEIGHT","UPDATE_ASSEMBLE_SUBTREE_WIDTH","UPDATE_ASSEMBLE_MODE","UPDATE_ASSIGN_DSL_NAME","UPDATE_ASSIGN_NODE_QUERY","UPDATE_ASSIGN_RECURSIVE_MODE","UPDATE_DSLLIST_SELECTED_DSL_NAME","UPDATE_DSLLIST_SELECTED_DSL_STATE","UPDATE_TREE_UNIT_LAYOUT_STATE","UPDATE_TREE_CANVAS_LAYOUT_STATE","UPDATE_TREE_PREVIEW_LAYOUT_STATE"]),{},Object(u["b"])(["getLayouts"]))},Le=_e,Ce=(a("03d0"),a("69bb"),Object(de["a"])(Le,Se,Te,!1,null,"29697549",null)),Oe=Ce.exports,Re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"data-dialog"}},[a("div",{staticClass:"content-container"},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"http://127.0.0.1:14452/","http-request":e.getFile,"auto-upload":!0,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-upload":e.onBeforeUpload,"on-success":e.handleUploadSuccess,"file-list":e.fileList,"show-file-list":!1,multiple:""}},[a("div",{staticClass:"el-upload__text"},[e._v("Drop file here or "),a("em",[e._v("click to upload")])])]),a("span",{staticClass:"inner-label"},[e._v("Your Dateset:")]),a("el-table",{ref:"treeDataTable",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"","default-sort":{prop:"date",order:"descending"},data:e.treeDataArray,"max-height":"170",border:"",stripe:""},on:{"row-dblclick":e.dataTableRowDBClick,"row-click":e.dataTableRowClick}},[a("el-table-column",{attrs:{property:"filename",label:"FileName",sortable:""}}),a("el-table-column",{attrs:{property:"nodenum",label:"NodeNum",sortable:""}}),a("el-table-column",{attrs:{property:"depth",label:"Depth",sortable:"","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[e._v("\n\t\t\t        Delete\n\t\t\t      ")]}},{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",disabled:t.row.username!==e.userInfoName},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[a("span",{staticClass:"icon iconfont icon-iconfontshanchu"})])]}}])})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDataDialog}},[e._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmSelection}},[e._v("OK")])],1)])},Ee=[];a("8ea5"),a("28a5");function je(e,t,a){var n=d3.hierarchy(e),i=[];Pe(n,i);for(var r=i.length,s=0,o=0;o<i.length;o++){var l=i[o].depth;l>s&&(s=l)}var c={nodenum:r,depth:s+1,treedata:e,date:(new Date).toISOString().split("T")[0],username:t,filename:a};return c}function Pe(e,t){var a=e.children;if(t.push(e),"undefined"!==typeof a)for(var n=0;n<a.length;n++)Pe(a[n],t)}var we=a("bc3a"),Ne=a.n(we);function Ue(e,t){Ne()({methods:"get",url:"/user/signin",params:e,timeout:1e4}).then((function(e){t(e.data)}))}function ke(e,t){Ne()({methods:"get",url:"/user/signup",params:e,timeout:1e4}).then((function(e){t(e.data)}))}function Ie(e,t){console.log("addTreeDataset"),Ne()({methods:"get",url:"/dataset/add",params:e,timeout:1e4}).then((function(e){t(e.data)}))}function Me(e,t){Ne()({methods:"get",url:"/dataset/remove",params:e,timeout:1e4}).then((function(e){t(e.data)}))}function We(e,t){Ne()({methods:"get",url:"/template/add",params:e,timeout:1e4}).then((function(e){t(e.data)}))}function Ve(e){var t={treename:e.treename,username:e.username,date:e.date};console.log("removeTreeTemplate",t,"templateObj",e),Ne()({methods:"get",url:"/template/remove",params:t,timeout:1e4}).then((function(e){console.log("remove the tree template")}))}function $e(e,t,a){Ne()({methods:"get",url:"/dataset/query",params:e,timeout:1e4}).then((function(e){t(e.data,a)}))}function He(e,t,a){Ne()({methods:"get",url:"/template/query",params:e,timeout:1e4}).then((function(e){t(e.data,a)}))}var Ye={name:"DataDialog",components:{},data:function(){return{search:" ",fileList:[],selectedTreeDataName:null,tempSelection:null,treeDataArray:sysDatasetObj.getTreeDatasetArray()}},watch:{},props:{initTreeDataName:{type:String}},created:function(){},mounted:function(){this.search="",this.selectedTreeDataName=this.initTreeDataName,this.setCurrent()},computed:Object(o["a"])({},Object(u["d"])(["userInfoName"])),methods:{dataTableRowDBClick:function(){},dataTableRowClick:function(e){var t=e.filename;this.tempSelection=t,this.setCurrent(t)},closeDataDialog:function(){this.$emit("closeDataDialog")},confirmSelection:function(){var e=this;if(null!=this.tempSelection){var t=-1!==this.treeDataArray.map((function(e){return e.filename})).indexOf(this.tempSelection);t&&(this.selectedTreeDataName=this.tempSelection,this.updateSelectedTreeDateName(this.selectedTreeDataName),this.tempSelection=null,e.$cookies.set("selected-data-name",this.selectedTreeDataName))}this.$emit("closeDataDialog")},getFile:function(){console.log("upload file ok")},onBeforeUpload:function(e){var t=this,a="application/json"===e.type,n=e.size/1024/1024<2,i=this.getFileNameArray(),r=-1===i.indexOf(e.name);if(a)if(n){if(r){var s=new FileReader;return s.readAsText(e,"utf-8"),s.onload=function(a){var n=JSON.parse(this.result),i=t.userInfoName,r=e.name,s=je(n,i,r);t.treeDataArray.push(s),"Login"!==t.userInfoName&&(console.log("treeInfoObj",s),Ie(s,t.addDataCallback))},a&&n&&r}this.$message.error("The file name is existed!")}else this.$message.error("The file size can not exceed 2MB!");else this.$message.error("The uploaded file must be JSON format!")},getFileNameArray:function(){for(var e=[],t=0;t<this.treeDataArray.length;t++)e.push(this.treeDataArray[t].filename);return e},handlePreview:function(e){},handleUploadSuccess:function(e,t){console.log("upload success!")},addDataCallback:function(e){this.promptMessage(e.type,e.message)},handleRemove:function(){},handleDelete:function(e,t){this.treeDataArray.splice(e,1);var a={username:t.username,filename:t.filename,depth:t.depth};this.selectedTreeDataName=null,this.tempSelection=null,Me(a,this.removeDataCallback)},removeDataCallback:function(e){this.promptMessage(e.type,e.message)},setCurrent:function(e){for(var t=0;t<this.treeDataArray.length;t++){var a=this.treeDataArray[t];if(a.fileName===e){var n=this.treeDataArray[t];this.$refs.treeDataTable.setCurrentRow(n)}}},updateSelectedTreeDateName:function(e){this.$emit("updateSelectedTreeDateName",e)},promptMessage:function(e,t){this.$message({type:e,message:t})}}},Xe=Ye,Fe=(a("89e5"),a("7d82"),Object(de["a"])(Xe,Re,Ee,!1,null,"1c324c59",null)),ze=Fe.exports,Be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"export-panel",attrs:{gutter:24}},[a("el-col",{attrs:{offset:2,span:20}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"grid-content",attrs:{size:"mini",type:"text"},on:{click:e.save_as_png}},[a("span",[a("i",{staticClass:"icon iconfont icon-png download-icon",attrs:{slot:"suffix"},slot:"suffix"})]),e._v("\n              \n             "),a("span",{staticClass:"grid-content-title"},[e._v("Export as PNG")]),a("br"),a("br"),a("span",{staticClass:"grid-content-main"},[e._v("\n               PNG is a bitmap image format which made up of a fixed number of pixels. They have a fixed resolution and cannot be scaled. \n             ")])])])],1),a("el-col",{attrs:{offset:2,span:20}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"grid-content",attrs:{size:"mini",type:"text"},on:{click:e.save_as_svg}},[a("span",[a("i",{staticClass:"icon iconfont icon-svg download-icon",attrs:{slot:"suffix"},slot:"suffix"})]),e._v("\n              \n             "),a("span",{staticClass:"grid-content-title"},[e._v("Export as SVG")]),a("br"),a("br"),a("span",{staticClass:"grid-content-main"},[e._v("\n               SVG is a vector image format which uses geometric forms to represent differet parts as discrete objects and are infinitely scalable. \n             ")])])])],1),a("el-col",{attrs:{offset:2,span:20}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"grid-content",attrs:{size:"mini",type:"text"},on:{click:e.save_as_json}},[a("span",[a("i",{staticClass:"icon iconfont icon-format1 download-icon",attrs:{slot:"suffix"},slot:"suffix"})]),e._v("\n              \n             "),a("span",{staticClass:"grid-content-title"},[e._v("Export as JSON")]),a("br"),a("br"),a("span",{staticClass:"grid-content-main"},[e._v("\n               JSON is a lightweight data-interchange format. This serves as the visualization template. \n             ")])])])],1)],1)},Ge=[],Je=a("bc05"),Ke=a.n(Je),Qe=a("2a68"),qe=a.n(Qe),Ze=function(e){var t=JSON.parse(JSON.stringify(e));if("Layout"in t){if("X"in t.Layout){if("Root"in t.Layout.X){var a=t.Layout.X.Root;"include"===a.Relation&&("Padding"in a&&(console.log(a.Padding[0],a.Padding[1]),"0"===a.Padding[0]&&"0"===a.Padding[1]&&delete a.Padding),delete a.Padding_,delete a.Margin,delete a.Margin_,delete a.Position,delete a.Alignment),"juxtapose"===a.Relation&&(delete a.Padding,delete a.Padding_,"Margin"in a&&"0"===a.Margin&&delete a.Margin,delete a.Margin_,"left"===a.Position&&delete a.Position,delete a.Alignment),"within"===a.Relation&&(delete a.Padding,delete a.Padding_,delete a.Margin,delete a.Margin_,delete a.Position,"middle"===a.Alignment&&delete a.Alignment)}if("Subtree"in t.Layout.X){var n=t.Layout.X.Subtree;"flatten"===n.Relation&&(delete n.Alignment,"Margin"in n&&"0"===n.Margin&&delete n.Margin,delete n.Margin_,"asc"===n.SortingOrder&&delete n.SortingOrder,"null"===n.SortingCriteria&&delete n.SortingCriteria,"space-around"===n.MarginType&&delete n.MarginType),"align"===n.Relation&&("middle"===n.Alignment&&delete n.Alignment,delete n.Margin,delete n.Margin_,delete n.SortingOrder,delete n.SortingCriteria,delete n.MarginType)}}if("Y"in t.Layout){if("Root"in t.Layout.Y){var i=t.Layout.Y.Root;"include"===i.Relation&&("Padding"in i&&"0"===i.Padding[0]&&"0"===i.Padding[1]&&delete i.Padding,delete i.Padding_,delete i.Margin,delete i.Margin_,delete i.Position,delete i.Alignment),"juxtapose"===i.Relation&&(delete i.Padding,delete i.Padding_,"Margin"in i&&"0"===i.Margin&&delete i.Margin,delete i.Margin_,"top"===i.Position&&delete i.Position,delete i.Alignment),"within"===i.Relation&&(delete i.Padding,delete i.Padding_,delete i.Margin,delete i.Margin_,delete i.Position,"middle"===i.Alignment&&delete i.Alignment)}if("Subtree"in t.Layout.Y){var r=t.Layout.Y.Subtree;"flatten"===r.Relation&&(delete r.Alignment,"Margin"in r&&"0"===r.Margin&&delete r.Margin,delete r.Margin_,"asc"===r.SortingOrder&&delete r.SortingOrder,"null"===r.SortingCriteria&&delete r.SortingCriteria,"space-around"===r.MarginType&&delete r.MarginType),"align"===r.Relation&&("middle"===r.Alignment&&delete r.Alignment,delete r.Margin,delete r.Margin_,delete r.MarginType,delete r.SortingOrder,delete r.SortingCriteria)}}}if("Element"in t){var s=t.Element;"Node"in s&&("circle"!==s.Node?(delete s.SizeOption,delete s.StaticSize):"fill"===s.SizeOption&&(delete s.StaticSize,delete s.SizeOption),"adaptive"===s.RootWidth&&delete s.RootWidth,"adaptive"===s.RootHeight&&delete s.RootHeight,"triangle"!==s.Node?delete s.Direction:"top"===s.Direction&&delete s.Direction,"#6baed6"===s.StaticColor&&delete s.StaticColor,"option 1"===s.ColorSchema&&delete s.ColorSchema,"ColorRange"in s&&"#2171b5"===s.ColorRange[0]&&"#deebf7"===s.ColorRange[1]&&delete s.ColorRange,"default"===s.ColorType&&("#6baed6"===s.StaticColor&&delete s.StaticColor,delete s.ColorRange,delete s.ColorSchema),"string"===s.ColorType&&(delete s.StaticColor,delete s.ColorRange,"option 1"===s.ColorSchema&&delete s.ColorSchema),"number"===s.ColorType&&(delete s.StaticColor,delete s.ColorSchema,"undefined"!==typeof s.ColorRange&&"#2171b5"===s.ColorRange[0]&&"#deebf7"===s.ColorRange[1]&&delete s.ColorRange),delete s.ColorType,"height"===s.Color&&delete s.Color,"Label"in s&&"hidden"===s.Label&&(delete s.TextAnchor,delete s.TextDx,delete s.TextDy,delete s.TextRotation,delete s.Label)),"Link"in s&&("arccurve"!==s.Link&&delete s.ArcDirection,"static"===s.Thickness?(delete s.MinThickness,delete s.MaxThickness):delete s.StaticThickness)}if("CoordinateSystem"in t){var o=t.CoordinateSystem;"Category"in o&&("cartesian"===o.Category&&(delete o.StartAngle,delete o.CentralAngle,delete o.PolarCenter,delete o.InnerRadius,delete o.Direction,delete o.PolarAxis),"polar"===o.Category&&(1===o.CentralAngle&&delete o.CentralAngle,"clockwise"===o.Direction&&delete o.Direction,"y-axis"===o.PolarAxis&&delete o.PolarAxis,0===o.InnerRadius&&delete o.InnerRadius,"top"===o.PolarCenter&&delete o.PolarCenter,0===o.StartAngle&&delete o.StartAngle))}return t},et={name:"ExportDialog",components:{},data:function(){return{appName:"gotree"}},created:function(){},mounted:function(){},computed:Object(o["a"])({},Object(u["d"])(["layoutParas","selectedDataset","focusedTreeObjArray"])),methods:{save_as_png:function(){var e=this.getDownloadFileName(),t="tree-dsl-svg-canvas",a="tree-dsl-canvas",n=d3.select(document.getElementById(t)),i=n.select("#"+a);i.selectAll(".mark-line").attr("display","none"),i.select(".tree-g").selectAll(".resize-circle-g").attr("display","none"),Ke.a.saveSvgAsPng(n.node(),e).then((function(){i.selectAll(".mark-line").attr("display",null),i.select(".tree-g").selectAll(".resize-circle-g").attr("display",null)}))},save_as_svg:function(){var e={filename:this.getDownloadFileName()};$("#tree-dsl-svg-canvas #index-0-g").clone().appendTo($("#tree-dsl-svg-canvas-copy")),qe.a.save(d3.select("#tree-dsl-svg-canvas-copy").node(),e),setTimeout((function(){$("#tree-dsl-svg-canvas-copy #index-0-g").remove()}),1e3)},save_as_json:function(){var e=sysDatasetObj.getLayoutParas(),t=e.treeDSLContentObj;for(var a in t){var n=t[a],i=Ze(n),r="GoTree-template-"+a+".json";s(i,r,"text/json")}function s(e,t,a){var n=JSON.stringify(e),i=document.createElement("a"),r=new Blob([n],{type:a});i.href=URL.createObjectURL(r),i.download=t,i.click()}},getDownloadFileName:function(){var e=this.getCurrentDSLName(),t=this.selectedDataset.replace(".json","");return"GoTree-"+t+e},getCurrentDSLName:function(){var e=[],t=sysDatasetObj.getLayoutParas(),a=this.focusedTreeObjArray,n=t.treeIndexWithDSL;for(var i in n)if(-1!==a.indexOf(i)){var r=n[i];-1===e.indexOf(r)&&e.push(r)}var s="";this.currentTreeDSLArray=e;for(var o=0;o<e.length;o++)s=s+"-"+e[o];return s}}},tt=et,at=(a("71b4"),Object(de["a"])(tt,Be,Ge,!1,null,null,null)),nt=at.exports,it=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"dsl-dialog"}},[a("div",{staticClass:"content-container"},[a("div",{staticClass:"inner-title first-title"},[e._v("System Library")]),a("div",{staticClass:"tree-collection"},e._l(e.systemTreeTemplateArray,(function(t,n){return a("div",{staticClass:"example"},[a("div",{staticClass:"preview"},[a("SinglePreviewFigure",{key:t.treename,attrs:{dslId:t.treename,getTreeDSLObj:e.getTreeDSLObj,operation:"root"===e.userInfoName?e.rootSystemTemplateOperation:e.systemTemplateOperation,add2DSLList:e.selectTreeDSL,defaultOperationFunc:e.selectTreeDSL,removeTemplateFromGallery:e.removeTemplateFromGallery}})],1)])})),0),a("div",{staticClass:"inner-title"},[e._v("Your Templates")]),a("div",{staticClass:"tree-collection"},[a("div",{staticClass:"upload",on:{click:function(t){e.addNewTreeDSL()}}},[a("div",{staticClass:"preview"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"http-request":e.getFile,"on-success":e.handleTemplateSuccess,"before-upload":e.beforeTemplateUpload}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)]),e._l(e.userTreeTemplateArray,(function(t,n){return a("div",{staticClass:"example"},[a("div",{staticClass:"preview"},[a("SinglePreviewFigure",{key:t.treename,attrs:{dslId:t.treename,getTreeDSLObj:e.getTreeDSLObj,operation:e.userTemplateOperation,defaultOperationFunc:e.selectTreeDSL,add2DSLList:e.selectTreeDSL,removeTemplateFromGallery:e.removeTemplateFromGallery}})],1)])}))],2),a("el-dialog",{attrs:{width:"30%",title:"GoTree Template Name",visible:e.templateNameDialogVisible,"append-to-body":""},on:{"update:visible":function(t){e.templateNameDialogVisible=t}}},[a("div",{attrs:{id:"dsl-name-hint"}},[e._v("Please input the name of the import template:")]),a("el-input",{attrs:{placeholder:"GoTreeExample1",autofocus:!1},on:{input:e.changeGoTreeName},model:{value:e.realTemplateName,callback:function(t){e.realTemplateName=t},expression:"realTemplateName"}}),a("div",{staticClass:"template-name-warning-hint"},[e._v(e._s(e.templateNameWarningHint))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancelImportDSLTemplate}},[e._v("Cancel")]),a("el-button",{attrs:{disabled:-1!==e.selectedDSLArray.indexOf(e.realTemplateName),type:"primary"},on:{click:e.confirmImportDSLTemplate}},[e._v("Confirm")])],1)],1)],1)])},rt=[];a("ac4d"),a("8a81"),a("20d6");function st(){var e={treeDataArray:[{fileName:"flare.json",nodeNum:100,depth:5},{fileName:"flare-vis.json",nodeNum:100,depth:5},{fileName:"tmp50.json",nodeNum:120,depth:3},{fileName:"binaryTree.json",nodeNum:120,depth:3}],initTreeDataName:"flare-vis.json",defaultLinkWidth:5,defaultMaxLinkWidth:30,cartesianDSLArray:["ArcTree","BCTh","BCTw","BeamTree","BeamTreeV","CurveTree","GoTree1","GoTree3","IciclePlot","IPTP","NodeLink","NodeLink1","PedVis","Dendrogram","TreemapSlice","TreemapSliceDice"],polarDSLArray:["GoTree2","Sunburst1","Sunburst"],selectedDSLArray:["ArcTree","CurveTree","NodeLink","Sunburst"]};return e}var ot,lt=a("bd86");function ct(){this.originalTreeDataStr=null,this.originalTreeData=null,this.nodeArrayWithValue=null,this.selectedDSLObject={},this.allTreeObjIdArray=[],this.layoutParas={},this.attrObjArray={},this.originalTreeUnitData=null,this.originalTreeUnitDataStr=null,this.treeUnitNodeArrayWithValue=null,this.allTreeDatasetArray=[],this.allTreeTemplateArray=[]}function dt(e,t){return ut.apply(this,arguments)}function ut(){return ut=Object(s["a"])(regeneratorRuntime.mark((function e(t,a){var n,i,r,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"undefined"===typeof a&&(a=""),n={},i=0;case 3:if(!(i<t.length)){e.next=13;break}return r=t[i],s=r+".json",e.next=8,d3.json("treeDSL/"+a+s);case 8:o=e.sent,n[r]=o;case 10:i++,e.next=3;break;case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e)}))),ut.apply(this,arguments)}ct.prototype=(ot={init:function(){},updateDataset:function(e){var t=this.getOriginalTreeData(e);if("undefined"!==typeof t){this.originalTreeDataStr=t;var a={};try{a="string"===typeof t?JSON.parse(t):t}catch(n){console.log("catch JSON parse error in function updateDataset")}this.addNodexIndex(a),this.originalTreeData=a,console.log("originalTreeData",a),this.nodeArrayWithValue=this.computeNodeArray(a),this.allTreeObjIdArray=this.computeTreeObjIdArray(this.nodeArrayWithValue),this.nodeArrayWithValueObj=this.computeNodeArrayWithValueObj(),this.layoutParas.hierarchicalData=a}},computeNodeArrayWithValueObj:function(){for(var e=this.nodeArrayWithValue,t={},a=0;a<e.length;a++)t[e[a].data.index]=e[a].data,t[e[a].data.index]["depth"]=e[a]["depth"],t[e[a].data.index]["height"]=e[a]["height"];return t},getNodeArrayWithValueObj:function(){return this.nodeArrayWithValueObj},findSelectedObjectById:function(e){var t=this.originalTreeData,a=n(t,e);return a;function n(e,t){if(e.index===t)return e;if("undefined"!==typeof e.children)for(var a=null,i=0;i<e.children.length;i++)if(a=n(e.children[i],t),null!=a&&"undefined"!==typeof a)return a}},computeTreeObjIdArray:function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a].data.index);return t},getAllTreeObjIdArray:function(){return this.allTreeObjIdArray},updateTreeUnitDataset:function(e){this.originalTreeUnitDataStr=JSON.stringify(e),this.addNodexIndex(e),this.originalTreeUnitData=e,this.treeUnitNodeArrayWithValue=this.computeNodeArray(e)},getTreeDataset:function(){var e=this,t={};console.log("self.originalTreeDataStr",e.originalTreeDataStr);try{console.log(Object(pe["a"])(e.originalTreeDataStr)),"string"===typeof e.originalTreeDataStr&&(console.log("parse funtion"),t=JSON.parse(e.originalTreeDataStr))}catch(a){console.log("catch JSON parse error in function getTreeDataset")}return"object"===Object(pe["a"])(e.originalTreeDataStr)&&(t=e.originalTreeDataStr),t},getTreeUnitDataset:function(){return this.originalTreeUnitData},getTreeDSLObject:function(e){return this.selectedDSLObject[e]},getNodeArray:function(){return this.nodeArrayWithValue},getTreeUnitNodeArray:function(){return this.treeUnitNodeArrayWithValue},updateLayoutParas:function(e){this.layoutParas=e},getLayoutParas:function(){return this.layoutParas},updateTreeUnitLayoutParas:function(e){this.treeUnitLayoutParas=e},getTreeUnitLayoutParas:function(){return this.treeUnitLayoutParas},computeNodeArray:function(e){var t=d3.hierarchy(e),a=[];return this.computeValue(t,a),a},addNodexIndex:function(e){var t=[],a=0;t.push(e);while(0!==t.length){var n=t.shift();if("undefined"!==typeof n&&null!=n&&(n.index="index-"+a,a+=1,void 0!==n.children))for(var i=0;i<n.children.length;i++)t.push(n.children[i])}},computeValue:function(e,t){var a=e.children;if(t.push(e),"undefined"!==typeof a){for(var n=0,i=0;i<a.length;i++)this.computeValue(a[i],t),n+=a[i].data.value;"undefined"===typeof e.data.value&&(e.data.value=n)}},addTopDownIndex:function(e){var t=[],a=0;t.push(e);while(0!==t.length){var n=t.shift();if(n.topDownNodeIndex=a,a+=1,void 0!==n.children)for(var i=0;i<n.children.length;i++)t.push(n.children[i])}},addBottomUpIndex:function(e){var t=0;function a(e){var n=e.children;if("undefined"!==typeof n)for(var i=0;i<n.length;i++)a(n[i]);e.bottomUpNodeIndex=t,t+=1}a(e)},updateSingleSelectedDSLObject:function(e,t){this.selectedDSLObject[e]=t},initSelectedDSLObject:function(e){for(var t=this,a=[],n=0;n<t.allTreeTemplateArray.length;n++){var i=t.allTreeTemplateArray[n].treename,r=null;try{r=JSON.parse(JSON.stringify(t.allTreeTemplateArray[n].template))}catch(s){console.log("catch JSON parse error in function initSelectedDSLObject")}null!=r&&-1!==e.indexOf(i)&&(t.selectedDSLObject[i]=r,a.push(i))}return a},updateSelectedDSLObject:function(e,t){this.selectedDSLObject[e]=t},updateTreeDSLContentObject:function(e,t){var a=this.layoutParas.treeDSLContentObj;"undefined"!==typeof a&&"undefined"!==typeof a[e]&&(a[e]=t)},getAllSelectedDSLObject:function(){return this.selectedDSLObject},getSelectedDSLObject:function(e){return this.selectedDSLObject[e]},isDSLObjectExist:function(e){return"undefined"!==typeof this.selectedDSLObject[e]},extractAttrArray:function(){var e=this.originalTreeData,t=[{attrName:"height",attrType:"number"},{attrName:"width",attrType:"number"},{attrName:"rdepth",attrType:"number"},{attrName:"depth",attrType:"number"},{attrName:"index",attrType:"string"}];for(var a in e)if("children"!==a&&"index"!==a){var n=e[a],i=Object(pe["a"])(n);-1===t.map((function(e){return e.attrName})).indexOf(a)&&t.push({attrName:a,attrType:i})}return t},getOriginalTreeData:function(e){for(var t=0;t<this.allTreeDatasetArray.length;t++)if(this.allTreeDatasetArray[t].filename===e)return this.allTreeDatasetArray[t].treedata},getOriginalTreeTemplate:function(e){for(var t=this,a=0;a<t.allTreeTemplateArray.length;a++)if(t.allTreeTemplateArray[a].treename===e){var n={};try{n=JSON.parse(JSON.stringify(t.allTreeTemplateArray[a].template))}catch(i){console.log("catch JSON parse error in function getOriginalTreeTemplate")}return n}},removeOriginalTreeTemplate:function(e){for(var t=0;t<this.allTreeTemplateArray.length;t++)if(this.allTreeTemplateArray[t].treename===e){var a=this.allTreeTemplateArray.splice(t,1);return a[0]}return null},getTreeDatasetArray:function(){return this.allTreeDatasetArray},getTreeTemplateArray:function(){return this.allTreeTemplateArray},getUserTreeTemplateArray:function(){for(var e=this.allTreeTemplateArray.filter((function(e){return"root"!==e.username})),t=[],a=0;a<e.length;a++)try{t.push(JSON.parse(JSON.stringify(e[a])))}catch(n){console.log("catch JSON parse error in function getUserTreeTemplateArray")}return t},getSystemTreeTemplateArray:function(){for(var e=this.allTreeTemplateArray.filter((function(e){return"root"===e.username})),t=[],a=0;a<e.length;a++)try{t.push(JSON.parse(JSON.stringify(e[a])))}catch(n){console.log("catch JSON parse error in function getSystemTreeTemplateArray")}return t},addTreeTemplateArray:function(e){for(var t=this,a=function(a){var n={};try{n="string"===typeof e[a].template?JSON.parse(e[a].template):JSON.parse(JSON.stringify(e[a].template))}catch(s){console.log("catch JSON parse error in function addTreeTemplateArray")}e[a].template=n,y(e[a].template);var i=e[a],r=t.allTreeTemplateArray.findIndex((function(e){return e.treename===i.treename}));-1===r?t.allTreeTemplateArray.push(i):console.log("treeTemplateObj.treename",i.treename)},n=0;n<e.length;n++)a(n)},addTreeDatasetArray:function(e){for(var t=this,a=function(a){var n=e[a],i=t.allTreeDatasetArray.findIndex((function(e){return e.filename===n.filename}));-1===i&&t.allTreeDatasetArray.push(e[a])},n=0;n<e.length;n++)a(n)},addTreeDataset:function(e){var t=this.allTreeDatasetArray.findIndex((function(t){return t.filename===e.filename}));-1===t&&this.allTreeDatasetArray.push(e)},isTemplateExisted:function(e){for(var t=0;t<this.allTreeTemplateArray.length;t++)if(this.allTreeTemplateArray[t].treename===e)return!0;return!1},removeAllUserTemplate:function(){for(var e=0;e<this.allTreeTemplateArray.length;e++)"root"!==this.allTreeTemplateArray[e].username&&(this.allTreeTemplateArray.splice(e,1),e-=1)},removeAllUserDataset:function(){for(var e=0;e<this.allTreeDatasetArray.length;e++)"root"!==this.allTreeDatasetArray[e].username&&(this.allTreeDatasetArray.splice(e,1),e-=1)},getCurrentTreeDSLArray:function(e){var t=[],a=this.getLayoutParas(),n=a.treeIndexWithDSL;for(var i in n)if(-1!==e.indexOf(i)){var r=n[i];-1===t.indexOf(r)&&t.push(r)}return t}},Object(lt["a"])(ot,"updateLayoutParas",(function(e,t){var a=this.getLayoutParas();"undefined"===typeof a.treeIndexWithDSL&&(a.treeIndexWithDSL={});for(var n=a.treeIndexWithDSL,i=0;i<e.length;i++){var r=e[i];n[r]=t}var s={};for(var o in n){var l=n[o];s[l]=this.getTreeDSLObject(l)}a.treeDSLContentObj=s})),Object(lt["a"])(ot,"updateTreeUnitDSLArray",(function(e,t){var a=this.getLayoutParas(),n=[];try{n=JSON.parse(JSON.stringify(t))}catch(o){console.log("catch JSON parse error in function updateTreeUnitDSLArray")}for(var i=a.treeDSLContentObj,r=function(t){var a=e[t];if(0===n.filter((function(e){return e.name===a})).length){var r=!1;self.treeUnitDSLName===a&&(r=!0),n.push({name:a,dslObj:i[a],visible:r})}},s=0;s<e.length;s++)r(s);return n})),ot);var ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"dslPreviewContainer",staticClass:"single-preview-figure-container",on:{mouseover:e.parentMouseover,mouseout:e.parentMouseout,click:e.parentClick}},[a("div",{staticClass:"dsl-figure"},[a("svg",{ref:"dslPreviewCanvas",staticClass:"dsl-preview-canvas"},[a("g",{staticClass:"tree-preview-g",attrs:{id:e.treeGId}})])]),a("div",{staticClass:"dsl-name"},[e._v(e._s(e.dslId))]),a("div",{ref:"previewIconGroup",staticClass:"icon-group",style:e.iconStyleObject},[e.existedInOperation("replace")?a("div",{staticClass:"icon iconfont icon-check operation-replace",class:{hovering:"replace"===e.defaultOperation},on:{click:function(t){e._replaceExistedTree(t)},mouseover:e.childHover}}):e._e(),e.existedInOperation("save2gallery")&&!e.existedInGallery()?a("div",{staticClass:"icon iconfont icon-star operation-save2gallery",class:{hovering:"save2gallery"===e.defaultOperation},on:{click:function(t){e._addTemplate2Library(t)},mouseover:e.childHover}}):e._e(),e.existedInOperation("save2gallery")&&e.existedInGallery()?a("div",{staticClass:"icon iconfont icon-shoucang operation-save2gallery",class:{hovering:"save2gallery"===e.defaultOperation},on:{click:function(t){e._addTemplate2Library(t)},mouseover:e.childHover}}):e._e(),e.existedInOperation("download")?a("div",{staticClass:"icon iconfont icon-xiazai operation-download",class:{hovering:"download"===e.defaultOperation},on:{click:function(t){e._downloadTemplate(t)},mouseover:e.childHover}}):e._e(),e.existedInOperation("add2dsllist")?a("div",{staticClass:"icon iconfont icon-tianjia operation-add2dsllist",class:{hovering:"add2dsllist"===e.defaultOperation},on:{click:function(t){e._add2DSLList(t)},mouseover:e.childHover}}):e._e(),e.existedInOperation("dsllist-remove")?a("div",{staticClass:"icon iconfont icon-iconfontshanchu operation-dsllist-remove",class:{hovering:"dsllist-remove"===e.defaultOperation},on:{click:function(t){e._removeTemplateFromDsllist(t)},mouseover:e.childHover}}):e._e(),e.existedInOperation("gallery-remove")?a("div",{staticClass:"icon iconfont icon-iconfontshanchu operation-gallery-remove",class:{hovering:"gallery-remove"===e.defaultOperation},on:{click:function(t){e._removeTemplateFromGallery(t)},mouseover:e.childHover}}):e._e()])])},pt=[];var ft={name:"SinglePreviewFigure",components:{},props:{dslId:{type:String},getTreeDSLObj:{type:Function},operation:{type:Array},replaceExistedTree:{type:Function},addTemplate2Library:{type:Function},downloadTemplate:{type:Function},removeTemplateFromDsllist:{type:Function},removeTemplateFromGallery:{type:Function},add2DSLList:{type:Function},defaultOperationFunc:{type:Function}},data:function(){return{treeGId:"preview-g",treeViewPosLenObj:{},currentTreeDSLArray:[],AreaData:{},focusedTreeNodeArray:[],DURATION:1e3,iconStyleObject:{left:0,right:0},IconWidth:30,defaultOperation:null,replaceExistedTreeTip:"replace current GoTree template",addTemplate2LibraryTip:"add GoTree template to library",downloadTemplateTip:"download GoTree template",add2DSLListTip:"add GoTree template to DSLList panel",removeTemplateFromDsllistTip:"remove GoTree template from DSLList panel",removeTemplateFromGalleryTip:"remove GoTree template from gallery"}},created:function(){},mounted:function(){var e=this;setTimeout((function(){e.updateElementAttr(),e.initTreePreviewCanvas(),e.getPreViewTreeLayout(),e.adjustIconGroup2Center()}),50)},updated:function(){},watch:{changedDSLNameState:function(){this.treeUnitDSLName===this.dslId&&this.getPreViewTreeLayout()},treePreviewLayoutState:function(){this.treeUnitDSLName===this.dslId&&this.getPreViewTreeLayout()},operation:function(){this.adjustIconGroup2Center()}},computed:Object(o["a"])({},Object(u["d"])(["changedDSLNameState","treeUnitDSLName","treePreviewLayoutState"])),methods:{_replaceExistedTree:function(e){e.stopPropagation(),"undefined"!==typeof this.replaceExistedTree&&this.replaceExistedTree(this.dslId)},_addTemplate2Library:function(e){e.stopPropagation(),"undefined"!==typeof this.addTemplate2Library&&this.addTemplate2Library(this.dslId)},_downloadTemplate:function(e){e.stopPropagation(),"undefined"!==typeof this.downloadTemplate?this.downloadTemplate():this.save_as_json()},_removeTemplateFromDsllist:function(e){e.stopPropagation(),"undefined"!==typeof this.removeTemplateFromDsllist&&this.removeTemplateFromDsllist(this.dslId)},_removeTemplateFromGallery:function(e){e.stopPropagation(),"undefined"!==typeof this.removeTemplateFromGallery&&this.removeTemplateFromGallery(this.dslId)},_add2DSLList:function(e){e.stopPropagation(),"undefined"!==typeof this.add2DSLList&&this.add2DSLList(this.dslId)},childHover:function(e){e.stopPropagation()},parentMouseover:function(){this.operation.length>0&&(this.defaultOperation=this.operation[0])},parentMouseout:function(){this.defaultOperation=null},parentClick:function(){this.defaultOperationFunc(this.dslId)},existedInGallery:function(){var e=sysDatasetObj.isTemplateExisted(this.dslId);return e},existedInOperation:function(e){return-1!==this.operation.indexOf(e)},preview_hovering:function(){console.log("preview_hovering")},save_as_json:function(){var e=this.dslId,t=this.getTreeDSLObj(e),a=Ze(t),n="GoTree-template-"+this.dslId+".json";function i(e,t,a){var n=JSON.stringify(e),i=document.createElement("a"),r=new Blob([n],{type:a});i.href=URL.createObjectURL(r),i.download=t,i.click()}i(a,n,"text/json")},updateElementAttr:function(){this.dslPreviewCanvasHeight=this.$refs.dslPreviewCanvas.clientHeight,this.dslPreviewCanvasWidth=this.$refs.dslPreviewCanvas.clientWidth,this.dslPreviewContainerHeight=this.$refs.dslPreviewContainer.clientHeight,this.dslPreviewContainerWidth=this.$refs.dslPreviewContainer.clientWidth,this.previewIconGroupHeight=this.$refs.previewIconGroup.clientHeight},adjustIconGroup2Center:function(){var e=this.previewIconGroupHeight,t=this.IconWidth,a=this.operation.length;a>1&&(t=2*this.IconWidth);var n=this.dslPreviewContainerHeight,i=this.dslPreviewContainerWidth,r=(i-t)/2,s=(n-e)/2;this.iconStyleObject={left:r+"px",top:s+"px"}},initTreePreviewCanvas:function(){var e=this.dslPreviewCanvasHeight,t=this.dslPreviewCanvasWidth,a=.05*t,n=.05*t,i=.05*e,r=.05*e,s=t-a-n;this.dslPreviewWidth=s;var o=e-i-r;this.dslPreviewHeight=o,d3.select(this.$el).select(".tree-preview-g").attr("transform","translate("+a+","+i+")"),this.treeViewPosLenObj={x:0,y:0,width:s,height:o}},updateCurrentDSLArray:function(){for(var e=[],t=this.focusedTreeObjArray,a=sysDatasetObj.getLayoutParas(),n=a.treeIndexWithDSL,i=0;i<t.length;i++){var r=t[i],s=n[r];"undefined"===typeof s&&(s=n.default),-1===e.indexOf(s)&&e.push(s)}this.currentTreeDSLArray=e},generateTreeIndexWihDSL:function(e,t){for(var a={},n=0;n<e.length;n++){var i=e[n].data.index;a[i]=t}return a},getPreViewTreeLayout:function(){var e=this,t=sysDatasetObj.getTreeUnitDataset();if("x"in this.treeViewPosLenObj){var a=this.dslId;if("undefined"!==typeof t){var n=sysDatasetObj.computeNodeArray(t),i=e.generateTreeIndexWihDSL(n,a);this.focusedTreeNodeArray=n;var r={};if(r[a]=this.getTreeDSLObj(a),"undefined"===typeof r[a])return;var s=me(r),o={hierarchicalData:t,treeDSLContentObj:s,treeIndexWithDSL:i};F(o).then((function(t){e.renderPreViewTree(t,s,i,n,o)}))}}},renderPreViewTree:function(e,t,a,n,i){var r=this.treeViewPosLenObj,s=f(a,t,e,n,r);this.AreaData=s;var o=this.dslPreviewWidth,l=this.dslPreviewHeight;console.log("dslPreviewWidth",o,"dslPreviewHeight",l);var c=ae(s,t,a,r,n),u=Object(d["a"])(c,2),h=u[0],p=u[1];h=fe(h,t,a,n),p=ge(p,s,t,a,n,o,l),this.renderTreeLink(p,i),this.renderTreeNode(h)},renderTreeLink:function(e,t){var a=this,n=a.treeGId,i=d3.select(this.$el).select("#"+n).selectAll(".link").data(e);i.enter().append("path").attr("id",(function(e,t){return"link"+e.beginid+"to"+e.endid})).attr("class",(function(e,t){return"link link-parent-"+e.beginid+" link-child-"+e.endid})).attr("d",(function(e,t){return e.pathAttr})).attr("stroke-width",(function(e,t){return e.link_width})).attr("fill","none");var r=[],s=[],o=[];i.each((function(e,t){var n=d3.select(this).attr("d");null!=n&&"undefined"!==typeof n&&r.push(n);var i=e.pathAttr;null!=i&&"undefined"!==typeof i&&s.push(i),o.push(d3.select(this).node()),d3.select(this).transition().duration(a.DURATION).attr("stroke-width",(function(e,t){return e.link_width})).attr("fill","none")})),i.exit().remove();var l=function(){i.each((function(e,t){d3.select(this).attr("d",e.pathAttr)}))};r.length>0&&s.length>0?r.length===s.length&&null!=r[0]&&null!=s[0]&&"undefined"!==typeof r[0]&&"undefined"!==typeof s[0]&&Object(ne["tweenPaths"])({duration:a.DURATION,complete:l,from:r,to:s,next:function(e,t){return o[t].setAttribute("d",e)}}):l()},renderTreeNodeLabel:function(e){var t=this.treeGId,a=d3.select(this.$el).select("#"+t).selectAll(".node-label").data(e,(function(e,t){return e.id}));a.enter().append("text").attr("class","node-label").attr("id",(function(e){return"node-label-"+e.id})).attr("transform",(function(e){return"translate("+e.labelPos.x+","+e.labelPos.y+")rotate("+e.rotation+")"})).style("text-anchor",(function(e){return e.textAnchor})).style("alignment-baseline","middle").style("font-size",(function(e){return e.fontSize})).text((function(e,t){if("undefined"!==typeof e.labelValue)return e.labelValue.length>2?e.labelValue.substring(0,1)+" .":e.labelValue})),a.transition().duration(self.DURATION).attr("transform",(function(e){return"translate("+e.labelPos.x+","+e.labelPos.y+")rotate("+e.rotation+")"})).style("text-anchor",(function(e){return e.textAnchor})).style("font-size",(function(e){return e.fontSize})).text((function(e,t){if("undefined"!==typeof e.labelValue)return e.labelValue.length>2?e.labelValue.substring(0,1)+" .":e.labelValue})),a.exit().remove()},renderTreeNode:function(e){for(var t=this,a=t.treeGId,n=1,i=!1,r=0;r<e.length;r++)n<e[r].depth&&(n=e[r].depth,console.log("areaDataArray[i].element",e[r].element)),-1!==e[r].element.indexOf("NaN")&&(i=!0);if(!i){var s=d3.select(this.$el).select("#"+a).selectAll(".lineartree-node").data(e,(function(e,t){return e.id}));s.enter().append("path").attr("class","lineartree-node").attr("id",(function(e,t){return"rootnode"+e.id})).attr("d",(function(e,t){return e.element})).attr("fill",(function(e){return e.node_color})).style("stroke-width",(function(e,t){return e.link_width})).style("opacity",1);var o=[],l=[],c=[];s.each((function(e,a){var n=e.element,i=d3.select(this).attr("d");c.push(d3.select(this).node()),o.push(i),l.push(n),d3.select(this).transition().duration(t.DURATION).attr("fill",(function(e){return e.node_color})).style("stroke-width",(function(e,t){return e.link_width})).style("opacity",1)}));var d=function(){s.each((function(e,t){var a=e.element;d3.select(this).attr("d",a)}))};o.length>0&&l.length>0?o.length===l.length&&null!=o[0]&&null!=l[0]&&"undefined"!==typeof o[0]&&"undefined"!==typeof l[0]&&Object(ne["tweenPaths"])({duration:t.DURATION,complete:d,from:o,to:l,next:function(e,t){return c[t].setAttribute("d",e)}}):d(),s.exit().remove()}}}},gt=ft,mt=(a("18b0"),Object(de["a"])(gt,ht,pt,!1,null,"bf58bdf8",null)),yt=mt.exports,vt={name:"DataDialog",components:{SinglePreviewFigure:yt},data:function(){return{systemTemplateOperation:["add2dsllist"],rootSystemTemplateOperation:["add2dsllist","gallery-remove"],userTemplateOperation:["add2dsllist","gallery-remove"],systemTreeTemplateArray:[],userTreeTemplateArray:[],templateNameDialogVisible:!1,realTemplateName:"gotree",exampleName:"gotree",templateNameWarningHint:""}},watch:{treedslDialogUpdate:function(){this.updateSystemTreeTemplateArray(),this.updateUserTreeTemplateArray()}},props:{treedslDialogUpdate:{type:Number}},created:function(){},beforeMount:function(){st();this.updateSystemTreeTemplateArray(),this.updateUserTreeTemplateArray()},mounted:function(){console.log("mounted")},computed:Object(o["a"])({},Object(u["d"])(["selectedDSLArray","userInfoName"])),methods:{addNewTreeDSL:function(){console.log("add new tree dsl")},cancelImportDSLTemplate:function(){this.templateNameDialogVisible=!1},confirmImportDSLTemplate:function(){this.templateNameDialogVisible=!1;var e=this.realTemplateName,t=this.exampleName;this.selectedDSLArray.push(e);var a=sysDatasetObj.getOriginalTreeTemplate(t);a.Name=e,sysDatasetObj.updateSingleSelectedDSLObject(e,a),this.promptMessage("success",e+" has been added in DSLlist view"),this.$cookies.set("selected-dsl-array",this.selectedDSLArray)},getFile:function(){console.log("upload file ok")},getTreeDSLObj:function(e){var t=sysDatasetObj.getOriginalTreeTemplate(e);return t},changeGoTreeName:function(){var e=this.selectedDSLArray,t=this.realTemplateName;-1!==e.indexOf(t)?this.templateNameWarningHint="The template name has been used.":this.templateNameWarningHint=""},removeTemplateFromGallery:function(e){var t=sysDatasetObj.removeOriginalTreeTemplate(e);this.removeOriginalTreeTemplate(e),"Login"!==t.username&&Ve(t),this.updateUserTreeTemplateArray()},updateSystemTreeTemplateArray:function(){this.systemTreeTemplateArray=sysDatasetObj.getSystemTreeTemplateArray(),console.log("systemTreeTemplateArray",this.systemTreeTemplateArray)},updateUserTreeTemplateArray:function(){var e=this.userTreeTemplateArray,t=sysDatasetObj.getUserTreeTemplateArray(),a=this.concatMerge(t,e);this.userTreeTemplateArray=a},removeOriginalTreeTemplate:function(e){for(var t=this.userTreeTemplateArray,a=0;a<t.length;a++)t[a].treename===e&&t.splice(a,1);for(var n=this.systemTreeTemplateArray,i=0;i<n.length;i++)n[i].treename===e&&n.splice(i,1)},initExampleArray:function(e){for(var t=[],a=0;a<e.length;a++){var n=e[a],i={name:n,styleObject:{backgroundImage:"url(examples/"+n+".png)"}};t.push(i)}return t},selectTreeDSL:function(e){var t=this.selectedDSLArray.indexOf(e),a=e;-1!==t&&(a=this.getTreeDSLName(e,this.selectedDSLArray)),this.realTemplateName=a,this.exampleName=e,this.templateNameDialogVisible=!0},promptMessage:function(e,t){this.$message({type:e,message:t})},getTreeDSLName:function(e,t){for(var a=-1,n=0;n<t.length;n++){var i=t[n];if(-1!==i.indexOf(e)){var r=i.replace(e,"");r=""===r?0:+r,isNaN(r)||a<r&&(a=+r)}}var s=e;return a>-1&&(s=e+(+a+1)),s},getTreeTemplateInfo:function(e,t,a){var n=(new Date).toISOString().split("T")[0];return{treename:t,username:a,template:e,date:n}},handleTemplateSuccess:function(e,t){console.log("upload success")},addTreeTemplateCallback:function(e){this.promptMessage(e.type,e.message)},beforeTemplateUpload:function(e){var t=this,a="application/json"===e.type,n=e.size/1024/1024<2,i=sysDatasetObj.getTreeTemplateArray(),r=this.userTreeTemplateArray,s=e.name.replace(".json",""),o=i.findIndex((function(e){return e.treename===s})),l=r.findIndex((function(e){return e.Name===s})),c=-1===o&&-1===l;if(a)if(n){if(c){var d=new FileReader;return d.readAsText(e,"utf-8"),d.onload=function(a){var n=t.userInfoName,i=JSON.parse(this.result),r=e.name.replace(".json","");i.Name=r;var s=t.getTreeTemplateInfo(i,r,n);sysDatasetObj.addTreeTemplateArray([s]),t.userTreeTemplateArray.push(s),"Login"!==t.userInfoName&&We(s,t.addTreeTemplateCallback)},a&&n&&c}this.$message.error("The file name is existed!")}else this.$message.error("The file size can not exceed 2MB!");else this.$message.error("The uploaded file must be JSON format!")},concatMerge:function(e,t){var a=e.concat(t),n=[],i=!0,r=!1,s=void 0;try{for(var o,l=a[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){for(var c=o.value,d=!0,u=0,h=n;u<h.length;u++){var p=h[u];c.treename===p.treename&&(d=!1)}d&&n.push(c)}}catch(f){r=!0,s=f}finally{try{i||null==l.return||l.return()}finally{if(r)throw s}}return n}}},bt=vt,Dt=(a("7fcb"),Object(de["a"])(bt,it,rt,!1,null,"2a3dfe86",null)),St=Dt.exports,Tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"login-dialog"}},[a("el-row",{attrs:{type:"flex",gutter:24,align:"middle"}},[a("el-col",{attrs:{offset:2,span:2}},[a("span",{staticClass:"demo-input-label"},[e._v("Username")])]),a("el-col",{attrs:{offset:2,span:17}},[a("el-input",{model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1)],1),a("el-row",{attrs:{type:"flex",gutter:24,align:"middle"}},[a("el-col",{attrs:{offset:2,span:2}},[a("span",{staticClass:"demo-input-label"},[e._v("Password")])]),a("el-col",{attrs:{offset:2,span:17}},[a("el-input",{attrs:{"show-password":""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("el-row",{attrs:{type:"flex",gutter:24,align:"middle"}},[a("el-col",{attrs:{offset:11,span:12}},[a("el-button",{on:{click:e.open_singup_dialog}},[e._v("Signup")]),a("el-button",{on:{click:e.close_login_dialog}},[e._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("Login")])],1)],1)],1)},xt=[],At={name:"UserDialog",components:{},props:{openSignUpDialog:{type:Function},closeLoginDialog:{type:Function}},data:function(){return{username:"",password:""}},created:function(){},mounted:function(){},computed:Object(o["a"])({},Object(u["d"])(["userInfoObj","userInfoName"])),methods:Object(o["a"])({login:function(){var e={username:this.username,password:this.password};""===this.username?this.promptMessage("error","The user name is empty."):""===this.password?this.promptMessage("error","The user password is empty."):Ue(e,this.loginCallback)},close_login_dialog:function(){this.closeLoginDialog()},open_singup_dialog:function(){var e=this;this.closeLoginDialog(),setTimeout((function(){e.openSignUpDialog()}),500)},promptMessage:function(e,t){this.$message({type:e,message:t})},loginCallback:function(e){var t=this;if(this.promptMessage(e.type,e.message),"success"===e.type){var a=e.userInfoObj,n=a.username;this.closeLoginDialog();var i=$.Deferred(),r=$.Deferred();this.getUserDateset(n,i),this.getUserTemplate(n,r),$.when(i,r).then((function(){t.UPDATE_USER_INFO_OBJ(a),t.UPDATE_USER_INFO_NAME(n),t.$cookies.set("user-info-obj",a)}))}},getUserDateset:function(e,t){var a={username:e};$e(a,this.getUserDatesetCallBack,t)},getUserDatesetCallBack:function(e,t){sysDatasetObj.addTreeDatasetArray(e),t.resolve()},getUserTemplate:function(e,t){var a={username:e};He(a,this.getUserTemplateCallBack,t)},getUserTemplateCallBack:function(e,t){sysDatasetObj.addTreeTemplateArray(e),t.resolve()}},Object(u["c"])(["UPDATE_USER_INFO_NAME","UPDATE_USER_INFO_OBJ"]))},_t=At,Lt=(a("cb87"),Object(de["a"])(_t,Tt,xt,!1,null,null,null)),Ct=Lt.exports,Ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"signup-dialog"}},[a("el-row",{attrs:{type:"flex",gutter:24,align:"middle"}},[a("el-col",{attrs:{offset:2,span:4}},[a("span",{staticClass:"demo-input-label"},[e._v("Username")])]),a("el-col",{attrs:{offset:2,span:15}},[a("el-input",{model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1)],1),a("el-row",{attrs:{type:"flex",gutter:24,align:"middle"}},[a("el-col",{attrs:{offset:2,span:4}},[a("span",{staticClass:"demo-input-label"},[e._v("Password")])]),a("el-col",{attrs:{offset:2,span:15}},[a("el-input",{attrs:{"show-password":""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("el-row",{attrs:{type:"flex",gutter:24,align:"middle"}},[a("el-col",{attrs:{offset:2,span:4}},[a("span",{staticClass:"demo-input-label"},[e._v("Confirm Password")])]),a("el-col",{attrs:{offset:2,span:15}},[a("el-input",{attrs:{"show-password":""},model:{value:e.confirm_password,callback:function(t){e.confirm_password=t},expression:"confirm_password"}})],1)],1),a("el-row",{attrs:{type:"flex",gutter:24,align:"middle"}},[a("el-col",{attrs:{offset:2,span:4}},[a("span",{staticClass:"demo-input-label"},[e._v("Email")])]),a("el-col",{attrs:{offset:2,span:15}},[a("el-input",{model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)],1),a("el-row",{attrs:{type:"flex",gutter:24,align:"middle"}},[a("el-col",{attrs:{offset:14,span:9}},[a("el-button",{on:{click:e.close_signup_dialog}},[e._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:e.signup}},[e._v("Submit")])],1)],1)],1)},Rt=[],Et={name:"UserDialog",components:{},props:{closeSignupDialog:{type:Function}},data:function(){return{appName:"gotree",username:"",password:"",confirm_password:"",email:""}},created:function(){},mounted:function(){},computed:Object(o["a"])({},Object(u["d"])(["userInfoObj","userInfoName"])),methods:Object(o["a"])({signup:function(){var e={username:this.username,password:this.password,email:this.email};""===this.username?this.promptMessage("error","user name is empty"):""===this.password?this.promptMessage("error","password is empty"):this.password!==this.confirm_password?this.promptMessage("error","passwords do not match"):(""===this.email&&this.promptMessage("error","email is empty"),ke(e,this.signupCallback))},close_signup_dialog:function(){this.closeSignupDialog()},promptMessage:function(e,t){this.$message({type:e,message:t})},signupCallback:function(e){if(this.promptMessage(e.type,e.message),"success"===e.type){var t=e.userInfoObj;this.UPDATE_USER_INFO_OBJ(t);var a=t.username;this.UPDATE_USER_INFO_NAME(a),this.closeSignupDialog(),this.getUserDateset(a),this.getUserTemplate(a)}},getUserDateset:function(e){var t={username:e};$e(t,this.getUserDatesetCallBack)},getUserDatesetCallBack:function(e){sysDatasetObj.addTreeDatasetArray(e)},getUserTemplate:function(e){var t={username:e};He(t,this.getUserTemplateCallBack)},getUserTemplateCallBack:function(e){sysDatasetObj.addTreeTemplateArray(e)}},Object(u["c"])(["UPDATE_USER_INFO_NAME","UPDATE_USER_INFO_OBJ"]))},jt=Et,Pt=(a("9522"),Object(de["a"])(jt,Ot,Rt,!1,null,null,null)),wt=Pt.exports,Nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"user-info-dialog"}},[a("el-row",{attrs:{type:"flex",gutter:24,align:"middle"}},[a("el-col",{attrs:{offset:2,span:2}},[a("span",{staticClass:"demo-input-label"},[e._v("Username: ")])]),a("el-col",{attrs:{offset:2,span:17}},[e._v("\n        \t"+e._s(null!=e.userInfoObj?e.userInfoObj.username:"")+"\n        ")])],1),a("el-row",{attrs:{type:"flex",gutter:24,align:"middle"}},[a("el-col",{attrs:{offset:2,span:2}},[a("span",{staticClass:"demo-input-label"},[e._v("Password: ")])]),a("el-col",{attrs:{offset:2,span:17}},[e._v("\n        \t"+e._s(null!=e.userInfoObj?e.userInfoObj.password:"")+"\n        ")])],1),a("el-row",{attrs:{type:"flex",gutter:24,align:"middle"}},[a("el-col",{attrs:{offset:2,span:2}},[a("span",{staticClass:"demo-input-label"},[e._v("Email: ")])]),a("el-col",{attrs:{offset:2,span:17}},[e._v("\n        \t"+e._s(null!=e.userInfoObj?e.userInfoObj.email:"")+"\n        ")])],1),a("el-row",{staticClass:"table-title",attrs:{type:"flex",gutter:24,align:"middle"}},[a("el-col",{attrs:{offset:2,span:2}},[a("span",{staticClass:"demo-input-label"},[e._v("Dataset: ")])]),a("el-col",{attrs:{offset:2,span:17}},[e._v("\n        \t"+e._s(e.treeDataArray.filter((function(t){return t.username===e.userInfoName})).length)+"\n        ")])],1),a("el-row",{attrs:{type:"flex",gutter:24,align:"middle"}},[a("el-col",{attrs:{offset:2,span:20}},[a("el-table",{ref:"treeDataTable",attrs:{"highlight-current-row":"","default-sort":{prop:"date",order:"ascending"},data:e.treeDataArray.filter((function(t){return t.username===e.userInfoName})),"max-height":"120",border:"",stripe:""}},[a("el-table-column",{attrs:{property:"filename",label:"FileName",sortable:""}}),a("el-table-column",{attrs:{property:"nodeNum",label:"NodeNum",sortable:""}}),a("el-table-column",{attrs:{property:"depth",label:"Depth",sortable:"",width:"95","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{property:"date",label:"Date",sortable:"",width:"80","show-overflow-tooltip":""}})],1)],1)],1),a("el-row",{staticClass:"table-title",attrs:{type:"flex",gutter:24,align:"middle"}},[a("el-col",{attrs:{offset:2,span:2}},[a("span",{staticClass:"demo-input-label"},[e._v("Tree Template: ")])]),a("el-col",{attrs:{offset:2,span:17}},[e._v("\n        \t"+e._s(e.treeTemplateArray.filter((function(t){return t.username===e.userInfoName})).length)+"\n        ")])],1),a("el-row",{attrs:{type:"flex",gutter:24,align:"middle"}},[a("el-col",{attrs:{offset:2,span:20}},[a("el-table",{ref:"treeDataTable",attrs:{"highlight-current-row":"","default-sort":{prop:"date",order:"ascending"},data:e.treeTemplateArray.filter((function(t){return t.username===e.userInfoName})),"max-height":"120",border:"",stripe:""}},[a("el-table-column",{attrs:{property:"treename",label:"Template",sortable:""}}),a("el-table-column",{attrs:{property:"date",label:"Date",sortable:"","show-overflow-tooltip":""}})],1)],1)],1),a("el-row",{attrs:{type:"flex",gutter:24,align:"middle"}},[a("el-col",{attrs:{offset:14,span:9}},[a("el-button",{on:{click:e.logout}},[e._v("logout")]),a("el-button",{attrs:{type:"primary"},on:{click:e.closeUserInfoDialog}},[e._v("OK")])],1)],1)],1)},Ut=[],kt={name:"UserDialog",components:{},props:{closeUserInfoDialog:{type:Function}},data:function(){return{username:"",password:"",treeDataArray:sysDatasetObj.getTreeDatasetArray(),treeTemplateArray:sysDatasetObj.getTreeTemplateArray()}},created:function(){},mounted:function(){},computed:Object(o["a"])({},Object(u["d"])(["userInfoObj","userInfoName","selectedDSLArray"])),methods:Object(o["a"])({promptMessage:function(e,t){this.$message({type:e,message:t})},logout:function(){sysDatasetObj.removeAllUserTemplate(),sysDatasetObj.removeAllUserDataset(),this.removeAllUserSelectedDSL(),this.UPDATE_USER_INFO_NAME("Login"),this.UPDATE_USER_INFO_OBJ(null),this.closeUserInfoDialog(),this.promptMessage("success","Logged out"),this.$cookies.remove("user-info-obj"),this.$cookies.remove("selected-data-name"),this.$cookies.remove("selected-dsl-array")},removeAllUserSelectedDSL:function(){var e=sysDatasetObj.getSystemTreeTemplateArray(),t=e.map((function(e){return e.treename})),a=this.selectedDSLArray.filter((function(e){return-1!==t.indexOf(e)}));this.UPDATE_SELECTED_DSL_ARRAY(a)}},Object(u["c"])(["UPDATE_USER_INFO_NAME","UPDATE_USER_INFO_OBJ","UPDATE_SELECTED_DSL_ARRAY"]))},It=kt,Mt=(a("7803"),Object(de["a"])(It,Nt,Ut,!1,null,null,null)),Wt=Mt.exports,Vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"coord-container"},[e._m(0),a("div",{staticClass:"component-container"},[a("div",{staticClass:"component-panel",attrs:{id:"coordinate-panel"}},e._l(e.coordArray,(function(t){return a("div",{staticClass:"component",attrs:{id:t.id,type:e.coordComponentType}},[a("div",{staticClass:"sketch-figure"},[e.showCoordComponents?a("CoordSketchFigure",{attrs:{coordType:t.name}}):e._e()],1),a("div",{staticClass:"component-title"},[a("span",{staticClass:"component-title-container",attrs:{id:"coord-title"}},[e._v(e._s(t.name))])])])})),0)])])},$t=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"label"},[a("span",{staticClass:"inner-title"},[e._v("Coordinate System")])])}],Ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("svg",{staticClass:"sketch-figure-svg"})},Yt=[],Xt={name:"CartesianSketchFigure",components:{},data:function(){return{coordArray:["cartesian","polar","triangle","rectangle"]}},props:{coordType:{type:String}},watch:{coordType:function(){this.renderCoordSketchFigure()}},created:function(){},beforeMount:function(){},mounted:function(){this.renderCoordSketchFigure()},computed:{},methods:{renderCoordSketchFigure:function(){var e=.08*+$(this.$el).width(),t=.08*+$(this.$el).width(),a=.08*+$(this.$el).height(),n=.08*+$(this.$el).height(),i=$(this.$el).width()-e-t,r=$(this.$el).height()-a-n;d3.select(this.$el).select(".coord-canvas").remove();var s=d3.select(this.$el).append("g").attr("transform","translate("+e+","+a+")").attr("class","coord-canvas");switch(this.coordType){case"cartesian":o();break;case"polar":l();break;case"triangle":c();break;case"rectangle":d();break}function o(){s.append("svg:defs").append("svg:marker").attr("id","arrow").attr("refX",2).attr("refY",6).attr("markerWidth",13).attr("markerHeight",13).attr("orient","auto").append("svg:path").attr("d","M2,2 L2,11 L10,6 L2,2"),s.append("line").attr("class","axis").attr("x1",0).attr("y1",r/2).attr("x2",.9*i).attr("y2",r/2).attr("marker-end","url(#arrow)"),s.append("line").attr("class","axis").attr("x1",i/2).attr("y1",r).attr("x2",i/2).attr("y2",.1*r).attr("marker-end","url(#arrow)")}function l(){var e=i>r?r/2:i/2;s.append("line").attr("class","polar-axis").attr("x1",0).attr("y1",r/2).attr("x2",i).attr("y2",r/2),s.append("circle").attr("class","polar-circle").attr("cx",i/2).attr("cy",r/2).attr("r",2*e/3),s.append("line").attr("class","axis").attr("x1",i/2).attr("y1",r/2).attr("x2",.9*i).attr("y2",.1*r).attr("marker-end","url(#arrow)")}function c(){var e=i>r?r:i,t=d3.symbol().type(d3.symbolTriangle).size(e*e/3);s.append("line").attr("class","polar-axis").attr("x1",0).attr("y1",r/2).attr("x2",i).attr("y2",r/2),s.append("path").attr("class","polar-axis").attr("d",t).attr("transform","translate("+i/2+","+.58*r+")"),s.append("line").attr("class","axis").attr("x1",i/2).attr("y1",r/2).attr("x2",.9*i).attr("y2",.1*r).attr("marker-end","url(#arrow)")}function d(){var e=3*(i>r?r:i)/4,t=(i-e)/2,a=(r-e)/2;d3.symbol().type(d3.symbolTriangle).size(e*e/3);s.append("line").attr("class","polar-axis").attr("x1",0).attr("y1",r/2).attr("x2",i).attr("y2",r/2),s.append("rect").attr("class","polar-axis").attr("x",t).attr("y",a).attr("width",e).attr("height",e),s.append("line").attr("class","axis").attr("x1",i/2).attr("y1",r/2).attr("x2",.9*i).attr("y2",.1*r).attr("marker-end","url(#arrow)")}}}},Ft=Xt,zt=(a("62b4"),Object(de["a"])(Ft,Ht,Yt,!1,null,null,null)),Bt=zt.exports,Gt={name:"CoordinateSystem",components:{CoordSketchFigure:Bt},data:function(){return{coordArray:[{id:"cartesian",name:"cartesian"},{id:"polar",name:"polar"}],coordComponentType:"CoordinateSystem",elementNodeArray:[],elementLinkArray:[],coordinateSystemArray:[],showCoordComponents:!1}},watch:{treeUnitDSLName:function(){var e=this;$(".coord-container .component").removeClass("selected"),$(".coord-container .component").removeClass("unhighlight");var t=e.treeUnitDSLArray.filter((function(t,a){return t.name===e.treeUnitDSLName}));if(t.length>0){var a=t[0].dslObj;if("undefined"!==typeof a.CoordinateSystem){var n=a.CoordinateSystem.Category;"undefined"!==typeof n&&($(".coord-container .component").addClass("unhighlight"),$(".coord-container .component#"+n).addClass("selected"))}}}},created:function(){},beforeMount:function(){$(".layout-container").width()},mounted:function(){this.initCoordPanel(),this.showCoordComponents=!0,this.initClickEvent()},computed:Object(o["a"])({},Object(u["d"])(["coordComponent","treeUnitDSLName","treeUnitDSLArray"])),methods:Object(o["a"])({highlightSelectedComponent:function(e){var t="CoordinateSystem";"undefined"!==typeof e&&($(".coord-container .component#"+e).hasClass("selected")?($(".coord-container .component#"+e).removeClass("selected"),this.removeDSLComponent(t)):($(".coord-container .component").removeClass("selected"),$(".coord-container .component#"+e).addClass("selected"),this.addCoordComponent(e))),$(".coord-container .selected").length>0?$(".coord-container .component").addClass("unhighlight"):$(".coord-container .component").removeClass("unhighlight")},addCoordComponent:function(e){var t={CoordinateSystem:{Category:e}};this.setDSLComponent(t)},initClickEvent:function(){var e=this;$(".coord-container .component").click((function(){$(this).attr("type");var t=$(this).attr("id");e.highlightSelectedComponent(t)}))},initCoordPanel:function(){var e="25%",t="6.25%",a=.25,n=$(".coord-container .component-container").width();$(".coord-container .el-tabs__content").height();$("#coordinate-panel .component").css("width",e),$("#coordinate-panel .component").css("margin-left",t);var i=n*a,r=1.14*i;$("#coordinate-panel .component").css("height",r+"px");var s=r/5;$("#coordinate-panel .component-title").css("height",s);var o=4*r/5;$("#coordinate-panel .sketch-figure").css("height",o)}},Object(u["c"])(["UPDATE_DSL_COMPONENT_OBJECT_STATE","UPDATE_COORD"]),{},Object(u["b"])(["setDSLComponent","removeDSLComponent"]))},Jt=Gt,Kt=(a("8828"),Object(de["a"])(Jt,Vt,$t,!1,null,"577f5545",null)),Qt=Kt.exports,qt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layout-container"},[e._m(0),a("div",{staticClass:"component-container"},[a("el-tabs",{attrs:{type:"card",stretch:""},on:{"tab-click":e.handleClick}},[a("el-tab-pane",{attrs:{label:e.root}},[a("div",{staticClass:"component-panel",attrs:{id:"root-panel"}},e._l(e.layoutRootArray,(function(t){return a("div",{staticClass:"component",attrs:{id:t.id,type:e.rootLayoutComponentType}},[a("div",{staticClass:"sketch-figure"},[e.showRootComponents?a("layoutSketchFigure",{attrs:{layout:t.name,category:"root"}}):e._e()],1),a("div",{staticClass:"component-title"},[a("span",{staticClass:"component-title-container",attrs:{id:"root-title"}},[e._v(e._s(t.name))])])])})),0)]),a("el-tab-pane",{attrs:{label:e.subtree}},[a("div",{staticClass:"component-panel",attrs:{id:"subtree-panel"}},e._l(e.layoutSubtreeArray,(function(t){return a("div",{staticClass:"component",attrs:{id:t.id,type:e.subtreeLayoutComponentType}},[a("div",{staticClass:"sketch-figure"},[e.showSubtreeComponents?a("LayoutSketchFigure",{attrs:{layout:t.name,category:"subtree"}}):e._e()],1),a("div",{staticClass:"component-title"},[a("span",{staticClass:"component-title-container",attrs:{id:"subtree-title"}},[e._v(e._s(t.name))])])])})),0)])],1)],1)])},Zt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"label"},[a("span",{staticClass:"inner-title"},[e._v("Layout")])])}],ea=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("svg",{staticClass:"sketch-figure-svg"})},ta=[],aa={name:"LayoutSketchFigure",components:{},data:function(){return{layoutRootArray:["X include | Y within","X juxtapose | Y within","X within | Y within","X include | Y juxtapose","X juxtapose | Y juxtapose","X within | Y juxtapose","X include | Y include","X juxtapose | Y include","X within | Y include"],layoutSubtreeArray:["X align | Y flatten","X flatten | Y flatten","X align | Y align","X flatten | Y align"],DURATION:1e3}},props:{category:{type:String},layout:{type:String}},created:function(){},beforeMount:function(){},watch:{layout:function(){"root"===this.category?this.renderRootSketchFigure():"subtree"===this.category&&this.renderSubtreeSketchFigure()}},mounted:function(){"root"===this.category?(this.appendRootG(),this.renderRootSketchFigure()):"subtree"===this.category&&(this.appendSubtreeG(),this.renderSubtreeSketchFigure())},computed:{},methods:{appendRootG:function(){var e=.08*+$(this.$el).width(),t=.08*+$(this.$el).width(),a=.08*+$(this.$el).height(),n=.08*+$(this.$el).height();this.canvasWidth=$(this.$el).width()-e-t,this.canvasHeight=$(this.$el).height()-a-n,d3.select(this.$el).append("g").attr("class","root-g").attr("transform","translate("+e+","+a+")")},appendSubtreeG:function(){var e=.08*+$(this.$el).width(),t=.08*+$(this.$el).width(),a=.08*+$(this.$el).height(),n=.08*+$(this.$el).height();this.canvasWidth=$(this.$el).width()-e-t,this.canvasHeight=$(this.$el).height()-a-n;d3.select(this.$el).append("g").attr("class","subtree-g").attr("transform","translate("+e+","+a+")")},renderRootSketchFigure:function(){var e=this.layout.split(" | "),t=e[0].replace("X ",""),a=e[1].replace("Y ",""),n=this.computeRootXRange(t),i=this.computeSGXRange(t),r=this.computeRootYRange(a),s=this.computeSGYRange(a),o=this.canvasHeight,l=this.canvasWidth,c=d3.select(this.$el).select(".root-g");c.select(".root").empty()?c.append("rect").attr("class","root").attr("x",n[0]*l).attr("width",(n[1]-n[0])*l).attr("y",r[0]*o).attr("height",(r[1]-r[0])*o):c.select(".root").transition().duration(this.DURATION).attr("x",n[0]*l).attr("width",(n[1]-n[0])*l).attr("y",r[0]*o).attr("height",(r[1]-r[0])*o),c.select(".sg").empty()?c.append("rect").attr("class","sg").attr("x",i[0]*l).attr("width",(i[1]-i[0])*l).attr("y",s[0]*o).attr("height",(s[1]-s[0])*o):c.select(".sg").transition().duration(this.DURATION).attr("x",i[0]*l).attr("width",(i[1]-i[0])*l).attr("y",s[0]*o).attr("height",(s[1]-s[0])*o);this.computeMarkXRange(t)},renderSubtreeSketchFigure:function(){var e=this.layout.split(" | "),t=e[0].replace("X ",""),a=e[1].replace("Y ",""),n=this.computeNode1XRange(t),i=this.computeNode2XRange(t),r=this.computeNode1YRange(a),s=this.computeNode2YRange(a),o=this.canvasHeight,l=this.canvasWidth,c=d3.select(this.$el).select(".subtree-g");c.select(".subtree1").empty()?c.append("rect").attr("class","subtree subtree1").attr("x",n[0]*l).attr("width",(n[1]-n[0])*l).attr("y",r[0]*o).attr("height",(r[1]-r[0])*o):c.select(".subtree").transition().duration(this.DURATION).attr("x",n[0]*l).attr("width",(n[1]-n[0])*l).attr("y",r[0]*o).attr("height",(r[1]-r[0])*o),c.select(".subtree2").empty()?c.append("rect").attr("class","subtree subtree2").attr("x",i[0]*l).attr("width",(i[1]-i[0])*l).attr("y",s[0]*o).attr("height",(s[1]-s[0])*o):c.select(".subtree2").transition().duration(this.DURATION).attr("x",i[0]*l).attr("width",(i[1]-i[0])*l).attr("y",s[0]*o).attr("height",(s[1]-s[0])*o)},computeRootXRange:function(e){switch(e){case"include":return[0,1];case"juxtapose":return[0,.2];case"within":return[.4,.6]}},computeSGXRange:function(e){switch(e){case"include":return[.2,.8];case"juxtapose":return[.4,1];case"within":return[0,1]}},computeRootYRange:function(e){switch(e){case"include":return[0,1];case"juxtapose":return[0,.2];case"within":return[.4,.6]}},computeSGYRange:function(e){switch(e){case"include":return[.2,.8];case"juxtapose":return[.4,1];case"within":return[0,1]}},computeNode1XRange:function(e){switch(e){case"align":return[0,1];case"flatten":return[0,.4]}},computeNode2XRange:function(e){switch(e){case"align":return[.25,.75];case"flatten":return[.6,1]}},computeNode1YRange:function(e){switch(e){case"align":return[0,1];case"flatten":return[0,.4]}},computeNode2YRange:function(e){switch(e){case"align":return[.25,.75];case"flatten":return[.6,1]}},computeMarkXRange:function(e){switch(e){case"include":return[[0,.2],[.8,1]];case"juxtapose":return[.2,.4];case"within":return.5}},computeMarkYRange:function(e){switch(e){case"include":return[[0,.2],[.8,1]];case"juxtapose":return[.2,.4];case"within":return.5}}}},na=aa,ia=(a("06e9"),Object(de["a"])(na,ea,ta,!1,null,null,null)),ra=ia.exports,sa={name:"Layout",components:{LayoutSketchFigure:ra},data:function(){return{rootLayoutComponentType:"Root",subtreeLayoutComponentType:"Subtree",layoutRootArray:[{id:"x-include-y-within",name:"X include | Y within"},{id:"x-juxtapose-y-within",name:"X juxtapose | Y within"},{id:"x-within-y-within",name:"X within | Y within"},{id:"x-include-y-juxtapose",name:"X include | Y juxtapose"},{id:"x-juxtapose-y-juxtapose",name:"X juxtapose | Y juxtapose"},{id:"x-within-y-juxtapose",name:"X within | Y juxtapose"},{id:"x-include-y-include",name:"X include | Y include"},{id:"x-juxtapose-y-include",name:"X juxtapose | Y include"},{id:"x-within-y-include",name:"X within | Y include"}],layoutSubtreeArray:[{id:"x-align-y-flatten",name:"X align | Y flatten"},{id:"x-flatten-y-flatten",name:"X flatten | Y flatten"},{id:"x-align-y-align",name:"X align | Y align"},{id:"x-flatten-y-align",name:"X flatten | Y align"}],elementNodeArray:[],elementLinkArray:[],coordinateSystemArray:[],padding:2,showRootComponents:!1,showSubtreeComponents:!1,root:"root-subtree group",subtree:"subtree",layout3_3:{lengthPercentage:"25%",marginPercentage:"6.25%",lengthNum:.25,marginNum:.0625},layout2_2:{lengthPercentage:"40%",marginPercentage:"6.7%",lengthNum:.4,marginNum:.067}}},watch:{treeUnitDSLName:function(){var e=this;$("#root-panel .component").removeClass("selected"),$("#root-panel .component").removeClass("unhighlight"),$("#subtree-panel .component").removeClass("selected"),$("#subtree-panel .component").removeClass("unhighlight"),console.log("self.treeUnitDSLArray",e.treeUnitDSLArray);var t=e.treeUnitDSLArray.filter((function(t,a){return t.name===e.treeUnitDSLName}));if(t.length>0){var a=t[0].dslObj,n=a.Layout;if("undefined"!==typeof n){if("undefined"!==typeof n.X&&"undefined"!==typeof n.X.Root){var i="x-"+n.X.Root.Relation+"-y-"+n.Y.Root.Relation;$("#root-panel .component").addClass("unhighlight"),$("#root-panel .component#"+i).addClass("selected")}if("undefined"!==typeof n.X&&"undefined"!==typeof n.X.Subtree){var r="x-"+n.X.Subtree.Relation+"-y-"+n.Y.Subtree.Relation;$("#subtree-panel .component").addClass("unhighlight"),$("#subtree-panel .component#"+r).addClass("selected")}}}}},created:function(){},beforeMount:function(){this.root=this.root+" ("+this.layoutRootArray.length+")",this.subtree=this.subtree+" ("+this.layoutSubtreeArray.length+")";$(".layout-container").width()},mounted:function(){var e=+$(".component-container").width(),t=+$(".component-container").height();t>2*e?this.initRootPanelSize(this.layout2_2):this.initRootPanelSize(this.layout3_3),this.initSubtreePanelize(this.layout2_2),this.showRootComponents=!0,this.initClickEvent()},computed:Object(o["a"])({},Object(u["d"])(["rootLayoutComponent","subtreeLayoutComponent","treeUnitDSLName","treeUnitDSLArray"])),methods:Object(o["a"])({handleClick:function(e,t){e.label===this.subtree&&(this.showSubtreeComponents=!0)},initClickEvent:function(){var e=this;$(".layout-container .component").click((function(){var t=$(this).attr("type"),a=$(this).attr("id");t===e.rootLayoutComponentType?e.highlightRootLayoutComponent(a):t===e.subtreeLayoutComponentType&&e.highlightSubtreeLayoutComponent(a)}))},highlightRootLayoutComponent:function(e){var t="Root",a=e.split("-");"undefined"!==typeof e&&($("#root-panel .component#"+e).hasClass("selected")?($("#root-panel .component#"+e).removeClass("selected"),this.removeDSLComponent(t)):($("#root-panel .component").removeClass("selected"),$("#root-panel .component#"+e).addClass("selected"),this.addRootLayoutComponent(a))),$("#root-panel .selected").length>0?$("#root-panel .component").addClass("unhighlight"):$("#root-panel .component").removeClass("unhighlight")},highlightSubtreeLayoutComponent:function(e){var t="Subtree",a=e.split("-");"undefined"!==typeof e&&($("#subtree-panel .component#"+e).hasClass("selected")?($("#subtree-panel .component#"+e).removeClass("selected"),this.removeDSLComponent(t)):($("#subtree-panel .component").removeClass("selected"),$("#subtree-panel .component#"+e).addClass("selected"),this.addSubtreeLayoutComponent(a))),$("#subtree-panel .selected").length>0?$("#subtree-panel .component").addClass("unhighlight"):$("#subtree-panel .component").removeClass("unhighlight")},addRootLayoutComponent:function(e){var t={Layout:{X:{Root:{Relation:e[1]}},Y:{Root:{Relation:e[3]}}}};this.setDSLComponent(t)},addSubtreeLayoutComponent:function(e){var t={Layout:{X:{Subtree:{Relation:e[1]}},Y:{Subtree:{Relation:e[3]}}}};this.setDSLComponent(t)},initRootPanelSize:function(e){var t=e.lengthPercentage,a=e.marginPercentage,n=e.lengthNum,i=(e.marginNum,$(".component-container").width());$(".el-tabs__content").height();$("#root-panel .component").css("width",t),$("#root-panel .component").css("margin-left",a);var r=i*n,s=1.14*r;$("#root-panel .component").css("height",s+"px");var o=s/5;$("#root-panel .component-title").css("height",o);var l=4*s/5;$("#root-panel .sketch-figure").css("height",l)},initSubtreePanelize:function(e){var t=e.lengthPercentage,a=e.marginPercentage,n=e.lengthNum,i=(e.marginNum,$(".component-container").width());$(".el-tabs__content").height();$("#subtree-panel .component").css("width",t),$("#subtree-panel .component").css("margin-left",a);var r=i*n,s=1.14*r;$("#subtree-panel .component").css("height",s+"px");var o=s/5;$("#subtree-panel .component-title").css("height",o);var l=4*s/5;$("#subtree-panel .sketch-figure").css("height",l)}},Object(u["c"])(["UPDATE_ROOT_LAYOUT","UPDATE_SUBTREE_LAYOUT"]),{},Object(u["b"])(["setDSLComponent","removeDSLComponent"]))},oa=sa,la=(a("71b3"),Object(de["a"])(oa,qt,Zt,!1,null,null,null)),ca=la.exports,da=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"element-container"},[e._m(0),a("div",{staticClass:"component-container"},[a("el-tabs",{attrs:{type:"card",stretch:""},on:{"tab-click":e.handleClick}},[a("el-tab-pane",{attrs:{label:e.nodeLabel}},[a("div",{staticClass:"component-panel",attrs:{id:"node-panel"}},e._l(e.nodeArray,(function(t){return a("div",{staticClass:"component",attrs:{id:t.id,name:t.name,type:e.nodeComponentType}},[a("div",{staticClass:"sketch-figure"},[e.showNodeComponents?a("ElementSketchFigure",{attrs:{elementType:t.name,category:"node"}}):e._e()],1),a("div",{staticClass:"component-title"},[a("span",{staticClass:"component-title-container",attrs:{id:"node-title"}},[e._v(e._s(t.name))])])])})),0)]),a("el-tab-pane",{attrs:{label:e.linkLabel}},[a("div",{staticClass:"component-panel",attrs:{id:"link-panel"}},e._l(e.linkArray,(function(t){return a("div",{staticClass:"component",attrs:{id:t.id,name:t.name,type:e.linkComponentType}},[a("div",{staticClass:"sketch-figure"},[e.showLinkComponents?a("ElementSketchFigure",{attrs:{elementType:t.name,category:"link"}}):e._e()],1),a("div",{staticClass:"component-title"},[a("span",{staticClass:"component-title-container",attrs:{id:"link-title"}},[e._v(e._s(t.name))])])])})),0)])],1)],1)])},ua=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"label"},[a("span",{staticClass:"inner-title"},[e._v("Element")])])}],ha=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("svg",{staticClass:"sketch-figure-svg"})},pa=[],fa={name:"LayoutSketchFigure",components:{},data:function(){return{nodeArray:["circle","rectangle","triangle","ellipse"],linkArray:["straight","curve","curveStepBefore","curveStepAfter","orthogonal","arccurve"]}},props:{category:{type:String},elementType:{type:String}},watch:{elementType:function(){"node"===this.category?this.renderNodeSketchFigure():"link"===this.category&&this.renderLinkSketchFigure()}},created:function(){},beforeMount:function(){},mounted:function(){"node"===this.category?this.renderNodeSketchFigure():"link"===this.category&&this.renderLinkSketchFigure()},computed:{},methods:{renderNodeSketchFigure:function(){var e=.08*+$(this.$el).width(),t=.08*+$(this.$el).width(),a=.08*+$(this.$el).height(),n=.08*+$(this.$el).height(),i=$(this.$el).width()-e-t,r=$(this.$el).height()-a-n;d3.select(this.$el).select(".node-canvas").remove();var s=d3.select(this.$el).append("g").attr("transform","translate("+e+","+a+")").attr("class","node-canvas");switch(this.elementType){case"circle":o();break;case"rectangle":l();break;case"triangle":c();break;case"ellipse":d();break}function o(){var e=i>r?r/2:i/2;s.append("circle").attr("class","node").attr("cx",i/2).attr("cy",r/2).attr("r",e)}function l(){var e=i>r?r:i,t=(i-e)/2,a=(r-e)/2;s.append("rect").attr("class","node").attr("x",t).attr("y",a).attr("width",e).attr("height",e)}function c(){var e=i>r?r:i,t=d3.symbol().type(d3.symbolTriangle).size(e*e/2);s.append("path").attr("class","node").attr("d",t).attr("transform","translate("+i/2+","+2*r/3+")")}function d(){s.append("ellipse").attr("class","node").attr("cx",i/2).attr("cy",r/2).attr("rx",i/2).attr("ry",r/4)}},renderLinkSketchFigure:function(){var e=this,t=.08*+$(this.$el).width(),a=.08*+$(this.$el).width(),n=.08*+$(this.$el).height(),i=.08*+$(this.$el).height(),r=$(this.$el).width()-t-a,s=$(this.$el).height()-n-i;d3.select(this.$el).select(".link-canvas").remove();var o=d3.select(this.$el).append("g").attr("transform","translate("+t+","+n+")").attr("class","link-canvas"),l=r>s?s:r,c=l/15,d=2*c,u=2*c,h=r-2*c,p=s-2*c,f=g();function g(){var t,a,n;switch(e.elementType){case"straight":t=[],t.push([d,u]),t.push([h,p]),a=d3.line(),n=a(t);break;case"curve":t={source:[d,u],target:[h,p]},a=d3.linkVertical(),n=a(t);break;case"curveStepBefore":t=[],t.push([d,u]),t.push([h,p]),a=d3.line().curve(d3.curveStepBefore),n=a(t),console.log("lineData curveStepBefore",n);break;case"curveStepAfter":t=[],t.push([d,u]),t.push([h,p]),a=d3.line().curve(d3.curveStepAfter),n=a(t),console.log("lineData curveStepAfter",n);break;case"orthogonal":t=[],t.push([d,u]),t.push([d,(u+p)/2]),t.push([h,(u+p)/2]),t.push([h,p]),a=d3.line(),n=a(t);break;case"arccurve":d=2*c,h=r-2*c,u=3*s/4,p=3*s/4;var i=(d-h)/2,o=d,l=u,f=h,g=p;i<0&&(i=-i,o=h,l=p,f=d,g=u),n="M"+o+","+l+" A"+i+","+i+" 0 0 0 "+f+","+g;break}return n}o.append("path").attr("class","node-link").attr("d",f),o.append("circle").attr("class","node").attr("cx",d).attr("cy",u).attr("r",c),o.append("circle").attr("class","node").attr("cx",h).attr("cy",p).attr("r",c)}}},ga=fa,ma=(a("6aea"),Object(de["a"])(ga,ha,pa,!1,null,null,null)),ya=ma.exports,va={name:"Element",components:{ElementSketchFigure:ya},data:function(){return{nodeArray:[{id:"circle",name:"circle"},{id:"rectangle",name:"rectangle"},{id:"triangle",name:"triangle"},{id:"ellipse",name:"ellipse"}],linkArray:[{id:"straight",name:"straight"},{id:"curve",name:"curve"},{id:"curve-step-before",name:"curveStepBefore"},{id:"curve-step-after",name:"curveStepAfter"},{id:"orthogonal",name:"orthogonal"},{id:"arccurve",name:"arccurve"}],nodeComponentType:"Node",linkComponentType:"Link",elementNodeArray:[],elementLinkArray:[],coordinateSystemArray:[],showNodeComponents:!1,showLinkComponents:!1,nodeLabel:"Node",linkLabel:"Link"}},watch:{treeUnitDSLName:function(){var e=this;$("#link-panel .component").removeClass("selected"),$("#link-panel .component").removeClass("unhighlight"),$("#node-panel .component").removeClass("selected"),$("#node-panel .component").removeClass("unhighlight");var t=e.treeUnitDSLArray.filter((function(t,a){return t.name===e.treeUnitDSLName}));if(t.length>0){var a=t[0].dslObj;if("undefined"!==typeof a.Element){var n=a.Element.Link,i=a.Element.Node;"undefined"!==typeof n&&($("#link-panel .component").addClass("unhighlight"),$("#link-panel .component#"+n).addClass("selected")),"undefined"!==typeof i&&($("#node-panel .component").addClass("unhighlight"),$("#node-panel .component#"+i).addClass("selected"))}}}},created:function(){},beforeMount:function(){$(".layout-container").width();this.nodeLabel=this.nodeLabel+" ("+this.nodeArray.length+")",this.linkLabel=this.linkLabel+" ("+this.linkArray.length+")"},mounted:function(){this.initNodePanel(),this.initLinkPanel(),this.showNodeComponents=!0,this.initClickEvent()},computed:Object(o["a"])({},Object(u["d"])(["treeUnitDSLName","treeUnitDSLArray"])),methods:Object(o["a"])({handleClick:function(e,t){e.label===this.linkLabel&&(this.showLinkComponents=!0)},initClickEvent:function(){var e=this;$(".element-container .component").click((function(){var t=$(this).attr("type"),a=$(this).attr("id"),n=$(this).attr("name");t===e.nodeComponentType?e.highlightSelectedNodeComponent(a,n):t===e.linkComponentType&&e.highlightSelectedLinkComponent(a,n)}))},highlightSelectedNodeComponent:function(e,t){var a="Node";"undefined"!==typeof e&&($("#node-panel .component#"+e).hasClass("selected")?($("#node-panel .component#"+e).removeClass("selected"),this.removeDSLComponent(a)):($("#node-panel .component").removeClass("selected"),$("#node-panel .component#"+e).addClass("selected"),this.addNodeElementComponent(t))),$("#node-panel .selected").length>0?$("#node-panel .component").addClass("unhighlight"):$("#node-panel .component").removeClass("unhighlight")},highlightSelectedLinkComponent:function(e,t){var a="Link";"undefined"!==typeof e&&($("#link-panel .component#"+e).hasClass("selected")?($("#link-panel .component#"+e).removeClass("selected"),this.removeDSLComponent(a)):($("#link-panel .component").removeClass("selected"),$("#link-panel .component#"+e).addClass("selected"),this.addLinkElementComponent(t))),$("#link-panel .selected").length>0?$("#link-panel .component").addClass("unhighlight"):$("#link-panel .component").removeClass("unhighlight")},addNodeElementComponent:function(e){var t={Element:{Node:e}};this.setDSLComponent(t)},addLinkElementComponent:function(e){var t={Element:{Link:e}};this.setDSLComponent(t)},initNodePanel:function(){var e="25%",t="6.25%",a=.25,n=$(".element-container .component-container").width();$(".element-container .el-tabs__content").height();$("#node-panel .component").css("width",e),$("#node-panel .component").css("margin-left",t);var i=n*a,r=1.14*i;$("#node-panel .component").css("height",r+"px");var s=r/5;$("#node-panel .component-title").css("height",s);var o=4*r/5;$("#node-panel .sketch-figure").css("height",o)},initLinkPanel:function(){var e="25%",t="6.25%",a=.25,n=$(".element-container .component-container").width();$(".element-container .el-tabs__content").height();$("#link-panel .component").css("width",e),$("#link-panel .component").css("margin-left",t);var i=n*a,r=1.14*i;$("#link-panel .component").css("height",r+"px");var s=r/5;$("#link-panel .component-title").css("height",s);var o=4*r/5;$("#link-panel .sketch-figure").css("height",o)}},Object(u["c"])(["UPDATE_DSL_COMPONENT_OBJECT_STATE","UPDATE_NODE","UPDATE_LINK"]),{},Object(u["b"])(["setDSLComponent","removeDSLComponent"]))},ba=va,Da=(a("457f"),Object(de["a"])(ba,da,ua,!1,null,null,null)),Sa=Da.exports,Ta=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"treedsl-container"}},[a("el-carousel",{attrs:{"indicator-position":"outside",autoplay:!1}},e._l(e.dslArrangement,(function(t,n){return e.showPanel?a("el-carousel-item",{key:e.getPanelKey(n)},[a("div",{staticClass:"treedsls",style:e.DSLsStyleObject},e._l(t,(function(t){return a("div",{staticClass:"single-treedsl",class:{selected:-1!=e.currentTreeDSLArray.indexOf(t)},style:e.singleDSLStyleObject,attrs:{id:t}},[a("SinglePreviewFigure",{key:t,attrs:{dslId:t,getTreeDSLObj:e.getTreeDSLObj,operation:e.operation,defaultOperationFunc:e.updateSelectedTreeDSL,removeTemplateFromDsllist:e.removeSelectedDSL,addTemplate2Library:e.addTemplate2Library,replaceExistedTree:e.updateSelectedTreeDSL}},[e._v("\n\t\t      \t\t\t"+e._s(t)+"\n\t\t      \t\t")])],1)})),0)]):e._e()})),1)],1)},xa=[],Aa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dsl-teaser-container"},[a("div",{staticClass:"example"},[a("div",{staticClass:"preview",style:e.dslObj.styleObject}),a("div",{staticClass:"name"},[e._v(e._s(e.dslObj.name))])])])},_a=[],La=a("df76"),Ca={name:"GoTreeSketchFigure",components:{GoTreeSketchFigure:Ea,Drag:La["Drag"],Drop:La["Drop"]},props:{dslId:{type:String}},data:function(){return{dslObj:{}}},created:function(){},beforeMount:function(){var e=this.dslId,t={name:e,styleObject:{backgroundImage:"url(examples/"+e+".png)"}};this.dslObj=t},mounted:function(){},computed:{},methods:{}},Oa=Ca,Ra=(a("ff03"),Object(de["a"])(Oa,Aa,_a,!1,null,null,null)),Ea=Ra.exports,ja={name:"DSLList",components:{GoTreeSketchFigure:Ea,SinglePreviewFigure:yt,Drag:La["Drag"],Drop:La["Drop"]},data:function(){return{treeDSLNum:5,dslArrangement:[],showPanel:!1,singleDSLStyleObject:{},deleteButtonContainerStyleObj:{},infoButtonContainerStyleObj:{},buttonStyleObj:{},DSLsStyleObject:{},singleDSLHorizontalSpace:0,operation:["replace","save2gallery","download","dsllist-remove"]}},watch:{selectedDSLArray:{handler:function(){this.updateDSLArrangement()},deep:!0},dslListSelectedDSLName:function(){null!=this.dslListSelectedDSLName&&this.updateSelectedTreeDSL(this.dslListSelectedDSLName)},dslListSelectedDSLState:function(){null!=this.dslListSelectedDSLName&&null!=this.selectedPreviewNodeId&&(console.log("dslListSelectedDSLName",this.dslListSelectedDSLName),this.updateSelectedTreeDSL(this.dslListSelectedDSLName))}},created:function(){},beforeMount:function(){},mounted:function(){this.updateDSLArrangement(),this.showPanel=!0},computed:Object(o["a"])({},Object(u["d"])(["treeUnitDSLArray","selectedDSLArray","focusedTreeObjArray","previewTreeObj","selectedDataset","treeUnitDSLName","dslListSelectedDSLName","dslListSelectedDSLState","selectedPreviewNodeId","currentTreeDSLArray","userInfoName"])),methods:Object(o["a"])({getPanelKey:function(e){return"row-"+e},getTreeDSLObj:function(e){var t=sysDatasetObj.getSelectedDSLObject(e);return t},getTreeTemplateInfo:function(e,t,a){var n=(new Date).toISOString().split("T")[0];return{treename:t,username:a,template:e,date:n}},addTemplate2Library:function(e){var t=this.userInfoName,a=this.getTreeDSLObj(e),n=JSON.stringify(a),i=this.getTreeTemplateInfo(n,e,t),r=sysDatasetObj.isTemplateExisted(e);r?this.promptMessage("error","this template is existed"):(sysDatasetObj.addTreeTemplateArray([i]),"Login"!==t&&We(i,this.addTreeTemplateCallback))},addTreeTemplateCallback:function(){this.promptMessage(resData.type,resData.message)},promptMessage:function(e,t){this.$message({type:e,message:t})},initDeleteInfoIconStyleObj:function(){var e=+this.singleDSLStyleObject.height.replace("px",""),t=+this.singleDSLStyleObject.width.replace("px",""),a=(this.singleDSLStyleObject.marginTop.replace("px"),t/30),n=t/12,i=-(a+n/2),r=-(e+a+n/2);this.deleteButtonContainerStyleObj={right:i+"px",top:r+"px"},this.infoButtonContainerStyleObj={right:-i+"px",top:r+"px"},this.buttonStyleObj={fontSize:n+"px",padding:a+"px"}},updateDSLArrangement:function(){this.initDSLNum(),this.initDSLArrangement(),this.setContainerPadding(),this.initDeleteInfoIconStyleObj()},initDSLNum:function(){var e=$("#treedsl-container").height(),t=$("#treedsl-container").width(),a=.08,n=.1,i=e*(1-2*a),r=e*a,s=.877*i,o=s*n;this.singleDSLHorizontalSpace=s+2*o;var l=t/this.singleDSLHorizontalSpace;l%1>.9&&(l=Math.round(l)),l=Math.floor(l),this.treeDSLNum=l,this.singleDSLStyleObject={height:i+"px",width:s+"px",marginLeft:o+"px",marginRight:o+"px",marginTop:r+"px",marginBottom:r+"px"}},initDSLArrangement:function(){for(var e=this.selectedDSLArray,t=this.treeDSLNum,a=[],n=0;n<e.length;n++)n%t===0&&a.push([]),a[a.length-1].push(e[n]);this.dslArrangement=a},setContainerPadding:function(){var e=$("#treedsl-container").width(),t=this.treeDSLNum,a=this.singleDSLHorizontalSpace*t;if(e>a){var n=(e-a)/2;this.DSLsStyleObject={paddingLeft:n+"px",paddingRight:n+"px"}}},removeSelectedDSL:function(e){console.log("removeSelectedDSL",e);var t=this.selectedDSLArray.indexOf(e);this.selectedDSLArray.splice(t,1)},updateSelectedTreeDSL:function(e){var t=this;sysDatasetObj.updateLayoutParas(this.focusedTreeObjArray,e);var a=sysDatasetObj.getCurrentTreeDSLArray(this.focusedTreeObjArray);this.UPDATE_CURRENT_TREE_DSL_ARRAY(a);var n=sysDatasetObj.updateTreeUnitDSLArray(this.currentTreeDSLArray,this.treeUnitDSLArray);this.UPDATE_TREEUNIT_DSL_ARRAY(n),setTimeout((function(){t.UPDATE_TREEUNIT_DSL_NAME(e)}),100),setTimeout((function(){t.UPDATE_TREE_CANVAS_LAYOUT_STATE()}),300)},getHybridNodeObjArrayNum:function(){return 0}},Object(u["b"])(["getLayoutValue"]),{},Object(u["c"])(["UPDATE_TREEUNIT_DSL_ARRAY","UPDATE_TREEUNIT_DSL_NAME","UPDATE_TREE_CANVAS_LAYOUT_STATE","UPDATE_TREE_UNIT_LAYOUT_STATE","UPDATE_DSLLIST_SELECTED_DSL_NAME","UPDATE_CURRENT_TREE_DSL_ARRAY","UPDATE_TREE_DSL_DIALOG_STATE"]))},Pa=ja,wa=(a("3769"),Object(de["a"])(Pa,Ta,xa,!1,null,null,null)),Na=wa.exports,Ua=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dsl-list-view-title"},[a("span",{staticClass:"text"},[e._v(e._s(e.title))])])},ka=[],Ia={name:"DSLListTitle",props:{},data:function(){return{title:"TemplateView"}},created:function(){},beforeMount:function(){},mounted:function(){},watch:{},computed:{},methods:{saveNewDSL:function(){console.log("save")},removeCurrentDSL:function(){console.log("remove")}}},Ma=Ia,Wa=(a("e35a"),Object(de["a"])(Ma,Ua,ka,!1,null,"4ff512e8",null)),Va=Wa.exports,$a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"treeunit-view-title"},[a("span",{staticClass:"text"},[e._v(e._s(e.title))]),a("span",{staticClass:"operation"},[a("el-tooltip",{staticClass:"labelIcon",attrs:{content:"new",effect:"light"}},[a("span",{staticClass:"operation-icon",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.newDSL(t)}}},[a("span",{staticClass:"icon iconfont icon-xinjian"})])]),a("el-divider",{attrs:{direction:"vertical"}}),a("el-tooltip",{staticClass:"labelIcon",attrs:{content:"save as",effect:"light"}},[a("span",{staticClass:"operation-icon",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.saveAsNewDSL(t)}}},[a("span",{staticClass:"icon iconfont icon-lingcunwei"})])])],1),a("el-dialog",{attrs:{id:"dsl-name-dialog",title:"GoTree Name",visible:e.saveDialogVisible,width:"30%"},on:{"update:visible":function(t){e.saveDialogVisible=t},opened:e.initShowDSLName}},[a("div",{attrs:{id:"dsl-name-hint"}},[e._v("Please enter the name of the GoTree DSL. You can use letters ( "),a("b",[e._v("A-Z")]),e._v(", "),a("b",[e._v("a-z")]),e._v(" ), numbers ( "),a("b",[e._v("0-9")]),e._v(" ) & underline ( "),a("b",[e._v("_")]),e._v(" ). ")]),a("el-input",{attrs:{placeholder:"GoTreeExample1",autofocus:!0},on:{change:e.changeGoTreeName},model:{value:e.gotreeName,callback:function(t){e.gotreeName=t},expression:"gotreeName"}}),a("div",{attrs:{id:"dsl-name-warning-hint"}},[e._v(e._s(e.dslNameWarningHint))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancelGoTreeName}},[e._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmGoTreeName}},[e._v("Confirm")])],1)],1),a("el-dialog",{attrs:{id:"dsl-name-dialog",title:"GoTree Template Rename",visible:e.saveAsDialogVisible,width:"30%"},on:{"update:visible":function(t){e.saveAsDialogVisible=t},opened:e.initShowDSLName}},[a("el-dialog",{attrs:{width:"30%",title:"Warning",visible:e.overlapDSLDialogVisible,"append-to-body":""},on:{"update:visible":function(t){e.overlapDSLDialogVisible=t}}},[a("div",{attrs:{id:"dsl-name-hint"}},[e._v("Do you want to overwrite the existing \n            "),a("span",{staticClass:"highlight"},[a("b",[e._v(e._s(e.gotreeName))])]),e._v(" DSL?\n          ")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancelOverlapExistingDSL}},[e._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmOverlapExistingDSL}},[e._v("Confirm")])],1)]),a("div",{attrs:{id:"dsl-name-hint"}},[e._v("Please enter the name of the GoTree DSL. You can use letters ( "),a("b",[e._v("A-Z")]),e._v(", "),a("b",[e._v("a-z")]),e._v(" ), numbers ( "),a("b",[e._v("0-9")]),e._v(" ) & underline ( "),a("b",[e._v("_")]),e._v(" ). ")]),a("el-input",{attrs:{placeholder:"GoTreeExample1",autofocus:!0},on:{change:e.changeGoTreeName},model:{value:e.gotreeName,callback:function(t){e.gotreeName=t},expression:"gotreeName"}}),a("div",{attrs:{id:"dsl-name-warning-hint"}},[e._v(e._s(e.dslNameWarningHint))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancelGoTreeName}},[e._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmGoTreeName}},[e._v("Confirm")])],1)],1),a("el-dialog",{attrs:{id:"selection-alert-dialog",title:"Warning",visible:e.selectionAlertDialog,width:"30%"},on:{"update:visible":function(t){e.selectionAlertDialog=t}}},[a("div",{attrs:{id:"dsl-name-hint"}},[e._v("Please select one GoTree DSL from GoTreeListView or select components to create one GoTree DSL. ")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.selectionAlertDialog=!1}}},[e._v("Confirm")])],1)])],1)},Ha=[],Ya={name:"TreeUnitParameterTitle",props:{},data:function(){return{title:"TreeUnitView",saveAsDialogVisible:!1,saveDialogVisible:!1,selectionAlertDialog:!1,overlapDSLDialogVisible:!1,gotreeName:"",dslNameDialogComponentKey:1,dslNameWarningHint:""}},created:function(){},beforeMount:function(){},mounted:function(){},watch:{},computed:Object(o["a"])({},Object(u["d"])(["treeUnitDSLArray","treeUnitDSLName","dslListSelectedDSLName","selectedDSLArray"])),methods:Object(o["a"])({newDSL:function(){for(var e=0,t=0;t<this.selectedDSLArray.length;t++){var a=this.selectedDSLArray[t],n=+a.replace("untitled","");n>e&&(e=n)}console.log("newTreeDSLObj",r);var i={};i.name="untitled"+(e+1);var r=this.get_new_tree_dsl_obj(i.name);i.dslObj=r,console.log("newTreeDSLObj",r),this.treeUnitDSLArray.push(i),console.log("treeUnitDSLArray",this.treeUnitDSLArray),sysDatasetObj.updateSingleSelectedDSLObject(i.name,i.dslObj),this.selectedDSLArray.push(i.name),this.UPDATE_TREEUNIT_DSL_NAME(i.name),null==this.dslListSelectedDSLName&&this.UPDATE_DSLLIST_SELECTED_DSL_NAME(i.name)},get_new_tree_dsl_obj:function(e){var t={};return y(t),t.Name=e,t},saveDSL:function(){var e=st(),t=e.cartesianDSLArray,a=e.polarDSLArray,n=this.goTreeName;if("undefined"===typeof n&&(n=this.treeUnitDSLName),null==this.treeUnitDSLName)this.selectionAlertDialog=!0;else{var i=-1!==a.indexOf(n),r=-1!==t.indexOf(n);!sysDatasetObj.isDSLObjectExist(n)||i||r?this.saveDialogVisible=!0:this.updateSelectedDSLArray()}},saveAsNewDSL:function(){null==this.treeUnitDSLName?this.selectionAlertDialog=!0:this.saveAsDialogVisible=!0},cancelOverlapExistingDSL:function(){this.overlapDSLDialogVisible=!1},confirmOverlapExistingDSL:function(){this.overlapDSLDialogVisible=!1,this.updateDSLArray(),this.saveAsDialogVisible=!1},removeCurrentDSL:function(){console.log("remove")},cancelGoTreeName:function(e){this.saveAsDialogVisible=!1},confirmGoTreeName:function(){var e=st(),t=e.cartesianDSLArray,a=e.polarDSLArray,n=this.goTreeName;"undefined"===typeof n&&(n=this.treeUnitDSLName);var i=-1!==a.indexOf(n),r=-1!==t.indexOf(n);function s(e){var t=/^[0-9a-zA-Z]\w*$/;return!!t.test(e)}s(n)?i||r?this.dslNameWarningHint="The name already exists in the Gallary. Please use another name.":(this.dslNameWarningHint="",sysDatasetObj.isDSLObjectExist(n)?this.overlapDSLDialogVisible=!0:(this.updateDSLArray(),this.saveAsDialogVisible=!1,this.saveDialogVisible=!1)):this.dslNameWarningHint="The name does not match the above rule."},updateDSLArray:function(){this.updateTreeUnitDSLArray(),this.updateSelectedDSLArray()},updateTreeUnitDSLArray:function(){for(var e=0;e<this.treeUnitDSLArray.length;e++)if(this.treeUnitDSLArray[e].name===this.treeUnitDSLName){this.treeUnitDSLArray[e].name=this.gotreeName;break}this.UPDATE_TREEUNIT_DSL_NAME(this.gotreeName)},updateSelectedDSLArray:function(){for(var e=this.gotreeName,t=0;t<this.treeUnitDSLArray.length;t++)if(this.treeUnitDSLArray[t].name===e){var a=this.treeUnitDSLArray[t].dslObj;sysDatasetObj.updateSelectedDSLObject(e,a),sysDatasetObj.updateTreeDSLContentObject(e,a)}-1===this.selectedDSLArray.indexOf(e)&&this.selectedDSLArray.push(e),this.UPDATE_CHANGED_DSL_NAME_STATE()},changeGoTreeName:function(e){"undefined"!==typeof e&&(this.goTreeName=e)},initShowDSLName:function(){console.log("initShowDSLName",this.treeUnitDSLName),this.gotreeName=this.treeUnitDSLName,console.log("initShowDSLName this.goTreeName",this.gotreeName)}},Object(u["c"])(["UPDATE_TREEUNIT_DSL_ARRAY","UPDATE_TREEUNIT_DSL_NAME","UPDATE_CHANGED_DSL_NAME_STATE","UPDATE_DSLLIST_SELECTED_DSL_NAME"]))},Xa=Ya,Fa=(a("1484"),Object(de["a"])(Xa,$a,Ha,!1,null,"b114e036",null)),za=Fa.exports,Ba=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"treeunit-parameter-container"}},[a("el-tabs",{attrs:{type:"card",closable:""},on:{"tab-click":e.handleClick,"tab-remove":e.removeTab},model:{value:e.editableDSLName,callback:function(t){e.editableDSLName=t},expression:"editableDSLName"}},e._l(e.treeUnitDSLArray,(function(t,n){return a("el-tab-pane",{attrs:{label:t.name,name:t.name}},[a("div",{staticClass:"top-panel",style:e.topPanelStyleObj},[t.visible?a("TreeUnitView",{attrs:{dslName:t.name,dslObj:t.dslObj}}):e._e()],1),a("div",{staticClass:"bottom-panel",style:e.bottomPanelStyleObj},[t.visible?a("ParameterView",{attrs:{dslName:t.name,dslObj:t.dslObj}}):e._e()],1)])})),1)],1)},Ga=[],Ja=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"treeunit-container"},[a("svg",{staticClass:"tree-unit-canvas",attrs:{width:"100%",height:"100%",id:e.treeCanvasId}},[a("g",{attrs:{id:"tree-unit-region-g"}}),a("g",{staticClass:"tree-unit-g",attrs:{id:e.treeGId}})])])},Ka=[];a("2caf");function Qa(e,t,a,n,i){var r=[];for(var s in a)r.push(s);r=r.sort((function(e,t){var a=e.replace("index-",""),n=t.replace("index-","");return a-n}));for(var o={},l=0;l<n.length;l++){var c=n[l].data.index;o[c]=n[l]}var d=r[0],u={},h=i.width,p=i.height,f=0,g=0,m=0,y=0,v=0,b=0,D=0,S=0,T=4;function x(e,t,a,n){var i={x:e,y:t,width:a-e,height:n-t};if(Math.abs(i.width)<T){var r=(e+a)/2;i.x=r-T/2,i.width=T}if(Math.abs(i.height)<T){var s=(t+n)/2;i.y=s-T/2,i.height=T}return i}var A=4;u[a[d].id]={fatherID:null,x:f,isLeaf:1,y:m,Rootx:0,Rooty:0,RootWidth:0,RootHeight:0,Width:h,Height:p,depth:0,id:a[d].id,SubtreesX:0,SubtreesY:0,SubtreesWidth:0,SubtreesHeight:0,others:{},value:o[a[d].id].value,data:o[a[d].id].data};for(var _=t[e[d]],L=0;L<r.length;L++){var C=r[L],O=u[a[C].id],R=O.Width/a[C].width,E=O.Height/a[C].height;O.Rootx=a[C].root.x*R+v,O.Rooty=a[C].root.y*E+D,O.RootWidth=a[C].root.width*R-v-b,O.RootHeight=a[C].root.height*E-D-S,O.SubtreesX=a[C].subtrees.x*R+v,O.SubtreesY=a[C].subtrees.y*E+D,O.SubtreesWidth=a[C].subtrees.width*R-v-b,O.SubtreesHeight=a[C].subtrees.height*E-D-S,O.others={X:{RootLeftPadding:x(O.Rootx,O.y,O.SubtreesX,O.y+O.Height),RootRightPadding:x(O.SubtreesX+O.SubtreesWidth,O.y,O.Rootx+O.RootWidth,O.y+O.Height),RootMargin:O.Rootx<=O.SubtreesX?x(O.Rootx+O.RootWidth,O.y,O.SubtreesX,O.y+O.Height):x(O.SubtreesX+O.SubtreesWidth,O.y,O.Rootx,O.y+O.Height),RootAlignment:x(O.Rootx+O.RootWidth/2-A/2,O.y,O.Rootx+O.RootWidth/2+A/2,O.y+O.Height),SubtreeMargin:[],SubtreeAlignment:x(O.SubtreesX+O.SubtreesWidth/2-A/2,O.y,O.SubtreesX+O.SubtreesWidth/2+A/2,O.y+O.Height)},Y:{RootLeftPadding:x(O.x,O.Rooty,O.x+O.Width,O.SubtreesY),RootRightPadding:x(O.x,O.SubtreesY+O.SubtreesHeight,O.x+O.Width,O.Rooty+O.RootHeight),RootMargin:O.Rooty<=O.SubtreesY?x(O.x,O.Rooty+O.RootHeight,O.x+O.Width,O.SubtreesY):x(O.x,O.SubtreesY+O.SubtreesHeight,O.x+O.Width,O.Rooty),RootAlignment:x(O.x,O.Rooty+O.RootHeight/2-A/2,O.x+O.Width,O.Rooty+O.RootHeight/2+A/2),SubtreeMargin:[],SubtreeAlignment:x(O.x,O.SubtreesY+O.SubtreesHeight/2-A/2,O.x+O.Width,O.SubtreesY+O.SubtreesHeight/2+A/2)}},"include"===_.Layout.X.Root.Relation&&(delete O.others.X.RootMargin,delete O.others.X.RootAlignment),"juxtapose"===_.Layout.X.Root.Relation&&(delete O.others.X.RootLeftPadding,delete O.others.X.RootRightPadding,delete O.others.X.RootAlignment),"within"===_.Layout.X.Root.Relation&&(delete O.others.X.RootLeftPadding,delete O.others.X.RootRightPadding,delete O.others.X.RootMargin,"Alignment"in _.Layout.X.Root&&("left"===_.Layout.X.Root.Alignment&&(O.others.X.RootAlignment=x(O.Rootx,O.y,O.Rootx+A,O.y+O.Height)),"right"===_.Layout.X.Root.Alignment&&(O.others.X.RootAlignment=x(O.Rootx+O.RootWidth-A,O.y,O.Rootx+O.RootWidth,O.y+O.Height)))),"flatten"===_.Layout.X.Subtree.Relation&&delete O.others.X.SubtreeAlignment,"align"===_.Layout.X.Subtree.Relation&&(delete O.others.X.SubtreeMargin,"Alignment"in _.Layout.X.Subtree&&("left"===_.Layout.X.Subtree.Alignment&&(O.others.X.SubtreeAlignment=x(O.SubtreesX,O.y,O.SubtreesX+A,O.y+O.Height)),"right"===_.Layout.X.Subtree.Alignment&&(O.others.X.SubtreeAlignment=x(O.SubtreesX+O.SubtreesWidth-A,O.y,O.SubtreesX+O.SubtreesWidth,O.y+O.Height)))),"include"===_.Layout.Y.Root.Relation&&(delete O.others.Y.RootMargin,delete O.others.Y.RootAlignment),"juxtapose"===_.Layout.Y.Root.Relation&&(delete O.others.Y.RootLeftPadding,delete O.others.Y.RootRightPadding,delete O.others.Y.RootAlignment),"within"===_.Layout.Y.Root.Relation&&(delete O.others.Y.RootLeftPadding,delete O.others.Y.RootRightPadding,delete O.others.Y.RootMargin,"Alignment"in _.Layout.Y.Root&&("top"===_.Layout.Y.Root.Alignment&&(O.others.Y.RootAlignment=x(O.x,O.Rooty,O.x+O.Width,O.Rooty+A)),"bottom"===_.Layout.Y.Root.Alignment&&(O.others.Y.RootAlignment=x(O.x,O.Rooty+O.RootHeight-A,O.x+O.Width,O.Rooty+O.RootHeight)))),"flatten"===_.Layout.Y.Subtree.Relation&&delete O.others.Y.SubtreeAlignment,"align"===_.Layout.Y.Subtree.Relation&&(delete O.others.Y.SubtreeMargin,"Alignment"in _.Layout.Y.Subtree&&("top"===_.Layout.Y.Subtree.Alignment&&(O.others.Y.SubtreeAlignment=x(O.x,O.SubtreesY,O.x+O.Width,O.SubtreesY+A)),"bottom"===_.Layout.Y.Subtree.Alignment&&(O.others.Y.SubtreeAlignment=x(O.x,O.SubtreesY+O.SubtreesHeight-A,O.x+O.Width,O.SubtreesY+O.SubtreesHeight))));O.Width,O.Height;O.depth,u[a[C].id]=O;for(var j=0;j<a[C].subtreeLayout.length;j++){O.isLeaf=0;var P=a[C].subtreeLayout[j].id;u[P]={fatherID:a[C].id,x:O.x+a[C].subtreeLayout[j].x*R+f,y:O.y+a[C].subtreeLayout[j].y*E+m,Rootx:0,Rooty:0,RootWidth:0,RootHeight:0,isLeaf:1,Width:a[C].subtreeLayout[j].width*R-f-g,Height:a[C].subtreeLayout[j].height*E-m-y,depth:O.depth+1,id:P,SubtreesX:0,SubtreesY:0,SubtreesWidth:0,SubtreesHeight:0,others:{},value:o[P].value}}for(var w=function(e){O.isLeaf=0;var t=a[C].subtreeLayout[e].id,i=n[0].children[e].data.order[0];if(0===i&&"flatten"===_.Layout.X.Subtree.Relation&&O.others.X.SubtreeMargin.push(x(O.SubtreesX,O.SubtreesY,u[t].x,O.SubtreesY+O.SubtreesHeight)),2===i&&"flatten"===_.Layout.X.Subtree.Relation&&O.others.X.SubtreeMargin.push(x(u[t].x+u[t].Width,O.SubtreesY,O.SubtreesX+O.SubtreesWidth,O.SubtreesY+O.SubtreesHeight)),i>0&&"flatten"===_.Layout.X.Subtree.Relation){var r=0;n[0].children.forEach((function(e){e.data.order[0]===i-1&&(r=e.data.preOrder+1)})),O.others.X.SubtreeMargin.push(x(u["index-"+r].x+u["index-"+r].Width,O.SubtreesY,u[t].x,O.SubtreesY+O.SubtreesHeight))}if(i=n[0].children[e].data.order[1],0===i&&"flatten"===_.Layout.Y.Subtree.Relation&&O.others.Y.SubtreeMargin.push(x(O.SubtreesX,O.SubtreesY,O.SubtreesX+O.SubtreesWidth,u[t].y)),2===i&&"flatten"===_.Layout.Y.Subtree.Relation&&O.others.Y.SubtreeMargin.push(x(O.SubtreesX,u[t].y+u[t].Height,O.SubtreesX+O.SubtreesWidth,O.SubtreesY+O.SubtreesHeight)),i>0&&"flatten"===_.Layout.Y.Subtree.Relation){var s=0;n[0].children.forEach((function(e){e.data.order[1]===i-1&&(s=e.data.preOrder+1)})),O.others.Y.SubtreeMargin.push(x(O.SubtreesX,u["index-"+s].y+u["index-"+s].Height,O.SubtreesX+O.SubtreesWidth,u[t].y))}},N=0;N<a[C].subtreeLayout.length;N++)w(N)}for(var U in u)u[U].translate="translate(0 , 0)";return u}var qa,Za={name:"TreeUnitView",components:{},data:function(){return{treeCanvasId:"tree-canvas",treeGId:"tree-unit-g",rootLayoutComponentType:"root-layout",subtreeLayoutComponentType:"subtree-layout",nodeComponentType:"node",linkComponentType:"link",coordComponentType:"coordinate_system",treeViewPosLenObj:{},DURATION:1e3,PARAS_DURATION:1e3,manipulationDuration:200,defaultDuration:1e3,nodeFillColor:"steelblue",treeUnitLayoutParas:{},initialDSLObj:{},paraCursorObj:{root:"pointer","subtree-group":"pointer",subtree:"pointer",RootMargin:"resize",RootLeftPadding:"resize",RootRightPadding:"resize",RootAlignment:"context-menu",SubtreeMargin:"resize",SubtreeAlignment:"context-menu"},paraResizeCursorObj:{x:"ew-",y:"ns-"},paraAdjustState:!1,startPosition:[],treeUnitCanvasWidth:0,treeUnitCanvasHeight:0,horizontalUnit:1,verticalUnit:1,_dslObj:{}}},props:{dslName:{type:String},dslObj:{type:Object}},created:function(){},mounted:function(){var e=this,t=0,a=+$(".tree-unit-canvas").width(),n=+$(".tree-unit-canvas").height();this.treeUnitCanvasWidth=a,this.horizontalUnit=a/100,this.treeUnitCanvasHeight=n,this.verticalUnit=a/100,d3.select(e.$el).select("#tree-unit-region-g").append("rect").attr("class","outer-bg").attr("x",t).attr("y",t).attr("width",a-2*t).attr("height",n-2*t).on("click",e.cancelParasSelection);var i=.15*n,r=.15*n,s=.15*a,o=.15*a;e.treeViewPosLenObj={x:0,y:0,width:a-s-o,height:n-i-r},d3.select(e.$el).select("#tree-unit-region-g").append("rect").attr("class","inner-bg").attr("x",.05*a).attr("y",.05*n).attr("width",.9*a).attr("height",.9*n).on("click",e.cancelParasSelection),d3.select(e.$el).select(".tree-unit-g").attr("transform","translate("+s+","+i+")"),e.updateTreeUnitView()},updated:function(){},watch:{treeUnitLayoutState:function(){this.dslName===this.treeUnitDSLName&&this.updateTreeUnitView()}},computed:Object(o["a"])({},Object(u["d"])(["hierarchicalData","nodeArray","hierarchicalDSL","hoveringDSLItem","focusedDSLObj","focusedDSLObjIndex","dslComponentObject","treeUnitLayoutState","treeUnitDSLName","selectParaName"])),methods:Object(o["a"])({},Object(u["c"])(["UPDATE_ROOT_LAYOUT","UPDATE_SUBTREE_LAYOUT","UPDATE_NODE","UPDATE_LINK","UPDATE_COORD","UPDATE_SELECT_PARA_NAME","UPDATE_HOVER_PARAM","UPDATE_TREE_CANVAS_LAYOUT_STATE","UPDATE_TREE_PREVIEW_LAYOUT_STATE","MANIPULATE_PARA","MANIPULATE_VALUE"]),{cancelParasSelection:function(){d3.select(this.$el).selectAll(".selected").classed("selected",!1),this.UPDATE_SELECT_PARA_NAME(null)},updateTreeUnitView:function(){var e=this;this.updateTreeUnitLayoutParas();var t=this.treeUnitLayoutParas;F(t).then((function(t){e.renderTreeUnit(t)}))},updateTreeUnitLayoutParas:function(){var e=sysDatasetObj.getTreeUnitDataset(),t=sysDatasetObj.getTreeUnitNodeArray(),a={},n=this.dslName,i=this.dslObj;this.initialDSLObj=JSON.parse(JSON.stringify(i)),a[n]=i;for(var r={},s=0;s<t.length;s++){var o=t[s].data.index;r[o]=n}this.treeUnitLayoutParas={hierarchicalData:e,treeIndexWithDSL:r,treeDSLContentObj:a}},renderTreeUnit:function(e){var t=this.initialDSLObj,a=this.treeUnitLayoutParas,n=a.treeIndexWithDSL,i=sysDatasetObj.getTreeUnitNodeArray(),r=JSON.parse(JSON.stringify(a.treeDSLContentObj)),s=this.treeViewPosLenObj,o=this.treeViewPosLenObj.width,l=this.treeViewPosLenObj.height;if("undefined"!==typeof n&&"undefined"!==typeof r){var c=Qa(n,r,e,i,s),u=me(r),h=ae(c,u,n,s,i),p=Object(d["a"])(h,2),f=p[0],g=p[1];f=fe(f,u,n,i),g=ge(g,c,u,n,i,o,l);var m=this.getParasSpaceData(c),y=this.getParasTreeIndexWithDSL(n,m),v=this.getParasDslContentObjectWithDefault(u),b=ae(m,v,y,s,i),D=Object(d["a"])(b,2),S=D[0],T=(D[1],S.filter((function(e){return"xy"===e.parameterAxis}))),x=S.filter((function(e){return"x"===e.parameterAxis||"y"===e.parameterAxis}));if(this.addDirectManipulation(),this.renderTreeParas_xy(T),"Element"in t){if("Link"in t["Element"]){var A=d3.select("#"+this.treeGId).select(".lineartree-node").empty(),_=d3.select("#"+this.treeGId).select(".link").empty();!A&&_&&(this.removeTreeNode(),this.removeTreeNodeLabel()),this.renderTreeLink(g)}else this.removeTreeLink();"Node"in t["Element"]?this.renderTreeNode(f):this.removeTreeNode()}this.renderTreeParas_x_y(x)}},adjustTreeUnitRange:function(e){var t=e["index-0"];if("undefined"!==typeof t.others.X&&"SubtreeMargin"in t.others.X){var a=t.others.X.SubtreeMargin,n=a[0].width;n<0&&(t.Width=t.Width+-n,t.SubtreesWidth=t.SubtreesWidth+-n)}if("undefined"!==typeof t.others.Y&&"SubtreeMargin"in t.others.Y){var i=t.others.Y.SubtreeMargin,r=i[0].height;r<0&&(t.SubtreesY=t.SubtreesY+r,t.Height=t.Height+-r)}},parasVisibility:function(e,t){var a=this.initialDSLObj;return("root"===t||"RootMargin"===t||"RootLeftPadding"===t||"RootRightPadding"===t||"RootAlignment"===t)&&"Layout"in a&&"X"in a["Layout"]&&"Y"in a["Layout"]&&"Root"in a["Layout"]["X"]&&"Root"in a["Layout"]["Y"]?"visible":"subtree-group"===t&&"Layout"in a&&"X"in a["Layout"]&&"Y"in a["Layout"]?"visible":("SubtreeMargin"===t||"SubtreeAlignment"===t)&&"Layout"in a&&"X"in a["Layout"]&&"Y"in a["Layout"]&&"Subtree"in a["Layout"]["X"]&&"Subtree"in a["Layout"]["Y"]?"visible":"subtree"===t&&"Layout"in a&&"X"in a["Layout"]&&"Y"in a["Layout"]&&"Subtree"in a["Layout"]["X"]&&"Subtree"in a["Layout"]["Y"]?"visible":"hidden"},addDirectManipulation:function(){var e=this,t=e.treeCanvasId;d3.select("#"+t).on("mousedown",(function(t,a){var n=e.selectParaName;if(null!=n){var i=n.split("-"),r=i[0],s=i[1],o=e.paraCursorObj[r];if("resize"===o){var l=e.paraResizeCursorObj[s];o=l+o}var c=d3.mouse(this);e.startPosition=c,e.paraAdjustState=!0,e.duplicateCurrentDslObj(),$("html,body").css("cursor",o),e.DURATION=e.manipulationDuration,e.PARAS_DURATION=e.manipulationDuration}})).on("mousemove",(function(t,a){var n=e.selectParaName,i=e.verticalUnit,r=e.horizontalUnit;if(e.paraAdjustState){var s=d3.mouse(this),o=e.startPosition,l=n.split("-"),c=l[1],d=0;"x"===c?d=(s[0]-o[0])/r:"y"===c&&(d=-(s[1]-o[1])/i);var u=e.adjustDslObj(n,d),h=Math.round(100*u);e.MANIPULATE_PARA(n),e.MANIPULATE_VALUE(h),e.updateTreeUnitView()}})).on("mouseup",(function(t,a){$("html,body").css("cursor","default"),e.paraAdjustState=!1,sysDatasetObj.updateTreeDSLContentObject(e.dslName,e.dslObj),e.UPDATE_TREE_CANVAS_LAYOUT_STATE(),sysDatasetObj.updateSelectedDSLObject(e.dslName,e.dslObj),e.UPDATE_TREE_PREVIEW_LAYOUT_STATE(),e.DURATION=e.defaultDuration,e.PARAS_DURATION=e.defaultDuration,e.cancelParasSelection()}))},renderTreeParas_x_y:function(e){var t=this,a=t.treeGId,n=(t.treeCanvasId,d3.select("#"+a).selectAll(".paras-node-x-y").data(e,(function(e,t){return e.elementName})));n.enter().append("path").attr("id",(function(e,t){return"parasnode"+e.id})).attr("class",(function(e,t){return"paras-node-x-y "+e.elementClass+" "+e.elementName.toLowerCase()})).attr("property",(function(e,t){return e.parameterAxis})).attr("d",(function(e,t){return e.element})).attr("visibility",(function(e,a){return t.parasVisibility(e.elementClass,e.elementName)})).on("mousedown",(function(e,a){if(!d3.select(this).classed("selected")){d3.select(t.$el).selectAll(".selected").classed("selected",!1),d3.select(this).classed("selected",!0);var n=d3.select(this).attr("property"),i=e.elementName+"-"+n;t.UPDATE_SELECT_PARA_NAME(i)}}));var i=[],r=[],s=[];n.each((function(e,a){var n=e.element,o=d3.select(this).attr("d");s.push(d3.select(this).node()),i.push(o),r.push(n),d3.select(this).transition().duration(t.PARAS_DURATION).attr("visibility",(function(e,a){return t.parasVisibility(e.elementClass,e.elementName)}))}));var o=function(){n.each((function(e,t){var a=e.element;d3.select(this).attr("d",a)}))};i.length>0&&r.length>0?i.length===r.length&&null!=i[0]&&null!=r[0]&&"undefined"!==typeof i[0]&&"undefined"!==typeof r[0]&&Object(ne["tweenPaths"])({duration:t.PARAS_DURATION,complete:o,from:i,to:r,next:function(e,t){return s[t].setAttribute("d",e)}}):o(),n.exit().remove()},renderTreeParas_xy:function(e){var t=this,a=t.treeGId,n=(t.treeCanvasId,d3.select("#"+a).selectAll(".paras-node-xy").data(e,(function(e,t){return e.elementName})));n.enter().append("path").attr("id",(function(e,t){return"parasnode"+e.id})).attr("class",(function(e,t){return"paras-node-xy "+e.elementClass+" "+e.elementName.toLowerCase()})).attr("property",(function(e,t){return e.parameterAxis})).attr("d",(function(e,t){return e.element})).attr("visibility",(function(e,a){return t.parasVisibility(e.elementClass,e.elementName)})).on("mousedown",(function(e,a){if(!d3.select(this).classed("selected")){d3.select(t.$el).selectAll(".selected").classed("selected",!1),d3.select(this).classed("selected",!0);var n=d3.select(this).attr("property"),i=e.elementName+"-"+n;t.UPDATE_SELECT_PARA_NAME(i)}}));var i=[],r=[],s=[];n.each((function(e,a){var n=e.element,o=d3.select(this).attr("d");s.push(d3.select(this).node()),i.push(o),r.push(n),d3.select(this).transition().duration(t.PARAS_DURATION).attr("visibility",(function(e,a){return t.parasVisibility(e.elementClass,e.elementName)}))}));var o=function(){n.each((function(e,t){var a=e.element;d3.select(this).attr("d",a)}))};i.length>0&&r.length>0?i.length===r.length&&null!=i[0]&&null!=r[0]&&"undefined"!==typeof i[0]&&"undefined"!==typeof r[0]&&Object(ne["tweenPaths"])({duration:t.PARAS_DURATION,complete:o,from:i,to:r,next:function(e,t){return s[t].setAttribute("d",e)}}):o(),n.exit().remove()},duplicateCurrentDslObj:function(){this._dslObj=JSON.parse(JSON.stringify(this.dslObj))},adjustDslObj:function(e,t){var a=e.split("-"),n=a[0],i=a[1].toUpperCase();if(t/=100,"Layout"in this.dslObj){if("RootMargin"===n)return"undefined"!==typeof this.dslObj["Layout"][i]["Root"]&&(this.dslObj["Layout"][i]["Root"]["Margin"]=this._dslObj["Layout"][i]["Root"]["Margin"]+t),this.dslObj["Layout"][i]["Root"]["Margin"];if("RootLeftPadding"===n)return"undefined"!==typeof this.dslObj["Layout"][i]["Root"]&&(this.dslObj["Layout"][i]["Root"]["Padding"][0]=this._dslObj["Layout"][i]["Root"]["Padding"][0]+t),this.dslObj["Layout"][i]["Root"]["Padding"][0];if("RootRightPadding"===n)return"undefined"!==typeof this._dslObj["Layout"][i]["Root"]&&(this.dslObj["Layout"][i]["Root"]["Padding"][1]=this._dslObj["Layout"][i]["Root"]["Padding"][1]+t),this.dslObj["Layout"][i]["Root"]["Padding"][1];if("SubtreeMargin"===n)return"undefined"!==typeof this._dslObj["Layout"][i]["Subtree"]&&(this.dslObj["Layout"][i]["Subtree"]["Margin"]=this._dslObj["Layout"][i]["Subtree"]["Margin"]+t),this.dslObj["Layout"][i]["Subtree"]["Margin"]}},getParasDslContentObjectWithDefault:function(e){var t=JSON.parse(JSON.stringify(e));for(var a in t)t[a].Element.Node="rectangle";return t},getParasTreeIndexWithDSL:function(e,t){var a=JSON.parse(JSON.stringify(e)),n=a["index-0"];for(var i in t)i in a||(a[i]=n);return a},getParasSpaceData:function(e){var t=.5,a=2,n=JSON.parse(JSON.stringify(e)),i=n["index-0"],r=i.others,s=r.X,o=r.Y,l={RootLeftPadding:"padding",RootRightPadding:"padding",SubtreeMargin:"margin",RootMargin:"margin",RootAlignment:"alignment",SubtreeAlignment:"alignment"},c=[],d="xy";for(var u in n){var h=n[u];"index-0"===u?(h.elementClass="root "+d,h.elementName="root"):(h.elementClass="subtree "+d,h.elementName="subtree"),h.Rootx=h.Rootx+a,h.Rooty=h.Rooty+a,h.RootWidth=h.RootWidth-2*a,h.RootHeight=h.RootHeight-2*a,h.parameterAxis=d,c.push(n[u])}var p={x:i.SubtreesX-t,y:i.SubtreesY-t,width:i.SubtreesWidth+2*t,height:i.SubtreesHeight+2*t},f="xy",g="subtree-group "+f,m="subtree-group",y=U(p,g,m,f);for(var v in c.push(y),s){var b="x",D=l[v]+" "+b,S=v;if(Array.isArray(s[v]))for(var T=0;T<s[v].length;T++){var x=U(s[v][T],D,S,b);c.push(x)}else{var A=U(s[v],D,S,b);c.push(A)}}for(var _ in o){var L="y",C=l[_]+" "+L,O=_;if(Array.isArray(o[_]))for(var R=0;R<o[_].length;R++){var E=U(o[_][R],C,O,L);c.push(E)}else{var j=U(o[_],C,O,L);c.push(j)}}for(var P={},w=0;w<c.length;w++){c[w].elementClass;var N=c[w].id;"index-0"!==N&&(c[w].fatherID="index-0"),"undefined"===typeof c[w].id&&(c[w].id="index-"+w),P["index-"+w]=c[w]}return P;function U(e,t,a,n){var i=1;"RootAlignment"!==a&&"SubtreeAlignment"!==a||(i=2);var r=e.width,s=e.height,o=e.x,l=e.y,c={x:o+i,y:l+i,Width:r-2*i,Height:s-2*i,Rootx:0,Rooty:0,RootWidth:r-2*i,RootHeight:s-2*i,SubtreesX:0,SubtreesY:0,SubtreesWidth:0,SubtreesHeight:0,fatherID:null,elementClass:t,elementName:a,parameterAxis:n};return c}},removeTreeNodeLabel:function(){var e=this.treeGId;d3.select("#"+e).selectAll(".node-label").remove()},renderTreeNodeLabel:function(e){var t=this.treeGId,a=d3.select(this.$el).select("#"+t).selectAll(".node-label").data(e,(function(e,t){return e.id}));a.enter().append("text").attr("class","node-label").attr("id",(function(e){return"node-label-"+e.id})).attr("transform",(function(e){return"translate("+e.labelPos.x+","+e.labelPos.y+")rotate("+e.rotation+")"})).style("text-anchor",(function(e){return e.textAnchor})).style("alignment-baseline","middle").style("font-size",(function(e){return e.fontSize})).text((function(e,t){return e.labelValue})),a.transition().duration(self.DURATION).attr("transform",(function(e){return"translate("+e.labelPos.x+","+e.labelPos.y+")rotate("+e.rotation+")"})).style("text-anchor",(function(e){return e.textAnchor})).style("font-size",(function(e){return e.fontSize})).text((function(e,t){return e.labelValue})),a.exit().remove()},removeTreeLink:function(){var e=this.treeGId;d3.select("#"+e).selectAll(".link").remove()},renderTreeLink:function(e){var t=this,a=t.treeGId,n=d3.select("#"+a).selectAll(".link").data(e);n.enter().append("path").attr("id",(function(e,t){return"link"+e.beginid+"to"+e.endid})).attr("class",(function(e,t){return"link link-parent-"+e.beginid+" link-child-"+e.endid})).attr("d",(function(e,t){return e.pathAttr})).attr("stroke-width",(function(e){return e.link_width})).attr("fill","none");var i=[],r=[],s=[];n.each((function(e,a){var n=d3.select(this).attr("d");null!=n&&"undefined"!==typeof n&&i.push(n);var o=e.pathAttr;null!=o&&"undefined"!==typeof o&&r.push(o),s.push(d3.select(this).node()),d3.select(this).transition().duration(t.DURATION).attr("stroke-width",(function(e){return e.link_width})).attr("fill","none")})),n.exit().remove();var o=function(){n.each((function(e,t){d3.select(this).attr("d",e.pathAttr)}))};i.length>0&&r.length>0?i.length===r.length&&null!=i[0]&&null!=r[0]&&"undefined"!==typeof i[0]&&"undefined"!==typeof r[0]&&Object(ne["tweenPaths"])({duration:t.DURATION,complete:o,from:i,to:r,next:function(e,t){return s[t].setAttribute("d",e)}}):o()},removeTreeNode:function(){var e=this.treeGId;d3.select("#"+e).selectAll(".lineartree-node").remove()},renderTreeNode:function(e){var t=this,a=(t.nodeArray,t.treeGId),n=(this.layouts,d3.select(this.$el).select("#"+a).selectAll(".lineartree-node-g").data(e,(function(e,t){return e.id})));n.enter().append("g").attr("class","lineartree-node-g").attr("id",(function(e,t){return"nodeg"+e.id})).append("path").attr("class","lineartree-node").attr("id",(function(e,t){return"rootnode"+e.id})).attr("d",(function(e,t){return e.element})).on("mouseover",this.mouseover).on("mouseout",this.mouseout).on("click",(function(e,a){var n=JSON.parse(JSON.stringify(e.data));n.fatherID=e.fatherID,t.onclick(n)})).attr("fill",(function(e){return e.node_color})).style("stroke-width",(function(e){return e.stroke_width})).style("opacity",1),n.each((function(e,t){d3.select(this).select(".unit-node-label").empty()&&0!==e.fontSize&&(d3.select(this).append("defs").append("path").attr("class","unit-label-curve").attr("id",(function(e){return"unit-curve-"+e.id})).attr("d",(function(e){return e.labelPath})),d3.select(this).append("text").attr("class","unit-node-label").attr("id",(function(e){return"unit-node-label-"+e.id})).append("textPath").attr("xlink:href",(function(e,t){return"#unit-curve-"+e.id})).text((function(e,t){return e.labelValue})).style("text-anchor",(function(e){return e.textAnchor})).attr("transform",(function(e){return"translate(0,0)rotate("+e.rotation+")"})).style("font-size",(function(e){return e.fontSize})).attr("alignment-baseline","middle").attr("startOffset","50%"))}));var i=[],r=[],s=[];n.each((function(e,a){var n=e.element,o=d3.select(this).select(".lineartree-node").attr("d");s.push(d3.select(this).select(".lineartree-node").node()),i.push(o),r.push(n),d3.select(this).select(".lineartree-node").transition().duration(t.DURATION).attr("fill",(function(e){return e.node_color})).style("stroke-width",(function(e){return e.stroke_width})).style("opacity",1),d3.select(this).select(".unit-label-curve").transition().duration(t.DURATION).attr("d",(function(e){return e.labelPath})),d3.select(this).select(".unit-node-label").select("textPath").transition().duration(t.DURATION).attr("xlink:href",(function(e,t){return"#unit-curve-"+e.id})).style("text-anchor",(function(e){return e.textAnchor})).style("font-size",(function(e){return e.fontSize})).text((function(e,t){return e.labelValue})).attr("transform",(function(e){return"translate(0,0)rotate("+e.rotation+")"})).attr("alignment-baseline","middle").attr("startOffset","50%")}));var o=function(){n.each((function(e,t){var a=e.element;d3.select(this).select(".lineartree-node").attr("d",a)}))};i.length>0&&r.length>0?i.length===r.length&&null!=i[0]&&null!=r[0]&&"undefined"!==typeof i[0]&&"undefined"!==typeof r[0]&&Object(ne["tweenPaths"])({duration:t.DURATION,complete:o,from:i,to:r,next:function(e,t){return s[t].setAttribute("d",e)}}):o(),n.exit().remove()},renderTreeNode2:function(e){var t=this,a=t.treeGId,n=d3.select("#"+a).selectAll(".lineartree-node").data(e,(function(e,t){return e.id}));n.enter().append("path").attr("class","lineartree-node").attr("id",(function(e,t){return"rootnode"+e.id})).attr("d",(function(e,t){return e.element})).attr("fill",(function(e){return e.node_color})).style("stroke-width",(function(e,t){return e.link_width})).style("opacity",1);var i=[],r=[],s=[];n.each((function(e,a){var n=e.element,o=d3.select(this).attr("d");s.push(d3.select(this).node()),i.push(o),r.push(n),d3.select(this).transition().duration(t.DURATION).attr("fill",(function(e){return e.node_color})).style("stroke-width",(function(e,t){return e.link_width})).style("opacity",1)}));var o=function(){n.each((function(e,t){var a=e.element;d3.select(this).attr("d",a)}))};i.length>0&&r.length>0?i.length===r.length&&null!=i[0]&&null!=r[0]&&"undefined"!==typeof i[0]&&"undefined"!==typeof r[0]&&Object(ne["tweenPaths"])({duration:t.DURATION,complete:o,from:i,to:r,next:function(e,t){return s[t].setAttribute("d",e)}}):o(),n.exit().remove()}})},en=Za,tn=(a("f665"),a("b2c8"),Object(de["a"])(en,Ja,Ka,!1,null,"4dc9eada",null)),an=tn.exports,nn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"treedsl-parameter"},[!1!==this.rootLayoutComponent?a("el-divider",{staticClass:"haveatry",attrs:{"content-position":"left"}},[e._v("Root-Subtree")]):e._e(),!1!==this.rootLayoutComponent?a("el-row",{class:e.hoverRoot?"hoverComponent":"",attrs:{type:"flex",align:"middle",id:"root_panel",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_img",attrs:{span:5}},[a("layout-sketch-figure",{attrs:{category:"root",layout:"X "+e.dslObj.Layout.X.Root.Relation+" | Y "+e.dslObj.Layout.Y.Root.Relation}})],1),a("el-col",{attrs:{span:18}},[a("el-divider",{attrs:{"content-position":"right"}},[e._v(e._s("x - "+e.dslObj.Layout.X.Root.Relation))]),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:24}},["include"===e.dslObj.Layout.X.Root.Relation?a("include-para",{attrs:{axisDsl:e.dslObj.Layout.X.Root,axis:"X",changeDSL:e.changeDSL,changeCanvas:e.changeCanvas}}):e._e(),"juxtapose"===e.dslObj.Layout.X.Root.Relation?a("juxtapose-para",{attrs:{axisDsl:e.dslObj.Layout.X.Root,axis:"X",changeDSL:e.changeDSL,changeCanvas:e.changeCanvas}}):e._e(),"within"===e.dslObj.Layout.X.Root.Relation?a("within-para",{attrs:{axisDsl:e.dslObj.Layout.X.Root,axis:"X",changeDSL:e.changeDSL,changeCanvas:e.changeCanvas}}):e._e()],1)],1),a("el-divider",{attrs:{"content-position":"right"}},[e._v(e._s("y - "+e.dslObj.Layout.Y.Root.Relation))]),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:24}},["include"===e.dslObj.Layout.Y.Root.Relation?a("include-para",{attrs:{axisDsl:e.dslObj.Layout.Y.Root,axis:"Y",changeDSL:e.changeDSL,changeCanvas:e.changeCanvas}}):e._e(),"juxtapose"===e.dslObj.Layout.Y.Root.Relation?a("juxtapose-para",{attrs:{axisDsl:e.dslObj.Layout.Y.Root,axis:"Y",changeDSL:e.changeDSL,changeCanvas:e.changeCanvas}}):e._e(),"within"===e.dslObj.Layout.Y.Root.Relation?a("within-para",{attrs:{axisDsl:e.dslObj.Layout.Y.Root,axis:"Y",changeDSL:e.changeDSL,changeCanvas:e.changeCanvas}}):e._e()],1)],1)],1)],1):e._e(),!1!==this.subtreeLayoutComponent?a("el-divider",{attrs:{"content-position":"left"}},[e._v("\n\t\t\tSubtrees\n\t\t")]):e._e(),!1!==this.subtreeLayoutComponent?a("el-row",{class:e.hoverSubtree?"hoverComponent":"",attrs:{type:"flex",align:"middle",id:"subtree_panel",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_img",attrs:{span:5}},[a("layout-sketch-figure",{attrs:{category:"subtree",layout:"X "+e.dslObj.Layout.X.Subtree.Relation+" | Y "+e.dslObj.Layout.Y.Subtree.Relation}})],1),a("el-col",{attrs:{span:18}},[a("el-divider",{attrs:{"content-position":"right"}},[e._v(e._s("x - "+e.dslObj.Layout.X.Subtree.Relation))]),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:24}},["align"===e.dslObj.Layout.X.Subtree.Relation?a("align-para",{attrs:{axisDsl:e.dslObj.Layout.X.Subtree,axis:"X",changeDSL:e.changeDSL,changeCanvas:e.changeCanvas}}):e._e(),"flatten"===e.dslObj.Layout.X.Subtree.Relation?a("flatten-para",{attrs:{axisDsl:e.dslObj.Layout.X.Subtree,axis:"X",changeDSL:e.changeDSL,valueList:e.valueList,changeCanvas:e.changeCanvas}}):e._e()],1)],1),a("el-divider",{attrs:{"content-position":"right"}},[e._v(e._s("y - "+e.dslObj.Layout.Y.Subtree.Relation))]),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:24}},["align"===e.dslObj.Layout.Y.Subtree.Relation?a("align-para",{attrs:{axisDsl:e.dslObj.Layout.Y.Subtree,axis:"Y",changeDSL:e.changeDSL,changeCanvas:e.changeCanvas}}):e._e(),"flatten"===e.dslObj.Layout.Y.Subtree.Relation?a("flatten-para",{attrs:{axisDsl:e.dslObj.Layout.Y.Subtree,axis:"Y",changeDSL:e.changeDSL,valueList:e.valueList,changeCanvas:e.changeCanvas}}):e._e()],1)],1)],1)],1):e._e(),!1!==this.nodeComponent?a("el-divider",{attrs:{"content-position":"left"}},[e._v("Node")]):e._e(),!1!==this.nodeComponent?a("el-row",{attrs:{type:"flex",align:"middle",id:"node_panel",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_img",attrs:{span:5}},[a("element-sketch-figure",{attrs:{category:"node",elementType:e.dslObj.Element.Node}})],1),a("el-col",{attrs:{span:18}},["rectangle"===e.dslObj.Element.Node?a("rect-para",{attrs:{elementDsl:e.dslObj.Element,changeDSL:e.changeDSL,changeCanvas:e.changeCanvas}}):e._e(),"circle"===e.dslObj.Element.Node?a("circle-para",{attrs:{elementDsl:e.dslObj.Element,changeDSL:e.changeDSL,changeCanvas:e.changeCanvas}}):e._e(),"triangle"===e.dslObj.Element.Node?a("triangle-para",{attrs:{elementDsl:e.dslObj.Element,changeDSL:e.changeDSL,changeCanvas:e.changeCanvas}}):e._e(),"ellipse"===e.dslObj.Element.Node?a("ellipse-para",{attrs:{elementDsl:e.dslObj.Element,changeDSL:e.changeDSL,changeCanvas:e.changeCanvas}}):e._e()],1)],1):e._e(),!1!==this.linkComponent?a("el-divider",{attrs:{"content-position":"left"}},[e._v("Link")]):e._e(),!1!==this.linkComponent?a("el-row",{attrs:{type:"flex",align:"middle",id:"link_panel",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_img",attrs:{span:5}},[a("element-sketch-figure",{attrs:{category:"link",elementType:e.dslObj.Element.Link}})],1),a("el-col",{attrs:{span:18}},[a("link-para",{attrs:{elementDsl:e.dslObj.Element,changeDSL:e.changeDSL,changeCanvas:e.changeCanvas}})],1)],1):e._e(),!1!==this.coordComponent?a("el-divider",{attrs:{"content-position":"left"}},[e._v("Coordinate System")]):e._e(),!1!==this.coordComponent?a("el-row",{attrs:{type:"flex",align:"middle",id:"coord_panel",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_img",attrs:{span:5}},[a("coord-sketch-figure",{attrs:{coordType:e.dslObj.CoordinateSystem.Category}})],1),a("el-col",{attrs:{span:18}},["polar"===e.dslObj.CoordinateSystem.Category?a("polar-para",{attrs:{CoordDsl:e.dslObj.CoordinateSystem,changeDSL:e.changeDSL,changeCanvas:e.changeCanvas}}):e._e(),"triangle"===e.dslObj.CoordinateSystem.Category?a("tri-coord-para",{attrs:{CoordDsl:e.dslObj.CoordinateSystem,changeDSL:e.changeDSL,changeCanvas:e.changeCanvas}}):e._e(),"cartesian"===e.dslObj.CoordinateSystem.Category?a("span",[e._v("no parameter")]):e._e()],1)],1):e._e(),!1!==this.coordComponent||!1!==this.rootLayoutComponent||!1!==this.subtreeLayoutComponent||!1!==this.nodeComponent||!1!==this.linkComponent?a("div",{staticClass:"component-divider"}):e._e()],1)},rn=[],sn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{class:(e.hoverFlag0?"hover":"")+" outer-row",attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v(e._s("X"===e.axis?"padding-left ":"padding-top "))]),a("el-popover",{attrs:{placement:"left",width:"190",trigger:"click"}},[a("el-radio-group",{staticClass:"unit-controller",attrs:{size:"mini"},on:{change:e.changePaddingLeftTop},model:{value:e.paddingLeftTop,callback:function(t){e.paddingLeftTop=t},expression:"paddingLeftTop"}},[a("el-radio-button",{attrs:{label:"treeUnit"}}),a("el-radio-button",{attrs:{label:"rootWidth"}}),a("el-radio-button",{attrs:{label:"rootHeight"}})],1),a("el-button",{staticClass:"margin-controller",attrs:{slot:"reference"},slot:"reference"},[a("span",{staticClass:"icon iconfont icon-chizi_o unit-setting"})])],1)],1),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:24}},[a("el-slider",{attrs:{min:-100},on:{input:e.changeDSL_,change:e.changeDSL__},model:{value:e.leftPadding,callback:function(t){e.leftPadding=t},expression:"leftPadding"}})],1)],1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{class:(e.hoverFlag1?"hover":"")+" outer-row",attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v(e._s("X"===e.axis?"padding-right ":"padding-bottom "))]),a("el-popover",{attrs:{placement:"left",width:"190",trigger:"click"}},[a("el-radio-group",{staticClass:"unit-controller",attrs:{size:"mini"},on:{change:e.changePaddingRightBottom},model:{value:e.paddingRightBottom,callback:function(t){e.paddingRightBottom=t},expression:"paddingRightBottom"}},[a("el-radio-button",{attrs:{label:"treeUnit"}}),a("el-radio-button",{attrs:{label:"rootWidth"}}),a("el-radio-button",{attrs:{label:"rootHeight"}})],1),a("el-button",{staticClass:"margin-controller",attrs:{slot:"reference"},slot:"reference"},[a("span",{staticClass:"icon iconfont icon-chizi_o unit-setting"})])],1)],1),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:24}},[a("el-slider",{attrs:{min:-100},on:{input:e.changeDSL_,change:e.changeDSL__},model:{value:e.rightPadding,callback:function(t){e.rightPadding=t},expression:"rightPadding"}})],1)],1)],1),a("el-col",{attrs:{span:1}})],1)],1)},on=[],ln={name:"include-para",props:{axisDsl:Object,axis:String,changeDSL:Function,changeCanvas:Function},data:function(){return{units:["","h","w"],leftPadding:0,rightPadding:0,paddingRightBottom:"treeUnit",paddingLeftTop:"treeUnit"}},created:function(){"Padding"in this.axisDsl?(this.leftPadding=Math.floor(100*this.axisDsl.Padding[0]),this.rightPadding=Math.floor(100*this.axisDsl.Padding[1])):this.axisDsl.Padding=[0,0],"Padding_"in this.axisDsl?(""===this.axisDsl.Padding_[0]?this.paddingLeftTop="treeUnit":this.paddingLeftTop="w"===this.axisDsl.Padding_[0]?"rootWidth":"rootHeight",""===this.axisDsl.Padding_[1]?this.paddingRightBottom="treeUnit":this.paddingRightBottom="w"===this.axisDsl.Padding_[1]?"rootWidth":"rootHeight"):this.axisDsl.Padding_=["",""]},methods:{changePaddingRightBottom:function(){"treeUnit"===this.paddingRightBottom&&(this.axisDsl.Padding_[1]=""),"rootWidth"===this.paddingRightBottom&&(this.axisDsl.Padding_[1]="w"),"rootHeight"===this.paddingRightBottom&&(this.axisDsl.Padding_[1]="h"),this.changeDSL(),this.changeCanvas()},changePaddingLeftTop:function(){"treeUnit"===this.paddingLeftTop&&(this.axisDsl.Padding_[0]=""),"rootWidth"===this.paddingLeftTop&&(this.axisDsl.Padding_[0]="w"),"rootHeight"===this.paddingLeftTop&&(this.axisDsl.Padding_[0]="h"),this.changeDSL(),this.changeCanvas()},changeDSL_:function(){this.axisDsl.Padding[0]=this.leftPadding/100,this.axisDsl.Padding[1]=this.rightPadding/100,this.changeDSL()},changeDSL__:function(){this.changeCanvas()}},watch:{manipulateValue:function(e){var t="RootLeftPadding-"+this.axis.toLowerCase();this.manipulatePara===t&&(this.leftPadding=e),t="RootRightPadding-"+this.axis.toLowerCase(),this.manipulatePara===t&&(this.rightPadding=e)}},computed:Object(o["a"])({},Object(u["d"])(["manipulatePara","manipulateValue","hoverParam","hoverParamAxis"]),{hoverFlag0:function(){return this.hoverParamAxis===this.axis.toLowerCase()&&"RootLeftPadding"===this.hoverParam},hoverFlag1:function(){return this.hoverParamAxis===this.axis.toLowerCase()&&"RootRightPadding"===this.hoverParam}})},cn=ln,dn=(a("b47e"),Object(de["a"])(cn,sn,on,!1,null,"1a09c336",null)),un=dn.exports,hn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"outer-row",attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("position")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-radio-group",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.selectedPosition,callback:function(t){e.selectedPosition=t},expression:"selectedPosition"}},[a("el-radio-button",{attrs:{label:"X"===e.axis?"left":"top"}}),a("el-radio-button",{attrs:{label:"X"===e.axis?"right":"bottom"}})],1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{class:(e.hoverFlag?"hover":"")+" outer-row",attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("margin")]),a("el-popover",{attrs:{placement:"left",width:"190",trigger:"click"}},[a("el-radio-group",{staticClass:"unit-controller",attrs:{size:"mini"},on:{change:e.changeMarginUnit},model:{value:e.marginUnit,callback:function(t){e.marginUnit=t},expression:"marginUnit"}},[a("el-radio-button",{attrs:{label:"treeUnit"}}),a("el-radio-button",{attrs:{label:"rootWidth"}}),a("el-radio-button",{attrs:{label:"rootHeight"}})],1),a("el-button",{staticClass:"margin-controller",attrs:{slot:"reference"},slot:"reference"},[a("span",{staticClass:"icon iconfont icon-chizi_o unit-setting"})])],1)],1),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:24}},[a("el-slider",{attrs:{min:-100},on:{input:e.changeDSL__,change:e.changeCanvas},model:{value:e.Margin,callback:function(t){e.Margin=t},expression:"Margin"}})],1)],1)],1),a("el-col",{attrs:{span:1}})],1)],1)},pn=[],fn={name:"juxtapose-para",props:{axisDsl:Object,axis:String,changeDSL:Function,changeCanvas:Function},data:function(){return{selectedPosition:"",Margin:0,marginUnit:"treeUnit"}},mounted:function(){"Margin"in this.axisDsl?this.Margin=Math.floor(100*this.axisDsl.Margin):this.axisDsl.Margin=0,console.log("this.axisDsl",this.axisDsl),"Position"in this.axisDsl?this.selectedPosition=this.axisDsl.Position:(this.axisDsl.Position="X"===this.axis?"left":"top",this.selectedPosition="X"===this.axis?"left":"top"),"Margin_"in this.axisDsl?""===this.axisDsl.Margin_?this.marginUnit="treeUnit":this.marginUnit="w"===this.axisDsl.Margin_?"rootWidth":"rootHeight":this.axisDsl.Margin_=""},watch:{manipulateValue:function(e){var t="RootMargin-"+this.axis.toLowerCase();this.manipulatePara===t&&(this.Margin=e)}},methods:{changeMarginUnit:function(){"treeUnit"===this.marginUnit&&(this.axisDsl.Margin_=""),"rootWidth"===this.marginUnit&&(this.axisDsl.Margin_="w"),"rootHeight"===this.marginUnit&&(this.axisDsl.Margin_="h"),this.changeDSL(),this.changeCanvas()},changeDSL_:function(){"X"===this.axis?this.axisDsl.Position="1"===this.selectedPosition?"left":"right":this.axisDsl.Position="1"===this.selectedPosition?"top":"bottom",this.axisDsl.Position=this.selectedPosition,this.changeDSL(),this.changeCanvas()},changeDSL__:function(){this.axisDsl.Margin=this.Margin/100,this.changeDSL()}},computed:Object(o["a"])({},Object(u["d"])(["manipulatePara","manipulateValue","hoverParam","hoverParamAxis"]),{hoverFlag:function(){return this.hoverParamAxis===this.axis.toLowerCase()&&"RootMargin"===this.hoverParam}})},gn=fn,mn=(a("120b"),a("a685"),Object(de["a"])(gn,hn,pn,!1,null,"d6e6a4e6",null)),yn=mn.exports,vn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"within"},[a("el-row",{class:e.hoverFlag?"hover":"",attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("alignment")])]),a("el-col",{attrs:{span:1}}),a("el-col",{attrs:{span:15}},[a("el-radio-group",{attrs:{size:"mini"},on:{change:function(t){e.selectAlignment()}},model:{value:e.selectedPara,callback:function(t){e.selectedPara=t},expression:"selectedPara"}},[a("el-radio-button",{attrs:{label:e.label[e.axis][0]}}),a("el-radio-button",{attrs:{label:e.label[e.axis][1]}}),a("el-radio-button",{attrs:{label:e.label[e.axis][2]}})],1)],1),a("el-col",{attrs:{span:1}})],1)],1)},bn=[],Dn={name:"within-para",props:{axisDsl:Object,axis:String,changeDSL:Function,changeCanvas:Function},data:function(){return{label:{X:["left","middle","right"],Y:["top","middle","bottom"]},selectedPara:""}},mounted:function(){"Alignment"in this.axisDsl?this.selectedPara=this.axisDsl.Alignment:(this.axisDsl.Alignment="middle",this.selectedPara="middle")},methods:{selectAlignment:function(e){this.axisDsl.Alignment=this.selectedPara,this.changeDSL(),this.changeCanvas()}},computed:Object(o["a"])({},Object(u["d"])(["hoverParam","hoverParamAxis"]),{hoverFlag:function(){return this.hoverParamAxis===this.axis.toLowerCase()&&"RootAlignment"===this.hoverParam}})},Sn=Dn,Tn=(a("62c0"),a("d4a5"),Object(de["a"])(Sn,vn,bn,!1,null,"6adefaf9",null)),xn=Tn.exports,An=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{class:(e.hoverFlag?"hover":"")+" outer-row",attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("alignment")])]),a("el-col",{attrs:{span:1}}),a("el-col",{attrs:{span:15}},[a("el-radio-group",{attrs:{size:"mini"},on:{change:function(t){e.selectAlignment()}},model:{value:e.selectedPara,callback:function(t){e.selectedPara=t},expression:"selectedPara"}},[a("el-radio-button",{attrs:{label:e.label[e.axis][0]}}),a("el-radio-button",{attrs:{label:e.label[e.axis][1]}}),a("el-radio-button",{attrs:{label:e.label[e.axis][2]}})],1)],1),a("el-col",{attrs:{span:1}})],1)],1)},_n=[],Ln={name:"align-para",props:{axisDsl:Object,axis:String,changeDSL:Function,changeCanvas:Function},data:function(){return{label:{X:["left","middle","right"],Y:["top","middle","bottom"]},selectedPara:""}},mounted:function(){"Alignment"in this.axisDsl?this.selectedPara=this.axisDsl.Alignment:(this.axisDsl.Alignment="middle",this.selectedPara="middle")},methods:{selectAlignment:function(){this.axisDsl.Alignment=this.selectedPara,this.changeDSL(),this.changeCanvas()}},computed:Object(o["a"])({},Object(u["d"])(["manipulatePara","manipulateValue","hoverParam","hoverParamAxis"]),{hoverFlag:function(){return this.hoverParamAxis===this.axis.toLowerCase()&&"SubtreeAlignment"===this.hoverParam}})},Cn=Ln,On=(a("1261"),Object(de["a"])(Cn,An,_n,!1,null,"52f9c7dc",null)),Rn=On.exports,En=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"flattenPara"}},[a("el-row",{class:(e.hoverFlag?"hover":"")+" outer-row",attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("margin")]),a("el-popover",{attrs:{placement:"left",width:"190",trigger:"click"}},[a("el-radio-group",{staticClass:"unit-controller",attrs:{size:"mini"},on:{change:e.changeMarginUnit},model:{value:e.marginUnit,callback:function(t){e.marginUnit=t},expression:"marginUnit"}},[a("el-radio-button",{attrs:{label:"subtrees"}}),a("el-radio-button",{attrs:{label:"rootWidth"}}),a("el-radio-button",{attrs:{label:"rootHeight"}})],1),a("el-button",{staticClass:"margin-controller",attrs:{slot:"reference"},slot:"reference"},[a("span",{staticClass:"icon iconfont icon-chizi_o unit-setting"})])],1)],1),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-row",{staticClass:"slider-row",attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:24}},[a("el-slider",{attrs:{min:-100},on:{input:e.changeDSL__,change:e.changeCanvas},model:{value:e.Margin,callback:function(t){e.Margin=t},expression:"Margin"}})],1)],1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("type")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.MarginType,callback:function(t){e.MarginType=t},expression:"MarginType"}},e._l(e.MarginTypeList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("sort")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.SortingCriteria,callback:function(t){e.SortingCriteria=t},expression:"SortingCriteria"}},e._l(e.valueList,(function(e){return a("el-option",{key:e.attrName,attrs:{label:e.attrName,value:e.attrName}})})),1)],1),a("el-col",{attrs:{span:1}})],1),"null"!==e.SortingCriteria?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("order")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.SortingOrder,callback:function(t){e.SortingOrder=t},expression:"SortingOrder"}},e._l(e.orderList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-col",{attrs:{span:1}})],1):e._e()],1)},jn=[],Pn={name:"flatten-para",props:{axisDsl:Object,axis:String,changeDSL:Function,changeCanvas:Function},data:function(){return{Margin:0,SortingOrder:"asc",orderList:["asc","desc"],SortingCriteria:"null",marginUnit:"subtrees",MarginType:"space-around",MarginTypeList:["space-around","space-between"]}},mounted:function(){"Margin"in this.axisDsl?this.Margin=Math.floor(100*this.axisDsl.Margin):this.axisDsl.Margin=0,"Margin_"in this.axisDsl?""===this.axisDsl.Margin_?this.marginUnit="subtrees":this.marginUnit="w"===this.axisDsl.Margin_?"rootWidth":"rootHeight":this.axisDsl.Margin_="","SortingOrder"in this.axisDsl&&(this.SortingOrder=this.axisDsl.SortingOrder),"SortingCriteria"in this.axisDsl&&(this.SortingCriteria=this.axisDsl.SortingCriteria),"MarginType"in this.axisDsl?this.MarginType=this.axisDsl.MarginType:this.axisDsl.MarginType=this.MarginType,console.log("valueList",this.valueList,"orderList",this.orderList)},watch:{manipulateValue:function(e){var t="SubtreeMargin-"+this.axis.toLowerCase();this.manipulatePara===t&&(this.Margin=e)}},methods:{changeMarginUnit:function(){"subtrees"===this.marginUnit&&(this.axisDsl.Margin_=""),"rootWidth"===this.marginUnit&&(this.axisDsl.Margin_="w"),"rootHeight"===this.marginUnit&&(this.axisDsl.Margin_="h"),this.changeDSL(),this.changeCanvas()},changeDSL_:function(){this.axisDsl.SortingCriteria=this.SortingCriteria,this.axisDsl.SortingOrder=this.SortingOrder,this.axisDsl.MarginType=this.MarginType,this.changeDSL(),this.changeCanvas()},changeDSL__:function(){this.axisDsl.Margin=this.Margin/100,this.changeDSL()}},created:function(){},computed:Object(o["a"])({},Object(u["d"])(["attrObjArray","manipulatePara","manipulateValue","hoverParam","hoverParamAxis"]),{valueList:function(){var e=[{attrName:"null",attrType:"default"}];return this.attrObjArray.forEach((function(t){e.push(Object(o["a"])({},t))})),e},hoverFlag:function(){return this.hoverParamAxis===this.axis.toLowerCase()&&"SubtreeMargin"===this.hoverParam}})},wn=Pn,Nn=(a("a660"),a("552f"),Object(de["a"])(wn,En,jn,!1,null,"563f0f56",null)),Un=Nn.exports,kn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"rectPara"}},[a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("width")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.RootWidth,callback:function(t){e.RootWidth=t},expression:"RootWidth"}},e._l(e.widthValueList,(function(e){return a("el-option",{key:e.attrName,attrs:{label:e.attrName,value:e.attrName}})})),1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("height")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.RootHeight,callback:function(t){e.RootHeight=t},expression:"RootHeight"}},e._l(e.widthValueList,(function(e){return a("el-option",{key:e.attrName,attrs:{label:e.attrName,value:e.attrName}})})),1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("label")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.Label,callback:function(t){e.Label=t},expression:"Label"}},e._l(e.labelValueList,(function(e){return a("el-option",{key:e.attrName,attrs:{label:e.attrName,value:e.attrName}})})),1)],1),a("el-col",{attrs:{span:1}})],1),"hidden"!==e.Label?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("anchor")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.TextAnchor,callback:function(t){e.TextAnchor=t},expression:"TextAnchor"}},e._l(e.TextAnchorList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-col",{attrs:{span:1}})],1):e._e(),"hidden"!==e.Label?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("dx")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-slider",{attrs:{min:-100},on:{input:e.changeDSL__,change:e.changeCanvas},model:{value:e.TextDx,callback:function(t){e.TextDx=t},expression:"TextDx"}})],1),a("el-col",{attrs:{span:1}})],1):e._e(),"hidden"!==e.Label?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("dy")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-slider",{attrs:{min:-100},on:{input:e.changeDSL__,change:e.changeCanvas},model:{value:e.TextDy,callback:function(t){e.TextDy=t},expression:"TextDy"}})],1),a("el-col",{attrs:{span:1}})],1):e._e(),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("color")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeColor},model:{value:e.colorIndex,callback:function(t){e.colorIndex=t},expression:"colorIndex"}},e._l(e.valueList,(function(e,t){return a("el-option",{key:e.attrName,attrs:{label:e.attrName,value:t}})})),1)],1),a("el-col",{attrs:{span:1}})],1),"default"===e.colorFlag?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("value")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-color-picker",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.StaticColor,callback:function(t){e.StaticColor=t},expression:"StaticColor"}})],1),a("el-col",{attrs:{span:1}})],1):e._e(),"number"===e.colorFlag?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("colorRange")])]),a("el-col",{attrs:{span:2}}),a("el-col",{staticClass:"panel_control",attrs:{span:4}},[a("el-color-picker",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.ColorRange[0],callback:function(t){e.$set(e.ColorRange,0,t)},expression:"ColorRange[0]"}})],1),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:4}},[a("el-color-picker",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.ColorRange[1],callback:function(t){e.$set(e.ColorRange,1,t)},expression:"ColorRange[1]"}})],1),a("el-col",{attrs:{span:4}})],1):e._e(),"string"===e.colorFlag?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("colorSchema")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.ColorSchema,callback:function(t){e.ColorSchema=t},expression:"ColorSchema"}},e._l(e.colorSchemaList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-col",{attrs:{span:1}})],1):e._e()],1)},In=[],Mn={name:"rect-para",props:{elementDsl:Object,changeDSL:Function,changeCanvas:Function},data:function(){return{colorFlag:"default",colorIndex:1,colorSchemaList:["option 1","option 2"],RootWidth:"adaptive",RootHeight:"adaptive",sizeOption:"fill",ColorRange:["",""],ColorSchema:"",StaticColor:"#6baed6",Label:"hidden",TextAnchor:"middle",TextAnchorList:["start","middle","end"],TextDx:0,TextDy:0,TextRotation:0}},mounted:function(){},created:function(){var e=this;this.colorFlag=this.valueList[this.colorIndex].attrType,"TextRotation"in this.elementDsl?this.TextRotation=Math.floor(100*this.elementDsl.TextRotation):this.elementDsl.TextRotation=this.TextRotation/100,"TextDx"in this.elementDsl?this.TextDx=Math.floor(100*this.elementDsl.TextDx):this.elementDsl.TextDx=this.TextDx/100,"TextDy"in this.elementDsl?this.TextDy=Math.floor(100*this.elementDsl.TextDy):this.elementDsl.TextDy=this.TextDy/100,"TextAnchor"in this.elementDsl?this.TextAnchor=this.elementDsl.TextAnchor:this.elementDsl.TextAnchor=this.TextAnchor,"ColorRange"in this.elementDsl?(this.ColorRange[0]=this.elementDsl.ColorRange[0],this.ColorRange[1]=this.elementDsl.ColorRange[1]):(this.elementDsl.ColorRange=["#2171b5","#deebf7"],this.ColorRange=["#2171b5","#deebf7"]),"RootWidth"in this.elementDsl?this.RootWidth=this.elementDsl.RootWidth:this.elementDsl.RootWidth="adaptive","RootHeight"in this.elementDsl?this.RootHeight=this.elementDsl.RootHeight:this.elementDsl.RootHeight="adaptive","ColorSchema"in this.elementDsl?this.ColorSchema=this.elementDsl.ColorSchema:(this.elementDsl.ColorSchema=this.colorSchemaList[0],this.ColorSchema=this.colorSchemaList[0]),"Color"in this.elementDsl?this.valueList.forEach((function(t,a){t.attrName===e.elementDsl.Color&&(e.colorIndex=a,e.colorFlag=t.attrType)})):(this.elementDsl.Color=this.valueList[this.colorIndex].attrName,this.elementDsl.ColorType=this.valueList[this.colorIndex].attrType),"StaticColor"in this.elementDsl?this.StaticColor=this.elementDsl.StaticColor:this.elementDsl.StaticColor=this.StaticColor,"Label"in this.elementDsl?this.Label=this.elementDsl.Label:this.elementDsl.Label=this.Label},computed:Object(o["a"])({},Object(u["d"])(["attrObjArray"]),{valueList:function(){var e=[{attrName:"static",attrType:"default"}];return this.attrObjArray.forEach((function(t){e.push(Object(o["a"])({},t))})),e},widthValueList:function(){var e=[{attrName:"adaptive",attrType:"default"}];return this.attrObjArray.forEach((function(t){"number"===t.attrType&&e.push(Object(o["a"])({},t))})),e},labelValueList:function(){var e=[{attrName:"hidden",attrType:"default"}];return this.attrObjArray.forEach((function(t){e.push(Object(o["a"])({},t))})),e}}),methods:{changeColor:function(e){var t=this.valueList[e];this.colorFlag=t.attrType,this.elementDsl.Color=t.attrName,this.elementDsl.ColorType=t.attrType,this.changeDSL(),this.changeCanvas()},changeDSL_:function(){this.elementDsl.RootWidth=this.RootWidth,this.elementDsl.RootHeight=this.RootHeight,this.elementDsl.ColorRange[0]=this.ColorRange[0],this.elementDsl.ColorRange[1]=this.ColorRange[1],this.elementDsl.ColorSchema=this.ColorSchema,this.elementDsl.StaticColor=this.StaticColor,this.elementDsl.Label=this.Label,this.elementDsl.TextAnchor=this.TextAnchor,this.changeDSL(),this.changeCanvas()},changeDSL__:function(){this.elementDsl.TextDx=this.TextDx/100,this.elementDsl.TextDy=this.TextDy/100,this.elementDsl.TextRotation=this.TextRotation/100,this.changeDSL()}}},Wn=Mn,Vn=(a("e289"),a("6d59"),Object(de["a"])(Wn,kn,In,!1,null,"17080376",null)),$n=Vn.exports,Hn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"circlePara"}},[a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("width")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.RootWidth,callback:function(t){e.RootWidth=t},expression:"RootWidth"}},e._l(e.widthValueList,(function(e){return a("el-option",{key:e.attrName,attrs:{label:e.attrName,value:e.attrName}})})),1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("height")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.RootHeight,callback:function(t){e.RootHeight=t},expression:"RootHeight"}},e._l(e.widthValueList,(function(e){return a("el-option",{key:e.attrName,attrs:{label:e.attrName,value:e.attrName}})})),1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("fit")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.SizeOption,callback:function(t){e.SizeOption=t},expression:"SizeOption"}},e._l(e.sizeOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-col",{attrs:{span:1}})],1),"static"===e.SizeOption?a("el-row",{staticClass:"outer-row",attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("radius")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:24}},[a("el-slider",{attrs:{min:1},on:{input:e.changeDSL__,change:e.changeCanvas},model:{value:e.StaticSize,callback:function(t){e.StaticSize=t},expression:"StaticSize"}})],1)],1)],1),a("el-col",{attrs:{span:1}})],1):e._e(),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("label")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.Label,callback:function(t){e.Label=t},expression:"Label"}},e._l(e.labelValueList,(function(e){return a("el-option",{key:e.attrName,attrs:{label:e.attrName,value:e.attrName}})})),1)],1),a("el-col",{attrs:{span:1}})],1),"hidden"!==e.Label?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("anchor")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.TextAnchor,callback:function(t){e.TextAnchor=t},expression:"TextAnchor"}},e._l(e.TextAnchorList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-col",{attrs:{span:1}})],1):e._e(),"hidden"!==e.Label?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("dx")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-slider",{attrs:{min:-100},on:{input:e.changeDSL__,change:e.changeCanvas},model:{value:e.TextDx,callback:function(t){e.TextDx=t},expression:"TextDx"}})],1),a("el-col",{attrs:{span:1}})],1):e._e(),"hidden"!==e.Label?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("dy")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-slider",{attrs:{min:-100},on:{input:e.changeDSL__,change:e.changeCanvas},model:{value:e.TextDy,callback:function(t){e.TextDy=t},expression:"TextDy"}})],1),a("el-col",{attrs:{span:1}})],1):e._e(),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("color")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeColor},model:{value:e.colorIndex,callback:function(t){e.colorIndex=t},expression:"colorIndex"}},e._l(e.valueList,(function(e,t){return a("el-option",{key:e.attrName,attrs:{label:e.attrName,value:t}})})),1)],1),a("el-col",{attrs:{span:1}})],1),"default"===e.colorFlag?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("value")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-color-picker",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.StaticColor,callback:function(t){e.StaticColor=t},expression:"StaticColor"}})],1),a("el-col",{attrs:{span:1}})],1):e._e(),"number"===e.colorFlag?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("colorRange")])]),a("el-col",{attrs:{span:2}}),a("el-col",{staticClass:"panel_control",attrs:{span:4}},[a("el-color-picker",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.ColorRange[0],callback:function(t){e.$set(e.ColorRange,0,t)},expression:"ColorRange[0]"}})],1),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:4}},[a("el-color-picker",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.ColorRange[1],callback:function(t){e.$set(e.ColorRange,1,t)},expression:"ColorRange[1]"}})],1),a("el-col",{attrs:{span:4}})],1):e._e(),"string"===e.colorFlag?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("colorSchema")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.ColorSchema,callback:function(t){e.ColorSchema=t},expression:"ColorSchema"}},e._l(e.colorSchemaList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-col",{attrs:{span:1}})],1):e._e()],1)},Yn=[],Xn={name:"circle-para",props:{elementDsl:Object,changeDSL:Function,changeCanvas:Function},data:function(){return{colorFlag:"default",colorIndex:1,colorSchemaList:["option 1","option 2"],sizeOptions:["static","fill"],RootWidth:"adaptive",RootHeight:"adaptive",SizeOption:"fill",ColorRange:["",""],ColorSchema:"",StaticColor:"#6baed6",Label:"hidden",StaticSize:10,TextAnchor:"middle",TextAnchorList:["start","middle","end"],TextDx:0,TextDy:0,TextRotation:0}},mounted:function(){},created:function(){var e=this;this.colorFlag=this.valueList[this.colorIndex].attrType,"TextRotation"in this.elementDsl?this.TextRotation=Math.floor(100*this.elementDsl.TextRotation):this.elementDsl.TextRotation=this.TextRotation/100,"TextDx"in this.elementDsl?this.TextDx=Math.floor(100*this.elementDsl.TextDx):this.elementDsl.TextDx=this.TextDx/100,"TextDy"in this.elementDsl?this.TextDy=Math.floor(100*this.elementDsl.TextDy):this.elementDsl.TextDy=this.TextDy/100,"TextAnchor"in this.elementDsl?this.TextAnchor=this.elementDsl.TextAnchor:this.elementDsl.TextAnchor=this.TextAnchor,"ColorRange"in this.elementDsl?(this.ColorRange[0]=this.elementDsl.ColorRange[0],this.ColorRange[1]=this.elementDsl.ColorRange[1]):(this.elementDsl.ColorRange=["#2171b5","#deebf7"],this.ColorRange=["#2171b5","#deebf7"]),"RootWidth"in this.elementDsl?this.RootWidth=this.elementDsl.RootWidth:this.elementDsl.RootWidth="adaptive","RootHeight"in this.elementDsl?this.RootHeight=this.elementDsl.RootHeight:this.elementDsl.RootHeight="adaptive","SizeOption"in this.elementDsl?this.SizeOption=this.elementDsl.SizeOption:this.elementDsl.SizeOption="fill","ColorSchema"in this.elementDsl?this.ColorSchema=this.elementDsl.ColorSchema:(this.elementDsl.ColorSchema=this.colorSchemaList[0],this.ColorSchema=this.colorSchemaList[0]),"Color"in this.elementDsl?this.valueList.forEach((function(t,a){t.attrName===e.elementDsl.Color&&(e.colorIndex=a,e.colorFlag=t.attrType)})):(this.elementDsl.Color=this.valueList[this.colorIndex].attrName,this.elementDsl.ColorType=this.valueList[this.colorIndex].attrType),"StaticColor"in this.elementDsl?this.StaticColor=this.elementDsl.StaticColor:this.elementDsl.StaticColor=this.StaticColor,"Label"in this.elementDsl?this.Label=this.elementDsl.Label:this.elementDsl.Label=this.Label,"StaticSize"in this.elementDsl?this.StaticSize=this.elementDsl.StaticSize:this.elementDsl.StaticSize=this.StaticSize},computed:Object(o["a"])({},Object(u["d"])(["attrObjArray"]),{valueList:function(){var e=[{attrName:"static",attrType:"default"}];return this.attrObjArray.forEach((function(t){e.push(Object(o["a"])({},t))})),e},widthValueList:function(){var e=[{attrName:"adaptive",attrType:"default"}];return this.attrObjArray.forEach((function(t){"number"===t.attrType&&e.push(Object(o["a"])({},t))})),e},labelValueList:function(){var e=[{attrName:"hidden",attrType:"default"}];return this.attrObjArray.forEach((function(t){e.push(Object(o["a"])({},t))})),e}}),methods:{changeColor:function(e){var t=this.valueList[e];this.colorFlag=t.attrType,this.elementDsl.Color=t.attrName,this.elementDsl.ColorType=t.attrType,this.changeDSL(),this.changeCanvas()},changeDSL_:function(){this.elementDsl.RootWidth=this.RootWidth,this.elementDsl.RootHeight=this.RootHeight,this.elementDsl.SizeOption=this.SizeOption,this.elementDsl.ColorRange[0]=this.ColorRange[0],this.elementDsl.ColorRange[1]=this.ColorRange[1],this.elementDsl.ColorSchema=this.ColorSchema,this.elementDsl.StaticColor=this.StaticColor,this.elementDsl.Label=this.Label,this.elementDsl.TextAnchor=this.TextAnchor,this.changeDSL(),this.changeCanvas()},changeDSL__:function(){this.elementDsl.StaticSize=this.StaticSize,this.elementDsl.TextDx=this.TextDx/100,this.elementDsl.TextDy=this.TextDy/100,this.elementDsl.TextRotation=this.TextRotation/100,this.changeDSL()}}},Fn=Xn,zn=(a("1845"),a("0cb7"),Object(de["a"])(Fn,Hn,Yn,!1,null,"442829de",null)),Bn=zn.exports,Gn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"triPara"}},[a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("width")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.RootWidth,callback:function(t){e.RootWidth=t},expression:"RootWidth"}},e._l(e.widthValueList,(function(e){return a("el-option",{key:e.attrName,attrs:{label:e.attrName,value:e.attrName}})})),1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("height")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.RootHeight,callback:function(t){e.RootHeight=t},expression:"RootHeight"}},e._l(e.widthValueList,(function(e){return a("el-option",{key:e.attrName,attrs:{label:e.attrName,value:e.attrName}})})),1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("direction")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.Direction,callback:function(t){e.Direction=t},expression:"Direction"}},e._l(e.DirectionList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("label")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.Label,callback:function(t){e.Label=t},expression:"Label"}},e._l(e.labelValueList,(function(e){return a("el-option",{key:e.attrName,attrs:{label:e.attrName,value:e.attrName}})})),1)],1),a("el-col",{attrs:{span:1}})],1),"hidden"!==e.Label?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("anchor")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.TextAnchor,callback:function(t){e.TextAnchor=t},expression:"TextAnchor"}},e._l(e.TextAnchorList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-col",{attrs:{span:1}})],1):e._e(),"hidden"!==e.Label?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("dx")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-slider",{attrs:{min:-100},on:{input:e.changeDSL__,change:e.changeCanvas},model:{value:e.TextDx,callback:function(t){e.TextDx=t},expression:"TextDx"}})],1),a("el-col",{attrs:{span:1}})],1):e._e(),"hidden"!==e.Label?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("dy")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-slider",{attrs:{min:-100},on:{input:e.changeDSL__,change:e.changeCanvas},model:{value:e.TextDy,callback:function(t){e.TextDy=t},expression:"TextDy"}})],1),a("el-col",{attrs:{span:1}})],1):e._e(),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("color")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeColor},model:{value:e.colorIndex,callback:function(t){e.colorIndex=t},expression:"colorIndex"}},e._l(e.valueList,(function(e,t){return a("el-option",{key:e.attrName,attrs:{label:e.attrName,value:t}})})),1)],1),a("el-col",{attrs:{span:1}})],1),"default"===e.colorFlag?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("value")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-color-picker",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.StaticColor,callback:function(t){e.StaticColor=t},expression:"StaticColor"}})],1),a("el-col",{attrs:{span:1}})],1):e._e(),"number"===e.colorFlag?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("colorRange")])]),a("el-col",{attrs:{span:2}}),a("el-col",{staticClass:"panel_control",attrs:{span:4}},[a("el-color-picker",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.ColorRange[0],callback:function(t){e.$set(e.ColorRange,0,t)},expression:"ColorRange[0]"}})],1),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:4}},[a("el-color-picker",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.ColorRange[1],callback:function(t){e.$set(e.ColorRange,1,t)},expression:"ColorRange[1]"}})],1),a("el-col",{attrs:{span:4}})],1):e._e(),"string"===e.colorFlag?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("colorSchema")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.ColorSchema,callback:function(t){e.ColorSchema=t},expression:"ColorSchema"}},e._l(e.colorSchemaList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-col",{attrs:{span:1}})],1):e._e()],1)},Jn=[],Kn={name:"tri-para",props:{elementDsl:Object,changeDSL:Function,changeCanvas:Function},data:function(){return{colorFlag:"default",colorIndex:1,colorSchemaList:["option 1","option 2"],RootWidth:"adaptive",RootHeight:"adaptive",sizeOption:"fill",Direction:"top",DirectionList:["top","bottom","left","right"],ColorRange:["",""],ColorSchema:"",StaticColor:"#6baed6",Label:"hidden",TextAnchor:"middle",TextAnchorList:["start","middle","end"],TextDx:0,TextDy:0,TextRotation:0}},mounted:function(){},created:function(){var e=this;this.colorFlag=this.valueList[this.colorIndex].attrType,"TextRotation"in this.elementDsl?this.TextRotation=Math.floor(100*this.elementDsl.TextRotation):this.elementDsl.TextRotation=this.TextRotation/100,"TextDx"in this.elementDsl?this.TextDx=Math.floor(100*this.elementDsl.TextDx):this.elementDsl.TextDx=this.TextDx/100,"TextDy"in this.elementDsl?this.TextDy=Math.floor(100*this.elementDsl.TextDy):this.elementDsl.TextDy=this.TextDy/100,"TextAnchor"in this.elementDsl?this.TextAnchor=this.elementDsl.TextAnchor:this.elementDsl.TextAnchor=this.TextAnchor,"ColorRange"in this.elementDsl?(this.ColorRange[0]=this.elementDsl.ColorRange[0],this.ColorRange[1]=this.elementDsl.ColorRange[1]):(this.elementDsl.ColorRange=["#2171b5","#deebf7"],this.ColorRange=["#2171b5","#deebf7"]),"RootWidth"in this.elementDsl?this.RootWidth=this.elementDsl.RootWidth:this.elementDsl.RootWidth="adaptive","RootHeight"in this.elementDsl?this.RootHeight=this.elementDsl.RootHeight:this.elementDsl.RootHeight="adaptive","ColorSchema"in this.elementDsl?this.ColorSchema=this.elementDsl.ColorSchema:(this.elementDsl.ColorSchema=this.colorSchemaList[0],this.ColorSchema=this.colorSchemaList[0]),"Direction"in this.elementDsl?this.Direction=this.elementDsl.Direction:this.elementDsl.Direction="top","Color"in this.elementDsl?this.valueList.forEach((function(t,a){t.attrName===e.elementDsl.Color&&(e.colorIndex=a,e.colorFlag=t.attrType)})):(this.elementDsl.Color=this.valueList[this.colorIndex].attrName,this.elementDsl.ColorType=this.valueList[this.colorIndex].attrType),"StaticColor"in this.elementDsl?this.StaticColor=this.elementDsl.StaticColor:this.elementDsl.StaticColor=this.StaticColor,"Label"in this.elementDsl?this.Label=this.elementDsl.Label:this.elementDsl.Label=this.Label},computed:Object(o["a"])({},Object(u["d"])(["attrObjArray"]),{valueList:function(){var e=[{attrName:"static",attrType:"default"}];return this.attrObjArray.forEach((function(t){e.push(Object(o["a"])({},t))})),e},widthValueList:function(){var e=[{attrName:"adaptive",attrType:"default"}];return this.attrObjArray.forEach((function(t){"number"===t.attrType&&e.push(Object(o["a"])({},t))})),e},labelValueList:function(){var e=[{attrName:"hidden",attrType:"default"}];return this.attrObjArray.forEach((function(t){e.push(Object(o["a"])({},t))})),e}}),methods:{changeColor:function(e){var t=this.valueList[e];this.colorFlag=t.attrType,this.elementDsl.Color=t.attrName,this.elementDsl.ColorType=t.attrType,this.changeDSL(),this.changeCanvas()},changeDSL_:function(){this.elementDsl.RootWidth=this.RootWidth,this.elementDsl.RootHeight=this.RootHeight,this.elementDsl.Direction=this.Direction,this.elementDsl.ColorRange[0]=this.ColorRange[0],this.elementDsl.ColorRange[1]=this.ColorRange[1],this.elementDsl.ColorSchema=this.ColorSchema,this.elementDsl.StaticColor=this.StaticColor,this.elementDsl.Label=this.Label,this.elementDsl.TextAnchor=this.TextAnchor,this.changeDSL(),this.changeCanvas()},changeDSL__:function(){this.elementDsl.TextDx=this.TextDx/100,this.elementDsl.TextDy=this.TextDy/100,this.elementDsl.TextRotation=this.TextRotation/100,this.changeDSL()}}},Qn=Kn,qn=(a("3aec"),a("5f1a"),Object(de["a"])(Qn,Gn,Jn,!1,null,"385b0f5e",null)),Zn=qn.exports,ei=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"ellipsePara"}},[a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("width")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.RootWidth,callback:function(t){e.RootWidth=t},expression:"RootWidth"}},e._l(e.widthValueList,(function(e){return a("el-option",{key:e.attrName,attrs:{label:e.attrName,value:e.attrName}})})),1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("height")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.RootHeight,callback:function(t){e.RootHeight=t},expression:"RootHeight"}},e._l(e.widthValueList,(function(e){return a("el-option",{key:e.attrName,attrs:{label:e.attrName,value:e.attrName}})})),1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("label")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.Label,callback:function(t){e.Label=t},expression:"Label"}},e._l(e.labelValueList,(function(e){return a("el-option",{key:e.attrName,attrs:{label:e.attrName,value:e.attrName}})})),1)],1),a("el-col",{attrs:{span:1}})],1),"hidden"!==e.Label?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("anchor")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.TextAnchor,callback:function(t){e.TextAnchor=t},expression:"TextAnchor"}},e._l(e.TextAnchorList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-col",{attrs:{span:1}})],1):e._e(),"hidden"!==e.Label?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("dx")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-slider",{attrs:{min:-100},on:{input:e.changeDSL__,change:e.changeCanvas},model:{value:e.TextDx,callback:function(t){e.TextDx=t},expression:"TextDx"}})],1),a("el-col",{attrs:{span:1}})],1):e._e(),"hidden"!==e.Label?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("dy")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-slider",{attrs:{min:-100},on:{input:e.changeDSL__,change:e.changeCanvas},model:{value:e.TextDy,callback:function(t){e.TextDy=t},expression:"TextDy"}})],1),a("el-col",{attrs:{span:1}})],1):e._e(),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("color")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeColor},model:{value:e.colorIndex,callback:function(t){e.colorIndex=t},expression:"colorIndex"}},e._l(e.valueList,(function(e,t){return a("el-option",{key:e.attrName,attrs:{label:e.attrName,value:t}})})),1)],1),a("el-col",{attrs:{span:1}})],1),"default"===e.colorFlag?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("value")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-color-picker",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.StaticColor,callback:function(t){e.StaticColor=t},expression:"StaticColor"}})],1),a("el-col",{attrs:{span:1}})],1):e._e(),"number"===e.colorFlag?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("colorRange")])]),a("el-col",{attrs:{span:2}}),a("el-col",{staticClass:"panel_control",attrs:{span:4}},[a("el-color-picker",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.ColorRange[0],callback:function(t){e.$set(e.ColorRange,0,t)},expression:"ColorRange[0]"}})],1),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:4}},[a("el-color-picker",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.ColorRange[1],callback:function(t){e.$set(e.ColorRange,1,t)},expression:"ColorRange[1]"}})],1),a("el-col",{attrs:{span:4}})],1):e._e(),"string"===e.colorFlag?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("colorSchema")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.ColorSchema,callback:function(t){e.ColorSchema=t},expression:"ColorSchema"}},e._l(e.colorSchemaList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-col",{attrs:{span:1}})],1):e._e()],1)},ti=[],ai={name:"ellipse-para",props:{elementDsl:Object,changeDSL:Function,changeCanvas:Function},data:function(){return{colorFlag:"default",colorIndex:1,colorSchemaList:["option 1","option 2"],RootWidth:"adaptive",RootHeight:"adaptive",sizeOption:"fill",ColorRange:["",""],ColorSchema:"",StaticColor:"#6baed6",Label:"hidden",TextAnchor:"middle",TextAnchorList:["start","middle","end"],TextDx:0,TextDy:0,TextRotation:0}},mounted:function(){},created:function(){var e=this;this.colorFlag=this.valueList[this.colorIndex].attrType,"TextRotation"in this.elementDsl?this.TextRotation=Math.floor(100*this.elementDsl.TextRotation):this.elementDsl.TextRotation=this.TextRotation/100,"TextDx"in this.elementDsl?this.TextDx=Math.floor(100*this.elementDsl.TextDx):this.elementDsl.TextDx=this.TextDx/100,"TextDy"in this.elementDsl?this.TextDy=Math.floor(100*this.elementDsl.TextDy):this.elementDsl.TextDy=this.TextDy/100,"TextAnchor"in this.elementDsl?this.TextAnchor=this.elementDsl.TextAnchor:this.elementDsl.TextAnchor=this.TextAnchor,"ColorRange"in this.elementDsl?(this.ColorRange[0]=this.elementDsl.ColorRange[0],this.ColorRange[1]=this.elementDsl.ColorRange[1]):(this.elementDsl.ColorRange=["#2171b5","#deebf7"],this.ColorRange=["#2171b5","#deebf7"]),"RootWidth"in this.elementDsl?this.RootWidth=this.elementDsl.RootWidth:this.elementDsl.RootWidth="adaptive","RootHeight"in this.elementDsl?this.RootHeight=this.elementDsl.RootHeight:this.elementDsl.RootHeight="adaptive","ColorSchema"in this.elementDsl?this.ColorSchema=this.elementDsl.ColorSchema:(this.elementDsl.ColorSchema=this.colorSchemaList[0],this.ColorSchema=this.colorSchemaList[0]),"Color"in this.elementDsl?this.valueList.forEach((function(t,a){t.attrName===e.elementDsl.Color&&(e.colorIndex=a,e.colorFlag=t.attrType)})):(this.elementDsl.Color=this.valueList[this.colorIndex].attrName,this.elementDsl.ColorType=this.valueList[this.colorIndex].attrType),"StaticColor"in this.elementDsl?this.StaticColor=this.elementDsl.StaticColor:this.elementDsl.StaticColor=this.StaticColor,"Label"in this.elementDsl?this.Label=this.elementDsl.Label:this.elementDsl.Label=this.Label},computed:Object(o["a"])({},Object(u["d"])(["attrObjArray"]),{valueList:function(){var e=[{attrName:"static",attrType:"default"}];return this.attrObjArray.forEach((function(t){"number"===t.attrType&&e.push(Object(o["a"])({},t))})),e},widthValueList:function(){var e=[{attrName:"adaptive",attrType:"default"}];return this.attrObjArray.forEach((function(t){e.push(Object(o["a"])({},t))})),e},labelValueList:function(){var e=[{attrName:"hidden",attrType:"default"}];return this.attrObjArray.forEach((function(t){e.push(Object(o["a"])({},t))})),e}}),methods:{changeColor:function(e){var t=this.valueList[e];this.colorFlag=t.attrType,this.elementDsl.Color=t.attrName,this.elementDsl.ColorType=t.attrType,this.changeDSL(),this.changeCanvas()},changeDSL_:function(){this.elementDsl.RootWidth=this.RootWidth,this.elementDsl.RootHeight=this.RootHeight,this.elementDsl.ColorRange[0]=this.ColorRange[0],this.elementDsl.ColorRange[1]=this.ColorRange[1],this.elementDsl.ColorSchema=this.ColorSchema,this.elementDsl.StaticColor=this.StaticColor,this.elementDsl.Label=this.Label,this.elementDsl.TextAnchor=this.TextAnchor,this.changeDSL(),this.changeCanvas()},changeDSL__:function(){this.elementDsl.TextDx=this.TextDx/100,this.elementDsl.TextDy=this.TextDy/100,this.elementDsl.TextRotation=this.TextRotation/100,this.changeDSL()}}},ni=ai,ii=(a("93b2"),a("b870"),Object(de["a"])(ni,ei,ti,!1,null,"19c001b4",null)),ri=ii.exports,si=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"linkPara"}},["arccurve"===e.elementDsl.Link?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("direction")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.Direction,callback:function(t){e.Direction=t},expression:"Direction"}},e._l(e.DirectionList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-col",{attrs:{span:1}})],1):e._e(),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("thickness")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.ThicknessIndex,callback:function(t){e.ThicknessIndex=t},expression:"ThicknessIndex"}},e._l(e.valueList,(function(e,t){return a("el-option",{key:e.attrName,attrs:{label:e.attrName,value:t}})})),1)],1),a("el-col",{attrs:{span:1}})],1),"default"===e.valueList[e.ThicknessIndex].attrType?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("value")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-slider",{attrs:{max:e.MaxThickness},on:{input:e.changeDSL__,change:e.changeCanvas},model:{value:e.WidthValue,callback:function(t){e.WidthValue=t},expression:"WidthValue"}})],1),a("el-col",{attrs:{span:1}})],1):e._e(),"number"===e.valueList[e.ThicknessIndex].attrType?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("minimum")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-slider",{attrs:{max:e.MaxThickness},on:{input:e.changeDSL__,change:e.changeCanvas},model:{value:e.MinWidthValue,callback:function(t){e.MinWidthValue=t},expression:"MinWidthValue"}})],1),a("el-col",{attrs:{span:1}})],1):e._e(),"number"===e.valueList[e.ThicknessIndex].attrType?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("maximum")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-slider",{attrs:{min:e.MinWidthValue,max:e.MaxThickness},on:{input:e.changeDSL__,change:e.changeCanvas},model:{value:e.MaxWidthValue,callback:function(t){e.MaxWidthValue=t},expression:"MaxWidthValue"}})],1),a("el-col",{attrs:{span:1}})],1):e._e()],1)},oi=[],li={name:"link-para",props:{elementDsl:Object,changeDSL:Function,changeCanvas:Function},data:function(){return{Thickness:"static",ThicknessIndex:0,WidthValue:2,MinWidthValue:1,MaxWidthValue:10,MaxThickness:20,Direction:"top",DirectionList:["top","bottom"]}},mounted:function(){console.log("link-para",this.elementDsl)},created:function(){"LinkWidth"in this.elementDsl?this.LinkWidth=this.elementDsl.LinkWidth:this.elementDsl.LinkWidth="static","StaticThickness"in this.elementDsl?this.WidthValue=Math.floor(this.elementDsl.StaticThickness):this.elementDsl.StaticThickness=this.WidthValue,"MinThickness"in this.elementDsl?this.MinWidthValue=Math.floor(this.elementDsl.MinThickness):this.elementDsl.MinThickness=this.MinWidthValue,"MaxThickness"in this.elementDsl?this.MaxWidthValue=Math.floor(this.elementDsl.MaxThickness):this.elementDsl.MaxThickness=this.MaxWidthValue,"ArcDirection"in this.elementDsl?this.Direction=this.elementDsl.ArcDirection:this.elementDsl.ArcDirection=this.DirectionList[0]},computed:Object(o["a"])({},Object(u["d"])(["attrObjArray"]),{valueList:function(){var e=[{attrName:"static",attrType:"default"}];this.attrObjArray.forEach((function(t){"number"===t.attrType&&e.push(Object(o["a"])({},t))}));for(var t=this.elementDsl.Thickness,a=0;a<this.attrObjArray.length;a++)t===this.attrObjArray[a].attrName&&(this.ThicknessIndex=a);return e}}),methods:{changeDSL_:function(){this.elementDsl.Thickness=this.valueList[this.ThicknessIndex].attrName,this.elementDsl.ArcDirection=this.Direction,this.changeDSL(),this.changeCanvas()},changeDSL__:function(){this.elementDsl.StaticThickness=this.WidthValue,this.elementDsl.MinThickness=this.MinWidthValue,this.elementDsl.MaxThickness=this.MaxWidthValue,this.changeDSL()}}},ci=li,di=(a("04de"),Object(de["a"])(ci,si,oi,!1,null,"527f70e4",null)),ui=di.exports,hi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"polarPara"}},[a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("start")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-slider",{on:{input:e.changeDSL__,change:e.changeCanvas},model:{value:e.StartAngle,callback:function(t){e.StartAngle=t},expression:"StartAngle"}})],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("central")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-slider",{on:{input:e.changeDSL__,change:e.changeCanvas},model:{value:e.CentralAngle,callback:function(t){e.CentralAngle=t},expression:"CentralAngle"}})],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("inner r")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-slider",{on:{input:e.changeDSL__,change:e.changeCanvas},model:{value:e.InnerRadius,callback:function(t){e.InnerRadius=t},expression:"InnerRadius"}})],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("direction")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.Direction,callback:function(t){e.Direction=t},expression:"Direction"}},e._l(e.DirectionOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("polar axis")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.PolarAxis,callback:function(t){e.PolarAxis=t},expression:"PolarAxis"}},e._l(e.PolarAxisOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{staticClass:"outer-row",attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[e._v("center")])]),a("el-col",{attrs:{span:1}}),a("el-col",{attrs:{span:15}},[a("el-radio-group",{attrs:{size:"mini"},on:{change:e.changeDSL_},model:{value:e.PolarAxisPara,callback:function(t){e.PolarAxisPara=t},expression:"PolarAxisPara"}},[a("el-radio-button",{attrs:{label:"x-axis"===e.PolarAxis?"left":"top"}}),a("el-radio-button",{attrs:{label:"x-axis"===e.PolarAxis?"right":"bottom"}})],1)],1),a("el-col",{attrs:{span:1}})],1)],1)},pi=[],fi={name:"polar-para",props:{CoordDsl:Object,changeDSL:Function,changeCanvas:Function},data:function(){return{DirectionOptions:["clockwise","anticlockwise"],PolarAxisOptions:["y-axis","x-axis"],CentralAngle:100,StartAngle:0,InnerRadius:0,CenterPara:0,Direction:"",PolarAxis:"",PolarAxisPara:"top"}},mounted:function(){},created:function(){"Direction"in this.CoordDsl?this.Direction=this.CoordDsl.Direction:(this.CoordDsl.Direction=this.DirectionOptions[0],this.Direction=this.DirectionOptions[0]),"CentralAngle"in this.CoordDsl?this.CentralAngle=100*this.CoordDsl.CentralAngle:(this.CoordDsl.CentralAngle=1,this.CentralAngle=Math.floor(100*this.CoordDsl.CentralAngle)),"StartAngle"in this.CoordDsl?this.StartAngle=100*this.CoordDsl.StartAngle:(this.CoordDsl.StartAngle=1,this.StartAngle=Math.floor(100*this.CoordDsl.StartAngle)),"InnerRadius"in this.CoordDsl?this.InnerRadius=100*this.CoordDsl.InnerRadius:(this.CoordDsl.InnerRadius=1,this.InnerRadius=Math.floor(100*this.CoordDsl.InnerRadius)),"PolarAxis"in this.CoordDsl?this.PolarAxis=this.CoordDsl.PolarAxis:this.CoordDsl.PolarAxis=this.PolarAxisOptions[0],"PolarCenter"in this.CoordDsl?this.PolarAxisPara=this.CoordDsl.PolarCenter:this.CoordDsl.PolarCenter=this.PolarAxisPara},methods:{changeDSL_:function(){this.CoordDsl.PolarAxis=this.PolarAxis,this.CoordDsl.PolarCenter=this.PolarAxisPara,this.CoordDsl.Direction=this.Direction,console.log("this.PolarAxis",this.PolarAxis,"this.PolarAxisPara",this.PolarAxisPara),"x-axis"!==this.PolarAxis||"top"!==this.PolarAxisPara&&"bottom"!==this.PolarAxisPara||(this.CoordDsl.PolarCenter="left",this.PolarAxisPara="left"),"y-axis"!==this.PolarAxis||"left"!==this.PolarAxisPara&&"right"!==this.PolarAxisPara||(this.CoordDsl.PolarCenter="top",this.PolarAxisPara="top"),console.log("this.CoordDsl",this.CoordDsl),this.changeDSL(),this.changeCanvas()},changeDSL__:function(){this.CoordDsl.CentralAngle=this.CentralAngle/100,this.CoordDsl.StartAngle=this.StartAngle/100,this.CoordDsl.InnerRadius=this.InnerRadius/100,this.changeDSL()}}},gi=fi,mi=(a("0b41"),a("6ac4"),Object(de["a"])(gi,hi,pi,!1,null,"21d5a59f",null)),yi=mi.exports,vi=(qa={name:"ParameterView",components:{IncludePara:un,JuxtaposePara:yn,WithinPara:xn,AlignPara:Rn,FlattenPara:Un,RectPara:$n,CirclePara:Bn,TrianglePara:Zn,EllipsePara:ri,LinkPara:ui,PolarPara:yi,ElementSketchFigure:ya,CoordSketchFigure:Bt,LayoutSketchFigure:ra},data:function(){return{valueList:[],staticValueList:[],Element:{},CoordinateSystem:{},Layout:{},relationDic:{"x-include-y-within":["include","within"],"x-juxtapose-y-within":["juxtapose","within"],"x-within-y-within":["within","within"],"x-include-y-juxtapose":["include","juxtapose"],"x-juxtapose-y-juxtapose":["juxtapose","juxtapose"],"x-within-y-juxtapose":["within","juxtapose"],"x-include-y-include":["include","include"],"x-juxtapose-y-include":["juxtapose","include"],"x-within-y-include":["within","include"],"x-align-y-flatten":["align","flatten"],"x-flatten-y-flatten":["flatten","flatten"],"x-align-y-align":["align","align"],"x-flatten-y-align":["flatten","align"]}}},props:{dslName:{type:String},dslObj:{type:Object}},watch:{attrObjArray:function(){var e=this;this.valueList=[{attrName:"adaptive",attrType:"default"}],this.attrObjArray.forEach((function(t){e.valueList.push(Object(o["a"])({},t))})),this.staticValueList=[{attrName:"static",attrType:"default"}],this.attrObjArray.forEach((function(t){e.staticValueList.push(Object(o["a"])({},t))}))},treeUnitLayoutState:function(){this.dslName===this.treeUnitDSLName&&this.updateTreeUnitView()}},created:function(){},beforeMount:function(){this.Element=this.dslObj.Element,this.CoordinateSystem=this.dslObj.CoordinateSystem,this.Layout=this.dslObj.Layout},mounted:function(){}},Object(lt["a"])(qa,"created",(function(){var e=this;this.valueList=[{attrName:"adaptive",attrType:"default"}],this.attrObjArray.forEach((function(t){e.valueList.push(Object(o["a"])({},t))}))})),Object(lt["a"])(qa,"computed",Object(o["a"])({},Object(u["d"])(["attrObjArray","selectParaName","hoverParam","hoverParamAxis","manipulatePara","manipulateValue"]),{hoverRoot:function(){return"root"===this.hoverParam},hoverSubtree:function(){return"subtree"===this.hoverParam},rootLayoutComponent:function(){return"Layout"in this.dslObj&&"X"in this.dslObj.Layout&&"Y"in this.dslObj.Layout&&"Root"in this.dslObj.Layout.X&&"Root"in this.dslObj.Layout.Y&&"Relation"in this.dslObj.Layout.X.Root&&"Relation"in this.dslObj.Layout.Y.Root&&"Undefined"!==this.dslObj.Layout.X.Root.Relation&&"Undefined"!==this.dslObj.Layout.Y.Root.Relation},subtreeLayoutComponent:function(){return"Layout"in this.dslObj&&"X"in this.dslObj.Layout&&"Y"in this.dslObj.Layout&&"Subtree"in this.dslObj.Layout.X&&"Subtree"in this.dslObj.Layout.Y&&"Relation"in this.dslObj.Layout.X.Subtree&&"Relation"in this.dslObj.Layout.Y.Subtree&&"Undefined"!==this.dslObj.Layout.X.Subtree.Relation&&"Undefined"!==this.dslObj.Layout.Y.Subtree.Relation},nodeComponent:function(){return"Element"in this.dslObj&&"Node"in this.dslObj.Element&&"hidden"!==this.dslObj.Element.Node&&(this.Element=this.dslObj.Element,!0)},linkComponent:function(){return"Element"in this.dslObj&&"Link"in this.dslObj.Element&&"hidden"!==this.dslObj.Element.Link&&(this.Element=this.dslObj.Element,!0)},coordComponent:function(){return"CoordinateSystem"in this.dslObj&&(this.CoordinateSystem=this.dslObj.CoordinateSystem,!0)}})),Object(lt["a"])(qa,"methods",Object(o["a"])({},Object(u["b"])(["updateTreeUnitLayout"]),{},Object(u["c"])(["UPDATE_TREE_UNIT_LAYOUT_STATE","UPDATE_TREE_CANVAS_LAYOUT_STATE","UPDATE_TREE_PREVIEW_LAYOUT_STATE"]),{changeDSL:function(){this.UPDATE_TREE_UNIT_LAYOUT_STATE()},changeCanvas:function(){sysDatasetObj.updateTreeDSLContentObject(this.dslName,this.dslObj),this.UPDATE_TREE_CANVAS_LAYOUT_STATE(),sysDatasetObj.updateSelectedDSLObject(this.dslName,this.dslObj),this.UPDATE_TREE_PREVIEW_LAYOUT_STATE()}})),qa),bi=vi,Di=(a("6cda"),a("0cd1"),Object(de["a"])(bi,nn,rn,!1,null,"af763276",null)),Si=Di.exports,Ti={name:"TreeUnitParameterView",components:{TreeUnitView:an,ParameterView:Si},data:function(){return{topPanelStyleObj:null,bottomPanelStyleObj:null,editableDSLName:0}},watch:{treeUnitDSLArray:{handler:function(){},deep:!0},treeUnitDSLName:function(){var e=this.treeUnitDSLName;null!=e&&"undefined"!==typeof e&&this.selectCurrentTreeUnitDSL(e)}},created:function(){},beforeMount:function(){},mounted:function(){this.initializePanelAttr()},computed:Object(o["a"])({},Object(u["d"])(["treeUnitDSLArray","treeUnitDSLName","focusedTreeObjArray","currentTreeDSLArray"])),methods:Object(o["a"])({removeTab:function(e){var t=this.treeUnitDSLArray,a=this.editableDSLName;a===e&&(t.forEach((function(n,i){if(n.name===e){var r=t[i+1]||t[i-1];r&&(a=r.name)}})),a===e&&(a=null)),this.editableDSLName=a,this.UPDATE_TREEUNIT_DSL_NAME(a);var n=t.filter((function(t){return t.name!==e}));this.UPDATE_TREEUNIT_DSL_ARRAY(n);var i=JSON.parse(JSON.stringify(this.currentTreeDSLArray));i.splice(i.indexOf(e),1),this.UPDATE_CURRENT_TREE_DSL_ARRAY(i)},selectCurrentTreeUnitDSL:function(e){var t=this.treeUnitDSLArray;this.editableDSLName=e;for(var a=0;a<t.length;a++)t[a].name===e&&this.handleClick({index:a})},handleClick:function(e,t){for(var a=e.index,n=0;n<this.treeUnitDSLArray.length;n++)this.treeUnitDSLArray[n].visible=!1;var i=this.treeUnitDSLArray[a].name;this.UPDATE_TREEUNIT_DSL_NAME(i),this.treeUnitDSLArray[a].visible=!0,this.$forceUpdate()},initializePanelAttr:function(){var e=$("#treeunit-parameter-container").width(),t=.9*e;this.topPanelStyleObj={height:t+"px"},this.bottomPanelStyleObj={top:t+"px"}}},Object(u["c"])(["UPDATE_TREEUNIT_DSL_ARRAY","UPDATE_TREEUNIT_DSL_NAME","UPDATE_TREE_CANVAS_LAYOUT_STATE","UPDATE_CURRENT_TREE_DSL_ARRAY"]))},xi=Ti,Ai=(a("029a"),a("cacc"),Object(de["a"])(xi,Ba,Ga,!1,null,"3a786f3c",null)),_i=Ai.exports;function Li(e,t){var a=Ci(e,t);Oi(a);var n=Ri(a);return n[0]}function Ci(e,t){new Date,new Date((new Date).setHours(0,0,0,0));var a=new Date((new Date).setHours(0,0,0,0));a.setDate(a.getDate()+1),a=new Date(+a-1);var n=ji(e,t),i={};for(var r in n){var s=n[r];i[r]=Ei(r,s)}console.log("areaRecordDataObj",i);var o=i["湖北省"],l={};for(var c in o)for(var d in l[c]={},i)l[c][d]=i[d][c];return l}function Oi(e){for(var t in i(e),r(e),e)s(e[t]);for(var a in e)o(e[a]);for(var n in e)l(e[n]);function i(e){for(var t in e)for(var a in e[t]["中国"]={provinceName:"中国",children:[]},e[t])"undefined"!==typeof e[t][a]&&"中国"===e[t][a].country&&(e[t]["中国"]["children"].push(e[t][a]),delete e[t][a])}function r(e){for(var t in e){var a=e[t];for(var n in a.children=[],a.provinceName="全球",a)"object"===Object(pe["a"])(a[n])&&"children"!==n&&(a.children.push(a[n]),delete a[n])}}function s(e){if("children"in e)for(var t=0;t<e["children"].length;t++)s(e["children"][t]);else"cities"in e&&(e["children"]=e["cities"],delete e["cities"])}function o(e){var t=0,a=0,n=0,i=0;if("children"in e)for(var r=0;r<e["children"].length;r++)o(e["children"][r]),t+=e["children"][r].confirmedCount,a+=e["children"][r].suspectedCount,n+=e["children"][r].curedCount,i+=e["children"][r].deadCount;"confirmedCount"in e||(e["confirmedCount"]=t),"suspectedCount"in e||(e["suspectedCount"]=a),"curedCount"in e||(e["curedCount"]=n),"deadCount"in e||(e["deadCount"]=i),e["value"]=0,0!==e["confirmedCount"]&&(e["value"]=Math.log(e["confirmedCount"])),"cityName"in e&&""!==e["cityName"]?-1!==e["cityName"].indexOf(e["confirmedCount"])?e["cityName"]=e["cityName"]:e["cityName"]=e["cityName"]+" "+e["confirmedCount"]:"cityName"in e||(e["cityName"]=""),"provinceName"in e&&(e["name"]=e["provinceName"]),"cityName"in e&&""!==e["cityName"]&&(e["name"]=e["cityName"].replace(e["confirmedCount"],"").replace(" ","")),delete e["comment"],delete e["updateTime"],delete e["createTime"],delete e["modifyTime"]}function l(e){if("children"in e){var t=0;if("children"in e)for(var a=0;a<e["children"].length;a++)l(e["children"][a]),t+=e["children"][a].value;e["value"]=t}}}function Ri(e){var t=[];for(var a in e)t.push(e[a]),e[a].day=a;return t}function Ei(e,t){var a=new Date("2020/1/24"),n=new Date,i=n,r={},s=["湖北省","广东省","浙江省","北京市","上海市","湖南省","安徽省","重庆市","四川省","山东省","广西壮族自治区","福建省","江苏省","河南省","海南省","天津市","江西省","陕西省","贵州省","辽宁省","香港","黑龙江省","澳门","新疆维吾尔自治区","甘肃省","云南省","台湾","山西省","吉林省","河北省","宁夏回族自治区","内蒙古自治区","青海省","西藏自治区"];while(i>=a){var o=new Date(i.setHours(0,0,0,0));o.setDate(o.getDate()+1),o=new Date(+o-1);for(var l=o.format("yyyy-MM-dd"),c={provinceName:e,provinceShortName:e,confirmedCount:0,suspectedCount:0,curedCount:0,deadCount:0,comment:"",cities:[],country:-1!==s.indexOf(e)?"中国":e},d=0;d<t.length;d++)if(t[d].updateTime<=+o){c=t[d];break}r[l]=c,i.setDate(i.getDate()-1)}return r}function ji(e,t){for(var a=e.results,n=t.results,i={},r=0;r<n.length;r++){var s=n[r];i[s]=[]}for(var o=0;o<a.length;o++){var l=a[o].provinceName;i[l].push(a[o])}return i}function Pi(e){return wi.apply(this,arguments)}function wi(){return wi=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d3.json("template/"+t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)}))),wi.apply(this,arguments)}var Ni,Ui=a("ba5a"),ki={name:"app",components:{TreeUnitViewParameterTitle:za,TreeCanvas:De,TreeCanvasViewTitle:Oe,DslList:Na,DslListTitle:Va,TreeUnitParameterView:_i,OriginalDataView:he,DataDialog:ze,ExportDialog:nt,TreedslDialog:St,LoginDialog:Ct,SignUpDialog:wt,UserInfoDialog:Wt,CoordinateSystem:Qt,Layout:ca,Element:Sa},data:function(){return{appName:"nCoV Treemap",treeCanvasParas:{title:"TreeCanvas"},leftPanelWidth:0,treeDataArray:[],initTreeDataName:null,treeTemplateObj:null,activeIndex:null,componentKey:0,dataDialogVisible:!1,treedslDialogVisible:!1,exportDialogVisible:!1,loginDialogVisible:!1,signupDialogVisible:!1,userInfoDialogVisible:!1,loading:!0,loadingData:!0,loadingView:!0,OPEN_PREVIEW_PANEL_DURATION:1e3,treeCanvasKey:0,systemUserName:"root",userInfoDialogKey:0,dataDialogKey:0,systemTreeTemplateArray:[],userTreeTemplateArray:[],treedslDialogUpdate:1}},created:function(){},beforeMount:function(){var e=this;window.sysDatasetObj=new ct;var t=$.Deferred(),a=$.Deferred(),n=$.Deferred(),i=$.Deferred(),r=$.Deferred(),s=$.Deferred();$.when(t,a,n,i).then((function(){e.loading=!1,e.loadingData=!1;var t=e.computeTreeIndexWithDSL(),a=sysDatasetObj.getLayoutParas();a.treeIndexWithDSL=t,a.treeDSLContentObj=e.getTreeDSLContentObj(t),setTimeout((function(){e.UPDATE_TREE_CANVAS_LAYOUT_STATE(),e.loadingView=!1}),100)}));var o="treeunit.json";xe(o).then((function(e){sysDatasetObj.updateTreeUnitDataset(e),t.resolve()}));var l="root",c="ncov-china.json";this.initTreeDataName=c;var d=null,u=null;$.when(r,s).then((function(){var t=Li(d,u),n=e.getChinaNCovData(t),i=je(n,l,c);sysDatasetObj.addTreeDataset(i),e.updateSelectedHierarchicalData(c),a.resolve()}));var h="https://lab.isaaclin.cn/nCoV/api/area?latest=0",p="https://lab.isaaclin.cn/nCoV/api/provinceName";$.getJSON(h,(function(e){d=e,r.resolve()})),$.getJSON(p,(function(e){u=e,s.resolve()}));var f=["dice","slice"],g="ncov/";dt(f,g).then((function(e){var t=[];for(var a in e)t.push({treename:a,username:l,template:e[a]});sysDatasetObj.addTreeTemplateArray(t),sysDatasetObj.initSelectedDSLObject(f),n.resolve()}));var m="ncov_treemap.json";Pi(m).then((function(t){e.treeTemplateObj=t,i.resolve()}))},mounted:function(){this.addDateFormat(),this.initializeLSCG()},computed:Object(o["a"])({},Object(u["d"])(["userInfoName","treeViewUpdate","currentTree","treeDataViewFormat","treeDslOption","previewTreeObj"])),methods:Object(o["a"])({iconClass:function(e){return"icon-"+e},onShow:function(){},initUserName:function(){if(this.$cookies.isKey("user-info-obj")){var e=this.$cookies.get("user-info-obj"),t=e.username;this.UPDATE_USER_INFO_OBJ(e),this.UPDATE_USER_INFO_NAME(t)}},handleClickUserIcon:function(){"Login"===this.userInfoName?this.loginDialogVisible=!0:this.userInfoDialogVisible=!0,this.userInfoDialogKey=(this.userInfoDialogKey+1)%2},handleClickDataIcon:function(){this.dataDialogVisible=!0,this.dataDialogKey=(this.dataDialogKey+1)%2},handleClickTemplateIcon:function(){this.treedslDialogVisible=!0,this.treedslDialogUpdate=(this.treedslDialogUpdate+1)%2},showTooltip:function(){return"Login"===this.userInfoName?"click to login":"username: "+this.userInfoName},promptMessage:function(e,t){this.$message({type:e,message:t})},initSystemDateset:function(e){var t={username:this.systemUserName};$e(t,this.getSystemDatesetCallBack,e)},initUserDataset:function(e,t){var a={username:t};$e(a,this.getSystemDatesetCallBack,e)},getSystemDatesetCallBack:function(e,t){sysDatasetObj.addTreeDatasetArray(e),t.resolve()},initSystemTemplate:function(e){var t={username:this.systemUserName};He(t,this.getSystemTemplateCallBack,e)},initUserTemplate:function(e,t){var a={username:t};He(a,this.getSystemTemplateCallBack,e)},getSystemTemplateCallBack:function(e,t){sysDatasetObj.addTreeTemplateArray(e),t.resolve()},getTreeDSLContentObj:function(e){var t={};for(var a in e){var n=e[a];t[n]=sysDatasetObj.getTreeDSLObject(n)}return t},getChinaNCovData:function(e){for(var t={},a=0;a<e.children.length;a++)"中国"===e.children[a].provinceName&&(t=e.children[a]);return t},closeSignupDialog:function(){this.signupDialogVisible=!1},openSignUpDialog:function(){this.signupDialogVisible=!0},closeLoginDialog:function(){this.loginDialogVisible=!1},closeUserInfoDialog:function(){this.userInfoDialogVisible=!1},closeDataView:function(){var e=this,t=e.OPEN_PREVIEW_PANEL_DURATION,a=$("#original-data-view").width();$("#treecanvas-content-view").animate({left:"-="+a},t,(function(){e.treeCanvasKey=(e.treeCanvasKey+1)%2}))},openDataView:function(){var e=this,t=e.OPEN_PREVIEW_PANEL_DURATION,a=$("#original-data-view").width();$("#treecanvas-content-view").animate({left:"+="+a},t,(function(){e.treeCanvasKey=(e.treeCanvasKey+1)%2}))},updateSelectedTreeDateName:function(e){var t=this;t.updateSelectedHierarchicalData(e)},closeDataDialog:function(){this.dataDialogVisible=!1},updateSelectedHierarchicalData:function(e){var t=this;sysDatasetObj.updateDataset(e);var a=sysDatasetObj.getAllTreeObjIdArray(),n=sysDatasetObj.extractAttrArray();t.UPDATE_ATTR_OBJ_ARRAY(n),t.UPDATE_FOCUS_TREE_OBJ_ARRAY(a),t.UPDATE_SELECTED_DATASET(e),t.updateLayoutParas();sysDatasetObj.getLayoutParas();this.UPDATE_TREE_CANVAS_LAYOUT_STATE()},updateLayoutParas:function(){var e=sysDatasetObj.getLayoutParas(),t=e.treeIndexWithDSL,a=e.treeDSLContentObj;if("undefined"!==typeof t&&"undefined"!==typeof a){for(var n=t["index-0"],i=sysDatasetObj.getAllTreeObjIdArray(),r=0;r<i.length;r++){var s=i[r];"undefined"===typeof t[s]&&(t[s]=n)}for(var o in t)-1===i.indexOf(o)&&delete t[o]}},computeTreeIndexWithDSL:function(){for(var e=this.treeTemplateObj.templates,t=sysDatasetObj.getNodeArrayWithValueObj(),a={},n=0;n<e.length;n++)for(var i=e[n],r=i.query,s=this.getQueryNodeIdArray(r,t),o=i.recursive,l=this.getFocusedTreeObjIdArray(s,o,t),c=i.dslname,d=0;d<l.length;d++)a[l[d]]=c;return a},getQueryNodeIdArray:function(e,t){var a=e.attribute,n=e.criteria,i=[];switch(n){case"odd":for(var r in t)t[r][a]%2===1&&i.push(t[r].index);break;case"even":for(var s in t)t[s][a]%2===0&&i.push(t[s].index);break;default:for(var o in t)t[o][a]===n&&i.push(t[o].index);break}return i},getFocusedTreeObjIdArray:function(e,t,a){for(var n=[],i=0;i<e.length;i++){var r=e[i],s=[];"true"===t||!0===t?s=l(r):"false"!==t&&!1!==t||(s=[r]);for(var o=0;o<s.length;o++)-1===n.indexOf(s[o])&&n.push(s[o])}return n;function l(e){var t=[],n=[e];while(void 0!==e){for(var i=0;i<a[e].subtreeLayout.length;i++){var r=a[e].subtreeLayout[i].id;t.push(r),n.push(r)}e=t.shift()}return n}},addDateFormat:function(){Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e}},initializeLSCG:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ui["initialize"]().then((function(){}));case 2:window.lscgSolver=Ui;case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},Object(u["c"])(["UPDATE_SELECTED_DATASET","UPDATE_SELECTED_DSL_ARRAY","UPDATE_ATTR_OBJ_ARRAY","UPDATE_FOCUS_TREE_OBJ_ARRAY","UPDATE_HIERARCHICAL_DATA","UPDATE_NODE_ARRAY","UPDATE_HIERARCHICAL_DSL","UPDATE_TREE_DSL_OPTION","UPDATA_DRAWER_VIEW_SELECTION_STATE","UPDATE_TREE_CANVAS_LAYOUT_STATE","UPDATE_USER_INFO_OBJ","UPDATE_USER_INFO_NAME"]))},Ii=ki,Mi=(a("7c55"),a("40ed"),Object(de["a"])(Ii,i,r,!1,null,"3fedff4c",null)),Wi=Mi.exports;function Vi(e){return e&&"object"===Object(pe["a"])(e)&&!Array.isArray(e)}function $i(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];if(!a.length)return e;var i=a.shift();if(Vi(e)&&Vi(i))for(var r in i)Vi(i[r])?(e[r]||Object.assign(e,Object(lt["a"])({},r,{})),$i(e[r],i[r])):Object.assign(e,Object(lt["a"])({},r,i[r]));return $i.apply(void 0,[e].concat(a))}Ne.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n["default"].use(u["a"]);var Hi=new u["a"].Store({state:{attrObjArray:[],previewTreeObj:null,selectedPreviewNodeId:null,viewSelectionMode:"Sibling",viewSelectionMode2:"Subtree",focusedTreeObjArray:[],selectedDataset:null,treeUnitDSLArray:[],treeUnitDSLName:null,selectedDSLArray:[],changedDSLNameState:0,treeCanvasLayoutState:0,treeUnitLayoutState:0,treePreviewLayoutState:0,selectParaName:null,dslListSelectedDSLName:null,dslListSelectedDSLState:0,manipulateParaValue:null,manipulateValue:0,manipulatePara:"",assignNodeQuery:"index",assignRecursiveMode:"true",assignDSLName:"",assembleMode:"bottom-up",assembleSubtreeWidth:"adaptive",assembleSubtreeHeight:"adaptive",currentTreeDSLArray:[],userInfoName:"Login",userInfoObj:null,hierarchicalData:null,originalHierarchicalDataObj:null,nodeArray:[],originalNodeArray:[],hierarchicalDSL:{},focusedDSLObj:{},treeDSLArray:[],treeDSLArrayKey:0,hoveringDSLItem:null,treeViewUpdate:0,currentTree:"test",treeDSLViewFormat:"block",treeDataViewFormat:"tree",treeDataViewSetting:!1,dataDisplayMode:"tree",selectionMode:"Subtree",layouts:[],layoutParas:{},treeUnitLayout:[],partitionValue:0,partitionDataObjDic:{},drawerViewSelectionState:"template",focusedDSLObjIndex:0,dragComponentState:"DRAG-END",rootLayoutComponent:null,subtreeLayoutComponent:null,nodeComponent:null,linkComponent:null,coordComponent:null,hoverParam:"",hoverParamAxis:""},mutations:(Ni={},Object(lt["a"])(Ni,"UPDATE_USER_INFO_OBJ",(function(e,t){e.userInfoObj=t})),Object(lt["a"])(Ni,"UPDATE_USER_INFO_NAME",(function(e,t){e.userInfoName=t})),Object(lt["a"])(Ni,"UPDATE_CURRENT_TREE_DSL_ARRAY",(function(e,t){e.currentTreeDSLArray=t})),Object(lt["a"])(Ni,"UPDATE_ASSEMBLE_SUBTREE_HEIGHT",(function(e,t){e.assembleSubtreeHeight=t})),Object(lt["a"])(Ni,"UPDATE_ASSEMBLE_SUBTREE_WIDTH",(function(e,t){e.assembleSubtreeWidth=t})),Object(lt["a"])(Ni,"UPDATE_ASSEMBLE_MODE",(function(e,t){e.assembleMode=t})),Object(lt["a"])(Ni,"UPDATE_ASSIGN_DSL_NAME",(function(e,t){e.assignDSLName=t})),Object(lt["a"])(Ni,"UPDATE_ASSIGN_NODE_QUERY",(function(e,t){e.assignNodeQuery=t})),Object(lt["a"])(Ni,"UPDATE_ASSIGN_RECURSIVE_MODE",(function(e,t){e.assignRecursiveMode=t})),Object(lt["a"])(Ni,"UPDATE_ATTR_OBJ_ARRAY",(function(e,t){e.attrObjArray=t})),Object(lt["a"])(Ni,"UPDATE_VIEW_SELECTION_MODE",(function(e,t){e.viewSelectionMode=t})),Object(lt["a"])(Ni,"UPDATE_VIEW_SELECTION_MODE2",(function(e,t){e.viewSelectionMode2=t})),Object(lt["a"])(Ni,"UPDATE_PREVIEW_TREE_OBJ",(function(e,t){e.previewTreeObj=t})),Object(lt["a"])(Ni,"UPDATE_FOCUS_TREE_OBJ_ARRAY",(function(e,t){e.focusedTreeObjArray=t})),Object(lt["a"])(Ni,"UPDATE_SELECTED_PREVIEW_NODE_ID",(function(e,t){e.selectedPreviewNodeId=t})),Object(lt["a"])(Ni,"UPDATE_SELECTED_DATASET",(function(e,t){e.selectedDataset=t})),Object(lt["a"])(Ni,"UPDATE_TREEUNIT_DSL_ARRAY",(function(e,t){e.treeUnitDSLArray=t})),Object(lt["a"])(Ni,"UPDATE_TREEUNIT_DSL_NAME",(function(e,t){e.treeUnitDSLName=t})),Object(lt["a"])(Ni,"UPDATE_CHANGED_DSL_NAME_STATE",(function(e,t){e.changedDSLNameState=(e.changedDSLNameState+1)%2})),Object(lt["a"])(Ni,"UPDATE_TREE_CANVAS_LAYOUT_STATE",(function(e,t){e.treeCanvasLayoutState=(e.treeCanvasLayoutState+1)%2})),Object(lt["a"])(Ni,"UPDATE_TREE_UNIT_LAYOUT_STATE",(function(e,t){e.treeUnitLayoutState=(e.treeUnitLayoutState+1)%2})),Object(lt["a"])(Ni,"UPDATE_TREE_PREVIEW_LAYOUT_STATE",(function(e,t){e.treePreviewLayoutState=(e.treePreviewLayoutState+1)%2})),Object(lt["a"])(Ni,"UPDATE_LAYOUTS",(function(e,t){e.layouts=t})),Object(lt["a"])(Ni,"UPDATE_TREE_UNIT_LAYOUTS",(function(e,t){e.treeUnitLayout=t})),Object(lt["a"])(Ni,"UPDATE_SELECT_PARA_NAME",(function(e,t){e.selectParaName=t})),Object(lt["a"])(Ni,"UPDATE_HOVER_PARAM",(function(e,t){e.hoverParam=t.param,e.hoverParamAxis=t.axis})),Object(lt["a"])(Ni,"UPDATE_DSLLIST_SELECTED_DSL_NAME",(function(e,t){e.dslListSelectedDSLName=t})),Object(lt["a"])(Ni,"UPDATE_DSLLIST_SELECTED_DSL_STATE",(function(e){e.dslListSelectedDSLState=(e.dslListSelectedDSLState+1)%2})),Object(lt["a"])(Ni,"MANIPULATE_PARA",(function(e,t){e.manipulatePara=t})),Object(lt["a"])(Ni,"MANIPULATE_VALUE",(function(e,t){e.manipulateValue=t})),Object(lt["a"])(Ni,"UPDATE_HIERARCHICAL_DATA",(function(e,t){e.hierarchicalData=t})),Object(lt["a"])(Ni,"UPDATE_SELECTED_DSL_ARRAY",(function(e,t){e.selectedDSLArray=t})),Object(lt["a"])(Ni,"UPDATE_ORIGINAL_HIERARCHICAL_DATA",(function(e,t){e.originalHierarchicalDataObj=t})),Object(lt["a"])(Ni,"UPDATE_NODE_ARRAY",(function(e,t){e.nodeArray=t})),Object(lt["a"])(Ni,"UPDATE_ORIGINAL_NODE_ARRAY",(function(e,t){e.originalNodeArray=t})),Object(lt["a"])(Ni,"UPDATE_HIERARCHICAL_DSL",(function(e,t){e.hierarchicalDSL=t})),Object(lt["a"])(Ni,"UPDATE_CURRENT_TREE",(function(e,t){e.currentTree=t})),Object(lt["a"])(Ni,"UPDATE_DSL_VIEW_FORMAT",(function(e,t){e.treeDSLViewFormat=t})),Object(lt["a"])(Ni,"UPDATE_DATA_VIEW_FORMAT",(function(e,t){e.treeDataViewFormat=t})),Object(lt["a"])(Ni,"UPDATE_DATA_VIEW_SETTING",(function(e,t){e.treeDataViewSetting=t})),Object(lt["a"])(Ni,"UPDATE_TREE_DSL_ARRAY",(function(e,t){e.treeDSLArray=t})),Object(lt["a"])(Ni,"UPDATE_TREE_DSL_ARRAY_KEY",(function(e,t){e.treeDSLArrayKey=t})),Object(lt["a"])(Ni,"UPDATE_DATA_DISPLAY_MODE",(function(e,t){e.dataDisplayMode=t})),Object(lt["a"])(Ni,"UPDATE_SELECTION_MODE",(function(e,t){e.selectionMode=t})),Object(lt["a"])(Ni,"UPDATE_HOVERING_DSL_ITEM",(function(e,t){e.hoveringDSLItem=t})),Object(lt["a"])(Ni,"UPDATE_FOCUSED_DSL_OBJ",(function(e,t){e.focusedDSLObj=t})),Object(lt["a"])(Ni,"UPDATE_LAYOUT_PARAS",(function(e,t){e.layoutParas=t})),Object(lt["a"])(Ni,"UPDATE_PARTITION_VALUE",(function(e,t){e.partitionValue=t})),Object(lt["a"])(Ni,"UPDATE_PARTITION_DATA_OBJ_DIC",(function(e,t){e.partitionDataObjDic=t})),Object(lt["a"])(Ni,"UPDATA_DRAWER_VIEW_SELECTION_STATE",(function(e,t){e.drawerViewSelectionState=t})),Object(lt["a"])(Ni,"UPDATE_FOCUSED_DSL_OBJ_INDEX",(function(e,t){e.focusedDSLObjIndex=t})),Object(lt["a"])(Ni,"UPDATE_DRAG_COMPONENT_STATE",(function(e,t){e.dragComponentState=t})),Object(lt["a"])(Ni,"UPDATE_ROOT_LAYOUT",(function(e,t){e.rootLayoutComponent=t})),Object(lt["a"])(Ni,"UPDATE_SUBTREE_LAYOUT",(function(e,t){e.subtreeLayoutComponent=t})),Object(lt["a"])(Ni,"UPDATE_NODE",(function(e,t){e.nodeComponent=t})),Object(lt["a"])(Ni,"UPDATE_LINK",(function(e,t){e.linkComponent=t})),Object(lt["a"])(Ni,"UPDATE_COORD",(function(e,t){e.coordComponent=t})),Ni),actions:{updateTreeDSL:function(e,t){e.commit;for(var a=e.state,n=t.treeDSLContent,i=t.editorId,r=0;r<a.treeDSLArray.length;r++)a.treeDSLArray[r].editorId===i&&(a.treeDSLArray[r].content=n)},updateTreeUnitLayout:function(e,t){var a=e.commit;a("UPDATE_TREE_UNIT_LAYOUTS",t)},setDSLComponent:function(e,t){var a=e.commit,n=e.state;if(0===n.treeUnitDSLArray.length){var i={name:"untitled0"};i.dslObj=l(i.name),i.dslObj=$i(i.dslObj,t),sysDatasetObj.updateSelectedDSLObject(i.name,i.dslObj),n.selectedDSLArray.push(i.name),sysDatasetObj.updateTreeDSLContentObject(i.name,i.dslObj),n.treeUnitDSLArray.push(i),n.treeUnitDSLArray=JSON.parse(JSON.stringify(n.treeUnitDSLArray)),setTimeout((function(){if(n.treeUnitDSLArray.length>=1){var e=n.treeUnitDSLArray[0].name;a("UPDATE_DSLLIST_SELECTED_DSL_NAME",e),a("UPDATE_TREEUNIT_DSL_NAME",e)}a("UPDATE_TREE_UNIT_LAYOUT_STATE"),sysDatasetObj.updateTreeDSLContentObject(i.name,i.dslObj),a("UPDATE_TREE_CANVAS_LAYOUT_STATE"),sysDatasetObj.updateSelectedDSLObject(i.name,i.dslObj),a("UPDATE_TREE_PREVIEW_LAYOUT_STATE")}),200)}else for(var r=0;r<n.treeUnitDSLArray.length;r++){var s=n.treeUnitDSLArray[r];if(s.name===n.treeUnitDSLName){var o=$i(s.dslObj,t);console.log("existingTreeDSLObj",o),s.dslObj=o,a("UPDATE_TREE_UNIT_LAYOUT_STATE"),sysDatasetObj.updateTreeDSLContentObject(n.treeUnitDSLName,o),a("UPDATE_TREE_CANVAS_LAYOUT_STATE"),sysDatasetObj.updateSelectedDSLObject(n.treeUnitDSLName,o),a("UPDATE_TREE_PREVIEW_LAYOUT_STATE")}}function l(e){var t={};return y(t),t.Name=e,t}},removeDSLComponent:function(e,t){for(var a=e.commit,n=e.state,i=0;i<n.treeUnitDSLArray.length;i++){var r=n.treeUnitDSLArray[i];if(r.name===n.treeUnitDSLName){var s=r.dslObj;"Root"===t?(s.Layout.X.Root.Relation="Undefined",s.Layout.Y.Root.Relation="Undefined"):"Subtree"===t?(s.Layout.X.Subtree.Relation="Undefined",s.Layout.Y.Subtree.Relation="Undefined"):"Node"===t?s.Element.Node="hidden":"Link"===t?s.Element.Link="hidden":"CoordinateSystem"===t&&delete s.CoordinateSystem,sysDatasetObj.updateTreeDSLContentObject(n.treeUnitDSLName,s),a("UPDATE_TREE_CANVAS_LAYOUT_STATE"),sysDatasetObj.updateSelectedDSLObject(n.treeUnitDSLName,s),a("UPDATE_TREE_PREVIEW_LAYOUT_STATE")}}n.treeUnitDSLArray=JSON.parse(JSON.stringify(n.treeUnitDSLArray)),a("UPDATE_TREE_UNIT_LAYOUT_STATE")}}}),Yi=a("5c96"),Xi=a.n(Yi),Fi=(a("0fae"),a("a7fe")),zi=a.n(Fi),Bi=a("2b27"),Gi=a.n(Bi),Ji=a("5698"),Ki=a("1157");a("a342");n["default"].use(Xi.a),window.baseURL="",Ne.a.defaults.baseURL="http://go-tree.info/api",window.baseURL="http://go-tree.info/api",n["default"].use(zi.a,Ne.a),n["default"].use(Gi.a),n["default"].config.productionTip=!1,window.d3=Ji,window.$=Ki,window.exports={},new n["default"]({store:Hi,render:function(e){return e(Wi)}}).$mount("#app")},"5b57":function(e,t,a){},"5f1a":function(e,t,a){"use strict";var n=a("6a37"),i=a.n(n);i.a},"5f7f":function(e,t,a){},"62b4":function(e,t,a){"use strict";var n=a("5010"),i=a.n(n);i.a},"62c0":function(e,t,a){"use strict";var n=a("45b2"),i=a.n(n);i.a},6535:function(e,t,a){},"69bb":function(e,t,a){"use strict";var n=a("3129"),i=a.n(n);i.a},"6a37":function(e,t,a){},"6ac4":function(e,t,a){"use strict";var n=a("957f"),i=a.n(n);i.a},"6aea":function(e,t,a){"use strict";var n=a("24b6"),i=a.n(n);i.a},"6cda":function(e,t,a){"use strict";var n=a("b42f"),i=a.n(n);i.a},"6d59":function(e,t,a){"use strict";var n=a("fc80"),i=a.n(n);i.a},"71b3":function(e,t,a){"use strict";var n=a("f346"),i=a.n(n);i.a},"71b4":function(e,t,a){"use strict";var n=a("1d5a"),i=a.n(n);i.a},"735c":function(e,t,a){"use strict";var n=a("52ef"),i=a.n(n);i.a},"760b":function(e,t,a){},7803:function(e,t,a){"use strict";var n=a("f41a"),i=a.n(n);i.a},"7c55":function(e,t,a){"use strict";var n=a("2464"),i=a.n(n);i.a},"7d82":function(e,t,a){"use strict";var n=a("760b"),i=a.n(n);i.a},"7fcb":function(e,t,a){"use strict";var n=a("5b57"),i=a.n(n);i.a},"80f7":function(e,t,a){},8828:function(e,t,a){"use strict";var n=a("9235"),i=a.n(n);i.a},"89e5":function(e,t,a){"use strict";var n=a("55a2"),i=a.n(n);i.a},"8a8c":function(e,t,a){"use strict";var n=a("103b"),i=a.n(n);i.a},9023:function(e,t,a){},9235:function(e,t,a){},"93b2":function(e,t,a){"use strict";var n=a("55bb"),i=a.n(n);i.a},9522:function(e,t,a){"use strict";var n=a("1fc1"),i=a.n(n);i.a},"957f":function(e,t,a){},"9b9b":function(e,t,a){},"9c02":function(e,t,a){},a165:function(e,t,a){"use strict";var n=a("23a7"),i=a.n(n);i.a},a342:function(e,t,a){},a561:function(e,t,a){},a660:function(e,t,a){"use strict";var n=a("0006"),i=a.n(n);i.a},a685:function(e,t,a){"use strict";var n=a("3511"),i=a.n(n);i.a},a70f:function(e,t,a){"use strict";var n=a("c415"),i=a.n(n);i.a},af11:function(e,t,a){"use strict";var n=a("fcbc"),i=a.n(n);i.a},b2c8:function(e,t,a){"use strict";var n=a("d27d"),i=a.n(n);i.a},b42f:function(e,t,a){},b47e:function(e,t,a){"use strict";var n=a("a561"),i=a.n(n);i.a},b870:function(e,t,a){"use strict";var n=a("80f7"),i=a.n(n);i.a},bc3b:function(e,t,a){},be91:function(e,t,a){},c32b:function(e,t,a){},c415:function(e,t,a){},c984:function(e,t,a){},ca23:function(e,t,a){},ca3e:function(e,t,a){},cacc:function(e,t,a){"use strict";var n=a("48e4"),i=a.n(n);i.a},cb87:function(e,t,a){"use strict";var n=a("0074"),i=a.n(n);i.a},cd36:function(e,t,a){"use strict";var n=a("2766"),i=a.n(n);i.a},d27d:function(e,t,a){},d4a5:function(e,t,a){"use strict";var n=a("c984"),i=a.n(n);i.a},d686:function(e,t,a){},e289:function(e,t,a){"use strict";var n=a("f6d9"),i=a.n(n);i.a},e35a:function(e,t,a){"use strict";var n=a("be91"),i=a.n(n);i.a},e5e9:function(e,t,a){},edaf:function(e,t,a){},f346:function(e,t,a){},f41a:function(e,t,a){},f456:function(e,t,a){},f665:function(e,t,a){"use strict";var n=a("d686"),i=a.n(n);i.a},f6d9:function(e,t,a){},fc80:function(e,t,a){},fcbc:function(e,t,a){},ff03:function(e,t,a){"use strict";var n=a("4593"),i=a.n(n);i.a}});